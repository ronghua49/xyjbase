webpackJsonp([0,1],{"+4C/":function(e,t){},"/4e5":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"KtTable",components:{KtButton:a("wbNz").default},props:{columns:Array,data:Object,permsEdit:String,permsDelete:String,size:{type:String,default:"mini"},align:{type:String,default:"left"},maxHeight:{type:Number,default:420},showOperation:{type:Boolean,default:!0},border:{type:Boolean,default:!1},stripe:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0},showBatchDelete:{type:Boolean,default:!0}},data:function(){return{pageRequest:{pageNum:1,pageSize:10},loading:!1,selections:[]}},methods:{findPage:function(){var e=this;this.loading=!0;this.$emit("findPage",{pageRequest:this.pageRequest,callback:function(t){e.loading=!1}})},selectionChange:function(e){this.selections=e,this.$emit("selectionChange",{selections:e})},handleCurrentChange:function(e){this.$emit("handleCurrentChange",{val:e})},refreshPageRequest:function(e){this.pageRequest.pageNum=e,this.findPage()},handleEdit:function(e,t){this.$emit("handleEdit",{index:e,row:t})},handleDelete:function(e,t){this.delete(t.id)},handleBatchDelete:function(){var e=this.selections.map(function(e){return e.id}).toString();this.delete(e)},delete:function(e){var t=this;this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){for(var a=[],i=(e+"").split(","),r=0;r<i.length;r++)a.push({id:i[r]});t.loading=!0;t.$emit("handleDelete",{params:a,callback:function(e){200==e.code?(t.$message({message:"删除成功",type:"success"}),t.findPage()):t.$message({message:"操作失败, "+e.msg,type:"error"}),t.loading=!1}})}).catch(function(){})}},mounted:function(){this.refreshPageRequest(1)}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data.content,"highlight-current-row":e.highlightCurrentRow,"element-loading-text":e.$t("action.loading"),border:e.border,stripe:e.stripe,"show-overflow-tooltip":e.showOverflowTooltip,"max-height":e.maxHeight,size:e.size,align:e.align},on:{"selection-change":e.selectionChange,"current-change":e.handleCurrentChange}},[e.showBatchDelete&e.showOperation?a("el-table-column",{attrs:{type:"selection",width:"40"}}):e._e(),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{"header-align":"center",align:"center",prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth,fixed:e.fixed,type:e.type,formatter:e.formatter,sortable:null==e.sortable||e.sortable}})}),e._v(" "),e.showOperation?a("el-table-column",{attrs:{label:e.$t("action.operation"),width:"185",fixed:"right","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("kt-button",{attrs:{icon:"fa fa-edit",label:e.$t("action.edit"),perms:e.permsEdit,size:e.size},on:{click:function(a){e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("kt-button",{attrs:{icon:"fa fa-trash",label:e.$t("action.delete"),perms:e.permsDelete,size:e.size,type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}})]}}])}):e._e()],2),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{padding:"10px"}},[e.showBatchDelete&e.showOperation?a("kt-button",{staticStyle:{float:"left"},attrs:{label:e.$t("action.batchDelete"),perms:e.permsDelete,size:e.size,type:"danger",disabled:0===this.selections.length},on:{click:function(t){e.handleBatchDelete()}}}):e._e(),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, prev, pager, next, jumper","current-page":e.pageRequest.pageNum,"page-size":e.pageRequest.pageSize,total:e.data.totalSize},on:{"current-change":e.refreshPageRequest}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,r,!1,function(e){a("kDph")},"data-v-b46e2900",null);t.default=s.exports},"/MgU":function(e,t){},"/Rxi":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=(a("TE7m"),{name:"TIcBuBattery",components:{},data:function(){return{tableitemKey:1,tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick},operationAttrs:{width:"200px"},formatters:{state:function(e,t,a,i){switch(a){case 0:return"编辑中";case 1:return"审批中";case 2:return"完成";default:return a}}},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfoSum",sorter:[],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBattery/getSumInfo",method:"post",notCondition:!0},InitQuery:{}},tableitem:{hasOperation:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"OfficeSum",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"carId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBattery/getSumInfoItem",method:"post",notCondition:!1}}}},methods:{findByTableName:function(){this.tableitem.editAxios={hostUrl:this.global.lyBudgetUrl,method:"get",url:"/sysTableinfo/findByTableNameAccordVersionNum?tablename=OfficeSum&carId="+this.$refs.reftablamain.selected[0].carId},this.tableitemKey++},rowclick:function(e,t,a){var i=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.carId}),this.$nextTick(function(){i.findByTableName()})},findafter:function(e,t){var a=this;e.length<=0||(this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e[0].carId}),this.$nextTick(function(){a.findByTableName()}))}}}),l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",[t("xyj-table",this._b({ref:"reftablamain",attrs:{id:"1"},on:{update:this.findafter}},"xyj-table",this.tablemain,!1))],1),this._v(" "),t("div",[t("xyj-table",this._b({key:this.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",this.tableitem,!1))],1)])},staticRenderFns:[]};var n=a("VU/8")(s,l,!1,function(e){a("uHH6")},"data-v-3c2836d6",null);t.default=n.exports},"/o3i":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuPaintingInvestDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingInvestDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,isExpand:!1,dialogWidth:"1000px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuPaintingInvestDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingInvestDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingInvestDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingInvestDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingInvestDI/delete",method:"delete"},extraSelectData:{ordertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new4type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new5type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},othertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]}},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete,onDialogDefault:function(e){e.orderType="车型",e.new1Type="车型",e.new2Type="车型",e.new3Type="车型",e.new4Type="车型",e.new5Type="车型",e.skill1Type="车型",e.skill2Type="车型",e.skill3Type="车型",e.otherType="车型"}}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuPaintingInvestDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuPaintingInvestDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e[0].versionId}),this.update(),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}),s(e[0].versionId))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingInvestDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingInvestDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuPaintingInvestDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingInvestDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuPaintingInvestDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuPaintingInvestDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuPaintingInvestDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuPaintingInvestDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{disabled:e.isDisabled,type:"primary",label:e.$t("action.chooseVehicleType")},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("i5Xj")},"data-v-65cdbd23",null);t.default=f.exports},"07rk":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("xA5l"),o=a("/4e5"),c=a("wbNz"),d=a("EN35"),m=a("AUIh"),u={name:"companydictionary",components:{PopupTreeInput:n.a,KtTable:o.default,KtButton:c.default,TableColumnFilterDialog:d.default},data:function(){return{size:"small",filters:{name:""},columns:[],filterColumns:[],pageRequest:{pageNum:1,pageSize:10},pageResult:{},operation:!1,dialogVisible:!1,editLoading:!1,dataFormRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],no:[{required:!0,message:"请输入企业编号",trigger:"blur"}]},dataForm:{id:0,nane:"",no:""}}},methods:{findPage:function(e){var t=this;null!==e&&(this.pageRequest=e.pageRequest),this.pageRequest.columnFilters={name:{name:"name",value:this.filters.name}};var a=this.pageRequest;this.$api.common.xyjPost({url:"/partCompany/findPage",data:a}).then(function(e){t.pageResult=e.data}).then(null!=e?e.callback:"")},handleDelete:function(e){this.$api.common.xyjPost({url:"/partCompany/delete",data:e.params}).then(null!=e?e.callback:"")},handleAdd:function(){this.dialogVisible=!0,this.operation=!0,this.dataForm={id:0,name:"",no:""}},handleEdit:function(e){this.dialogVisible=!0,this.operation=!1,this.dataForm=l()({},e.row)},submitForm:function(){var e=this;this.$refs.dataForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var t=l()({},e.dataForm);e.$api.common.xyjPost({url:"/partCompany/save",data:t}).then(function(t){e.editLoading=!1,200==t.code?(e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1,e.$refs.dataForm.resetFields()):e.$message({message:"操作失败, "+t.message,type:"error"}),e.findPage(null)})})})},deptTreeCurrentChangeHandle:function(e,t){this.dataForm.deptId=e.id,this.dataForm.deptName=e.name},dateFormat:function(e,t,a,i){return Object(m.a)(e[t.property])},displayFilterColumnsDialog:function(){this.$refs.tableColumnFilterDialog.setDialogVisible(!0)},handleFilterColumns:function(e){this.filterColumns=e.filterColumns,this.$refs.tableColumnFilterDialog.setDialogVisible(!1)},initColumns:function(){this.columns=[{prop:"id",label:"ID",minWidth:50},{prop:"name",label:"企业名称",minWidth:120},{prop:"no",label:"企业编号",minWidth:120},{prop:"delFlag",label:"是否禁用",minWidth:120,formatter:function(e,t,a,i){return console.log(e),"-1"==a?"禁用":"正常"}}],this.filterColumns=JSON.parse(r()(this.columns))}},mounted:function(){this.initColumns()}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:role:view",type:"primary"},on:{click:function(t){e.findPage(null)}}})],1),e._v(" "),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:user:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{float:"right","padding-top":"10px","padding-right":"15px"}},[a("el-form",{attrs:{inline:!0,size:e.size}},[a("el-form-item",[a("el-button-group",[a("el-tooltip",{attrs:{content:"刷新",placement:"top"}},[a("el-button",{attrs:{icon:"fa fa-refresh"},on:{click:function(t){e.findPage(null)}}})],1),e._v(" "),a("el-tooltip",{attrs:{content:"列显示",placement:"top"}},[a("el-button",{attrs:{icon:"fa fa-filter"},on:{click:e.displayFilterColumnsDialog}})],1),e._v(" "),a("el-tooltip",{attrs:{content:"导出",placement:"top"}},[a("el-button",{attrs:{icon:"fa fa-file-excel-o"}})],1)],1)],1)],1),e._v(" "),a("table-column-filter-dialog",{ref:"tableColumnFilterDialog",attrs:{columns:e.filterColumns},on:{handleFilterColumns:e.handleFilterColumns}})],1),e._v(" "),a("kt-table",{attrs:{permsEdit:"sys:user:edit",permsDelete:"sys:user:delete",data:e.pageResult,columns:e.columns},on:{findPage:e.findPage,handleEdit:e.handleEdit,handleDelete:e.handleDelete}}),e._v(" "),a("el-dialog",{attrs:{title:e.operation?"新增":"编辑",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"80px",rules:e.dataFormRules,size:e.size,"label-position":"right"}},[e._e(),e._v(" "),a("el-form-item",{attrs:{label:"企业名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"企业编号",prop:"no"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.no,callback:function(t){e.$set(e.dataForm,"no",t)},expression:"dataForm.no"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.size},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{attrs:{size:e.size,type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v(e._s(e.$t("action.submit")))])],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("wiSV")},"data-v-426e667e",null);t.default=f.exports},"0D0i":function(e,t){},"0g07":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vmr0"),c=a("TE7m"),d=a("ZqJ4"),m={name:"TIcBuResinPic",components:{ChooseCarType:n.a,EditPicTable:o.a},data:function(){var e=this;return{qmodify:d.a.QMODIFY,approvaling:d.a.APPROVALING,reject:d.a.REJECT,complete:d.a.COMPLETE,ticketcancel:d.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,editdisabled:!1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinPic/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:d.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinPic/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!1,hasView:!1,hasEdit:!1,isExpand:!1,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{"expand-change":function(t,a){a.length?(e.$refs.reftableitem.expands=[],t&&e.$refs.reftableitem.expands.push(t.id)):e.$refs.reftableitem.expands=[]},"cell-click":function(t,a,i,r){e.$refs.reftableitem.$refs.table.toggleRowExpansion(t)},select:function(t,a){0==e.editdisabled&&(t.length>1?e.editdisabled=!0:e.editdisabled=!1)},"select-all":function(t){0==e.editdisabled&&(e.editdisabled=0!=t)}},extraSelectData:{class1:function(){return[{label:"劳务费",value:"劳务费"},{label:"JLAT",value:"JLAT"},{label:"海外出差",value:"海外出差"},{label:"国内出差",value:"国内出差"}]}},operationAttrs:{width:"100px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuResinPic",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinPic/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinPic/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinPic/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinPic/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,extraCheng:{class1:this.showClass2}}}},methods:{showClass2:function(e,t){this.$refs.reftableitem.$refs.dialogForm.value.class2="";"劳务费"==t?this.$refs.reftableitem.$refs.dialogForm.setOptions("class2",[{label:"直劳",value:"直劳"},{label:"准直",value:"准直"},{label:"间接",value:"间接"}]):"JLAT"!=t&&"海外出差"!=t&&"国内出差"!=t||this.$refs.reftableitem.$refs.dialogForm.setOptions("class2",[{label:"人月",value:"人月"},{label:"渡航回数",value:"渡航回数"}])},reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId,e.picId=t.picId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId,e.picId=this.$refs.reftableitem.data[0].picId},findByTableName:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,method:"get",url:"/sysTableinfo/findByTableNameByCarYears?tablename=tIcBuResinPic&versionId="+this.$refs.reftablamain.selected[0].versionId}),this.tableitemKey++},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.findByTableName(),d.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.editdisabled=e,i.tableitem.disabledNew=e})})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),d.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.editdisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},findafter2:function(e,t){e.length<=0||this.$refs.reftableitem.$refs.table.setCurrentRow(e[0])},add:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.getTableColumns;this.$refs.editpicshow.show("add",t,e,{},"/tIcBuResinPic/save")},edit:function(){var e=this.$refs.reftableitem.selected[0];if(""!=e&&void 0!=e){var t=e,a=this.$refs.reftablamain.selected[0].versionId,i=this.$refs.reftableitem.getTableColumns;this.$refs.editpicshow.show("edit",i,a,t,"/tIcBuResinPic/save")}else this.$message({type:"info",message:"请选择要编辑的数据！"})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinPic/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].picId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinPic/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinPic/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},submission:function(){var e=this;d.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].picId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"picId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"},on:{update:e.findafter2}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx,.xls","show-file-list":!1}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.add"),disabled:e.isDisabled},on:{click:e.add}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.editdisabled},on:{click:e.edit}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("edit-pic-table",{ref:"editpicshow",on:{update:e.findByTableName}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var p=a("VU/8")(m,u,!1,function(e){a("Cxac")},"data-v-781a1677",null);t.default=p.exports},"0uU0":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("BfUi"),r=a("lbHh"),s=a.n(r),l={name:"versionManagement",data:function(){return{loading:!0,dialogFormVisible:!1,form:{version:"",id:"",downloadpath:"",apknamme:""},downloadpath:"",url:"",header:{},path:"",tableData:{},fileList:[]}},mounted:function(){this.getVersion(),this.getHeaders()},beforeDestroy:function(){this.path!==this.downloadpath&&(console.log("销毁前删除"),this.deleteApp(this.downloadpath))},methods:{closeDialog:function(){},getHeaders:function(){var e=s.a.get("token");this.header={token:e},this.url=i.default.uploadImgUrl},newYz:function(){this.dialogFormVisible=!0},changeVersion:function(){var e=this,t=this;if(!t.form.downloadpath)return this.$message.error("请上传APP文件");t.form.downloadpath=t.downloadpath,t.dialogFormVisible=!1,t.$api.common.xyjPost({url:"/appVersion/save",data:t.form}).then(function(a){console.log(a),e.downloadpath="",t.deleteApp(t.path),t.getVersion(),e.$message({message:"更改版本成功",type:"success"})})},deleteApp:function(e){console.log("删除多余文件"),this.$api.LM.instance.post(i.default.uploadImgUrl+"/FileUploadController/deleteFile?url="+e,{}).then(function(e){console.log(e)})},success:function(e,t,a){this.downloadpath=e,console.log("Form",this.form),console.log("tableData",this.tableData)},submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},getVersion:function(){var e=this;this.$api.common.xyjPost({url:"/appVersion/query",data:{}}).then(function(t){e.loading=!1,console.log(t),e.tableData=t.data,e.form=t.data.content[0],e.path=t.data.content[0].downloadpath})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticStyle:{"text-align":"left","margin-bottom":"10px"}},[a("el-button",{staticClass:"newMachine",attrs:{type:"primary",size:"mini"},on:{click:e.newYz}},[e._v(e._s(e.$t("action.versionSettings"))+"\n    ")])],1),e._v(" "),a("el-dialog",{attrs:{title:"版本设置",width:"70%",visible:e.dialogFormVisible},on:{close:e.closeDialog,"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"rulerform",attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"app名称",prop:"version"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.apknamme,callback:function(t){e.$set(e.form,"apknamme",t)},expression:"form.apknamme"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"app版本号",prop:"version"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.version,callback:function(t){e.$set(e.form,"version",t)},expression:"form.version"}})],1)],1),e._v(" "),a("el-row",{staticClass:"update-state"},[a("el-row",[a("span",[e._v("当前APP下载路径:")])]),e._v(" "),a("el-row",{staticClass:"update-url"},[a("span",[e._v(e._s(e.path))])])],1),e._v(" "),a("el-row",{staticStyle:{"text-align":"left","padding-top":"10px"}},[a("span",[e._v("上传文件")])]),e._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.url+"/FileUploadController/uploadFile",headers:e.header,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,limit:1,"on-success":e.success,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("一次只能上传一个文件")])],1),e._v(" "),a("el-row",{staticClass:"update-state"},[a("el-row",{staticClass:"state"},[a("span",[e._v("当前上传状态：")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.path==e.downloadpath||!e.downloadpath,expression:"path==downloadpath||!downloadpath"}],staticClass:"left"},[e._v("未上传")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.path!==e.downloadpath&&e.downloadpath,expression:"path!==downloadpath&&downloadpath"}],staticClass:"right"},[e._v("已上传")])]),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.path!==e.downloadpath&&e.downloadpath,expression:"path!==downloadpath&&downloadpath"}],staticClass:"update-url"},[a("span",[e._v(e._s(e.downloadpath))])])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.changeVersion}},[e._v("确 定")])],1)],1),e._v(" "),a("div",{staticClass:"header"},[e._m(0),e._v(" "),a("div",{staticClass:"header-right"},[a("el-button",{staticClass:"fa fa-refresh",attrs:{size:"mini",type:"primary"},on:{click:e.getVersion}},[e._v("\n        "+e._s(e.$t("action.refresh"))+"\n      ")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData.content,border:"",size:"mini"}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"编号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"version",align:"center",label:"app版本号","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"downloadpath",align:"center",label:"app下载路径","min-width":"180"}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header-left"},[t("span",{staticClass:"el-icon-tickets"}),this._v(" "),t("span",{staticClass:"sx"}),this._v(" "),t("span",[this._v("APP版本信息")])])}]};var o=a("VU/8")(l,n,!1,function(e){a("r+U1")},"data-v-71e95a46",null);t.default=o.exports},"13PT":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s={name:"TypicalMain",data:function(){return{tablemain:{hasOperation:!0,tableAttrs:{height:"200px",width:"800px"},tableOns:{},operationAttrs:{width:"200px"},formatters:{state:function(e,t,a){switch(a){case 0:return"编辑中";case 1:return"审批中";case 2:return"完成";default:return a}}},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"EQUAL",value0:0,andor0:"AND"}}}}},methods:{rowclick:function(e,t,a){var i=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList()})},findafter:function(e,t){var a=this;e.length<=0||(this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e[0].versionId}),this.$nextTick(function(){a.$refs.reftableitem.getList()}))}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v(e._s(e.$t("action.dataExport")))]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v(e._s(e.$t("action.derivedBenchmark")))]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v(e._s(e.$t("action.benchmarkingCar")))])],1)],2)],1)])},staticRenderFns:[]};var n=a("VU/8")(s,l,!1,function(e){a("PpAd")},"data-v-4b6ad55a",null);t.default=n.exports},"17+9":function(e,t){},"1D4K":function(e,t){},"1KBz":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("xyj-table",this._b({ref:"otable",attrs:{id:"1"}},"xyj-table",this.tableConfig,!1))],1)},staticRenderFns:[]};var r=a("VU/8")({name:"Forecast",mounted:function(){this.$refs.otable.hasPagination=!1},data:function(){return{tableConfig:{hasDelete:!1,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcBuForecast",sorter:[{direction:"ASC",property:"id"}],bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcBuForecast/query",method:"post",notCondition:!0},bNewUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcBuForecast/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcBuForecast/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyBaseUrl,url:"/tIcBuForecast/delete",method:"delete"},onManualEdit:function(e,t){e&&(e.id=t.id)}}}}},i,!1,function(e){a("QW/i")},"data-v-68006bbf",null);t.default=r.exports},"1Q7v":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("AUIh"),r={name:"MemberList",data:function(){return{loading:!0,tableData:{},pageRequest:{page:1,pageSize:10,showTotal:!0},form:{phone:"",nickname:"",regTime:""},postData:{id:"",state:""},rowList:[{pay:"余额"}],rowList2:{},dialogTableVisible2:!1,dialogTableVisible3:!1,query:[],columns:[{prop:"status",label:"状态",width:"100",align:"center",formatter:function(e,t,a,i){return 0==a?"冻结":1==a?"正常":void 0}},{prop:"phone",label:"手机号码",width:"140",align:"center"},{prop:"nickname",label:"昵称",width:"140",align:"center"},{prop:"sex",label:"性别",width:"100",align:"center"},{prop:"regTime",label:"注册日期",width:"180",align:"center",formatter:function(e,t,a,r){return Object(i.a)(e[t.property])}}],columns3:[{prop:"lastPayCpno",label:"最近支付车牌",width:"180",align:"center",formatter:function(e,t,a,i){return null==a?"无":a}},{prop:"lastPayGas",label:"最近支付加油站",width:"180",align:"center",formatter:function(e,t,a,i){return null==a?"无":a}},{prop:"lastPayTime",label:"最近支付日期",width:"180",align:"center",formatter:function(e,t,a,i){return null==a?"无":a}}]}},mounted:function(){this.findPage()},methods:{formatter:function(e,t,a,r){return Object(i.a)(e[t.property])},open:function(e){var t=this;this.$confirm(1==e.status?"是否确认冻结该账户?":"是否确认解冻该账户","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.postData.id=e.id,t.postData.state=1==e.status?0:1,t.stopEnabled()}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},refreshPageRequest:function(e){this.pageRequest.page=e,this.findPage()},refreshPageSizeRequest:function(e){this.pageRequest.pageSize=e,this.findPage()},changeRowList:function(e){this.rowList[0].date=e.regTime},changeRowList2:function(e){var t=this;this.$api.common.xyjPost({url:"/appUserCp/query",data:{pageBean:{page:1,pageSize:10,showTotal:!0},querys:[{hasInitValue:!1,operation:"EQUAL",property:"user_id",relation:"AND",value:e.id}]}}).then(function(e){t.rowList2=e.data})},stopEnabled:function(){var e=this,t=this;t.$api.common.xyjPost({url:"/appUser/stopEnabled?id="+t.postData.id+"&state="+t.postData.state}).then(function(a){t.findPage(),0==a.data?e.$message({type:"success",message:"冻结成功!"}):1==a.data&&e.$message({type:"success",message:"解冻成功!"})})},searchquery:function(){var e=[];this.form.phone&&e.push({hasInitValue:!1,operation:"EQUAL",property:"phone",relation:"AND",value:this.form.phone}),this.form.nickname&&e.push({hasInitValue:!1,operation:"EQUAL",property:"nickname",relation:"AND",value:this.form.nickname}),this.form.regTime&&e.push({hasInitValue:!1,operation:"BETWEEN",property:"regTime",relation:"AND",value:this.form.regTime}),this.query=e,this.findPage()},findPage:function(){var e=this;e.$api.common.xyjPost({url:"/appUser/query",data:{pageBean:e.pageRequest,querys:e.query,sorter:[]}}).then(function(t){e.loading=!1,e.tableData=t.data})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",[a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-search"}),a("span",{staticClass:"sx"},[e._v("筛选查询")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-row"),e._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"mini"},on:{click:e.searchquery}},[e._v("查询")])],1)])]),e._v(" "),a("el-main",[a("el-form",{staticClass:"demo-ruleForm",attrs:{size:"small","label-width":"120px"}},[a("el-form-item",{attrs:{label:"手机账号"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入手机账号"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"会员昵称"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入会员姓名"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"购买日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.regTime,callback:function(t){e.$set(e.form,"regTime",t)},expression:"form.regTime"}})],1)],1),e._v(" "),a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-tickets"}),a("span",{staticClass:"sx"},[e._v("会员列表")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-button",{staticClass:"fa fa-refresh",attrs:{size:"mini",type:"primary"},on:{click:e.findPage}},[e._v("\n            刷新\n          ")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.tableData.rows,size:"mini","show-overflow-tooltip":"false",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){e.open(t.row)}}},[e._v("冻结")]):e._e(),e._v(" "),0==t.row.status?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.open(t.row)}}},[e._v("解冻")]):e._e()]}}])}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{sortable:"",prop:e.prop,label:e.label,formatter:e.formatter,"min-width":e.width,align:e.align}})}),e._v(" "),a("el-table-column",{attrs:{label:"支付顺序",align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.dialogTableVisible2=!0,e.changeRowList(t.row)}}},[e._v("查看")]),e._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"支付顺序",visible:e.dialogTableVisible2},on:{"update:visible":function(t){e.dialogTableVisible2=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.rowList,size:"mini","show-overflow-tooltip":"false",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pay",label:"支付方式","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",formatter:e.formatter,label:"修改日期","min-width":"100",align:"center"}})],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"绑定车辆",align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.dialogTableVisible3=!0,e.changeRowList2(t.row)}}},[e._v("查看")]),e._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"绑定车辆",visible:e.dialogTableVisible3},on:{"update:visible":function(t){e.dialogTableVisible3=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.rowList2.rows,size:"mini","show-overflow-tooltip":"false",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cpno",label:"绑定车辆","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"绑定日期","min-width":"100",align:"center"}})],1)],1)]}}])}),e._v(" "),e._l(e.columns3,function(e){return a("el-table-column",{key:e.prop,attrs:{sortable:"",prop:e.prop,label:e.label,formatter:e.formatter,"min-width":e.width,align:e.align}})})],2),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageRequest.page,"page-sizes":[10,20,30,40,50],"page-size":e.pageRequest.pageSize,layout:"sizes, total, prev, pager, next",total:e.tableData.total},on:{"current-change":e.refreshPageRequest,"size-change":e.refreshPageSizeRequest}})],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(r,s,!1,function(e){a("E/Y2")},"data-v-0ce605f2",null);t.default=l.exports},"1Qib":function(e,t){},"1S5d":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),r=a.n(i),s=(a("lbHh"),{name:"txmessage",data:function(){return{labelPosition:"left",ownerId:"",wrapForm:{id:"",name:"",email:"",mobile:"",createTime:"",realname:""},wraprules:{},dialogVisible:!1,editLoading:!1,passformRules:{password:[{required:!0,message:"请输入原始密码",trigger:"blur"}],newPWD:[{required:!0,message:"请输入新密码",trigger:"blur"}],confirmpassword:[{required:!0,message:"请再次确认密码",trigger:"blur"}]},passform:{name:"",password:"",newPWD:"",confirmpassword:""}}},mounted:function(){var e=this,t=sessionStorage.getItem("user");this.$api.common.xyjGet({url:"/user/findByName",data:{name:t}}).then(function(t){if(200!=t.code)e.$message({message:"操作失败, "+t.message,type:"error"});else{for(var a in e.wrapForm)e.wrapForm[a]=t.data[a];e.passform.name=t.data.name}})},methods:{resetForm:function(e){this.$refs[e].resetFields()},save:function(){var e=this,t=this.wrapForm;this.$refs.wrapForm1.validate(function(a){a&&e.$api.common.xyjPost({url:"/user/save",data:t}).then(function(t){t?(e.$message({message:"操作成功",type:"success",duration:800}),e.searchData={}):e.$message({message:"操作失败, "+t.shortMessage,type:"error",duration:800})})})},submitForm:function(){var e=this;this.$refs.passform.validate(function(t){t&&e.$confirm("确认修改吗？","提示",{}).then(function(){if(e.editLoading=!0,e.passform.newPWD!==e.passform.confirmpassword)return e.$message({message:"第二次输入的密码与第一次输入的不一致！",type:"warning"}),void(e.editLoading=!1);var t=JSON.parse(r()(e.passform));delete t.confirmpassword,e.$api.common.xyjGet({url:"/user/updatePwd",data:t}).then(function(t){if(e.editLoading=!1,200==t.code){if("密码校验失败"==t.msg||"旧密码与新密码相同，无需修改"==t.msg||"账号不存在"==t.msg)return void e.$message({message:"操作失败, "+t.msg,type:"error"});e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1,e.$refs.passform.resetFields()}else e.$message({message:"操作失败, "+t.msg,type:"error"})})})})}}}),l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"content"},[a("el-form",{ref:"wrapForm1",staticClass:"txmessage-form",attrs:{model:e.wrapForm,rules:e.wraprules,"label-position":e.labelPosition,size:"small"}},[a("el-form-item",{attrs:{prop:"name",label:"用户名"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.wrapForm.name,callback:function(t){e.$set(e.wrapForm,"name",t)},expression:"wrapForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"email",label:"邮箱"}},[a("el-input",{model:{value:e.wrapForm.email,callback:function(t){e.$set(e.wrapForm,"email",t)},expression:"wrapForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"mobile",label:"手机号"}},[a("el-input",{model:{value:e.wrapForm.mobile,callback:function(t){e.$set(e.wrapForm,"mobile",t)},expression:"wrapForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"realname",label:"真实姓名"}},[a("el-input",{model:{value:e.wrapForm.realname,callback:function(t){e.$set(e.wrapForm,"realname",t)},expression:"wrapForm.realname"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"createTime",label:"创建时间"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.wrapForm.createTime,callback:function(t){e.$set(e.wrapForm,"createTime",t)},expression:"wrapForm.createTime"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("action.submit")))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(e._s(e.$t("action.changePassword")))])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改密码",width:"30%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"passform",attrs:{model:e.passform,"label-width":"100px",rules:e.passformRules,size:"mini","label-position":"right"}},[e._e(),e._v(" "),a("el-form-item",{attrs:{label:"原始密码",prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.passform.password,callback:function(t){e.$set(e.passform,"password",t)},expression:"passform.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码",prop:"newPWD"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.passform.newPWD,callback:function(t){e.$set(e.passform,"newPWD",t)},expression:"passform.newPWD"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认新密码",prop:"confirmpassword"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.passform.confirmpassword,callback:function(t){e.$set(e.passform,"confirmpassword",t)},expression:"passform.confirmpassword"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v(e._s(e.$t("action.submit")))])],1)],1)],1)])},staticRenderFns:[]};var n=a("VU/8")(s,l,!1,function(e){a("Jqo2")},"data-v-7a6f1a3f",null);t.default=n.exports},"1XDo":function(e,t){},2763:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuResinMaterialDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinMaterialDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,isExpand:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{"expand-change":function(t,a){a.length?(e.$refs.reftableitem.expands=[],t&&e.$refs.reftableitem.expands.push(t.id)):e.$refs.reftableitem.expands=[]},"cell-click":function(t,a,i,r){e.$refs.reftableitem.$refs.table.toggleRowExpansion(t)}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuResinMaterialDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinMaterialDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinMaterialDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinMaterialDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinMaterialDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuResinMaterialDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuResinMaterialDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinMaterialDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].materiaId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinMaterialDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuResinMaterialDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinMaterialDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuResinMaterialDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuResinMaterialDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuResinMaterialDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuResinMaterialDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",disabled:e.isDisabled,label:e.$t("action.chooseVehicleType")},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("FVdd")},"data-v-27a5a552",null);t.default=f.exports},"2HFU":function(e,t){},"2IVI":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuPaintingPicDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingPicDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,isExpand:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuPaintingPicDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingPicDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingPicDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingPicDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingPicDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuPaintingPicDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuPaintingPicDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingPicDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].picId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingPicDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuPaintingPicDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingPicDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuPaintingPicDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuPaintingPicDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuPaintingPicDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuPaintingPicDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",disabled:e.isDisabled,label:e.$t("action.chooseVehicleType")},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("rO/h")},"data-v-9911fd94",null);t.default=f.exports},"2lH2":function(e,t){},"2ytj":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuAssembleLabourlDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleLabourlDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuAssembleLabourlDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleLabourlDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleLabourlDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleLabourlDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleLabourlDI/delete",method:"delete"},extraSelectData:{threadtype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},incidentaltype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},electrictype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},logisticstype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},pugtype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},ordertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},othertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]}},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuAssembleLabourlDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuAssembleLabourlDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssembleLabourlDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].labourlId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleLabourlDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuAssembleLabourlDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssembleLabourlDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuAssembleLabourlDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuAssembleLabourlDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuAssembleLabourlDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].labourlId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"labourlId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuAssembleLabourlDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("VjWM")},"data-v-18e3074c",null);t.default=f.exports},"30oC":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"WeldingInvest",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingInvest/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuWeldingInvest",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingInvest/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingInvest/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingInvest/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingInvest/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})}),this.getinfo(e.versionId)},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),this.getinfo(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingInvest/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingInvest/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingInvest/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getMaterialsInfo?versionId="+e}).then(function(e){t.info=[{name:"新车汇率"},{name:"基点车汇率"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].investId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"investId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("GFB+")},"data-v-ace6dd38",null);t.default=f.exports},"3EcB":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuAssemblePicZDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssemblePicZDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuAssemblePicZDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssemblePicZDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssemblePicZDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssemblePicZDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssemblePicZDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuAssemblePicZDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuAssemblePicZDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssemblePicZDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].picId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssemblePicZDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuAssemblePicZDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssemblePicZDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuAssemblePicZDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuAssemblePicZDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuAssemblePicZDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].picId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"picId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuAssemblePicZDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("9VfZ")},"data-v-801e5908",null);t.default=f.exports},"3wOp":function(e,t,a){"use strict";var i={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};t.a=i},"44j5":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=(a("TE7m"),{name:"TIcBuResin",components:{},data:function(){return{tableitemKey:1,tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick},operationAttrs:{width:"200px"},formatters:{state:function(e,t,a,i){switch(a){case 0:return"编辑中";case 1:return"审批中";case 2:return"完成";default:return a}}},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfoSum",sorter:[],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResin/getSumInfo",method:"post",notCondition:!0},InitQuery:{}},tableitem:{hasOperation:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"OfficeSum",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"carId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResin/getSumInfoItem",method:"post",notCondition:!1}}}},methods:{findByTableName:function(){this.tableitem.editAxios={hostUrl:this.global.lyBudgetUrl,method:"get",url:"/sysTableinfo/findByTableNameAccordVersionNum?tablename=OfficeSum&carId="+this.$refs.reftablamain.selected[0].carId},this.tableitemKey++},rowclick:function(e,t,a){var i=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.carId}),this.$nextTick(function(){i.findByTableName()})},findafter:function(e,t){var a=this;e.length<=0||(this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e[0].carId}),this.$nextTick(function(){a.findByTableName()}))}}}),l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",[t("xyj-table",this._b({ref:"reftablamain",attrs:{id:"1"},on:{update:this.findafter}},"xyj-table",this.tablemain,!1))],1),this._v(" "),t("div",[t("xyj-table",this._b({key:this.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",this.tableitem,!1))],1)])},staticRenderFns:[]};var n=a("VU/8")(s,l,!1,function(e){a("axT7")},"data-v-eb735146",null);t.default=n.exports},"4IhR":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("oXfx"),l=a("TE7m"),n={name:"StampingMaterial",components:{ChooseCarType:s.a},data:function(){return{progress:{tableFlag:!1,UploadPercent:0},fileList:[],tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick},operationAttrs:{width:"200px"},formatters:{state:function(e,t,a){switch(a){case 0:return"编辑中";case 1:return"审批中";case 2:return"完成";default:return a}}},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"EQUAL",value0:0,andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyGatherUrl,tableName:"TIcBuCarMaterial",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyGatherUrl,url:"/tIcBuCarMaterial/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onManualDelete:function(e){}},tableitem1:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyGatherUrl,tableName:"TIcBuStampingMaterial",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyGatherUrl,url:"/tIcBuCarMaterial/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onManualDelete:function(e){}},tableitem2:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyGatherUrl,tableName:"TIcBuStampingMaterial",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyGatherUrl,url:"/tIcBuCarMaterial/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onManualDelete:function(e){}},tableitem3:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyGatherUrl,tableName:"TIcBuStampingMaterial",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyGatherUrl,url:"/tIcBuCarMaterial/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onManualDelete:function(e){}},tableitem4:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyGatherUrl,tableName:"TIcBuStampingMaterial",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyGatherUrl,url:"/tIcBuCarMaterial/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onManualDelete:function(e){}},tableitem5:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyGatherUrl,tableName:"TIcBuStampingMaterial",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyGatherUrl,url:"/tIcBuCarMaterial/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onManualDelete:function(e){}},tableitem6:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyGatherUrl,tableName:"TIcBuStampingMaterial",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyGatherUrl,url:"/tIcBuCarMaterial/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onManualDelete:function(e){}},tableitem7:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyGatherUrl,tableName:"TIcBuStampingMaterial",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyGatherUrl,url:"/tIcBuCarMaterial/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onManualDelete:function(e){}},tableitem8:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyGatherUrl,tableName:"TIcBuStampingMaterial",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyGatherUrl,url:"/tIcBuCarMaterial/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onManualDelete:function(e){}},tableitem9:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyGatherUrl,tableName:"TIcBuStampingMaterial",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyGatherUrl,url:"/tIcBuCarMaterial/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onManualDelete:function(e){}},tableitem10:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyGatherUrl,tableName:"TIcBuStampingMaterial",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyGatherUrl,url:"/tIcBuCarMaterial/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onManualDelete:function(e){}},tableitem11:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyGatherUrl,tableName:"TIcBuStampingMaterial",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCarMaterial/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyGatherUrl,url:"/tIcBuCarMaterial/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onManualDelete:function(e){}}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList()})},findafter:function(e,t){var a=this;e.length<=0||(this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e[0].versionId}),this.$nextTick(function(){a.$refs.reftableitem.getList()}))},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(l.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingMaterial/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].materialId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=e.filename,a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,e.filename)}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(l.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingMaterial/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.$nextTick(function(){a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3)}))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){console.warn(e.message)})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1))],1),e._v(" "),a("div",[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"直材"}},[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{position:"relative",padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.downLoadBaseData}},[e._v(e._s(e.$t("export")))]),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,"show-file-list":!1}},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"}},[e._v(e._s(e.$t("Import")))]),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:function(e){}}},[e._v(e._s(e.$t("action.submit")))])],1)],2)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"直劳"}},[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem1,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{position:"relative",padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:e.downLoadBaseData}},[e._v(e._s(e.$t("export")))]),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,"show-file-list":!1}},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"}},[e._v(e._s(e.$t("Import")))]),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:function(e){}}},[e._v(e._s(e.$t("action.submit")))])],1)],2)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"投资"}},[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem2,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{position:"relative",padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:e.downLoadBaseData}},[e._v(e._s(e.$t("export")))]),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,"show-file-list":!1}},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"}},[e._v(e._s(e.$t("Import")))]),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:function(e){}}},[e._v(e._s(e.$t("action.submit")))])],1)],2)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"PIC"}},[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem3,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{position:"relative",padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:e.downLoadBaseData}},[e._v(e._s(e.$t("export")))]),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,"show-file-list":!1}},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"}},[e._v(e._s(e.$t("Import")))]),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:function(e){}}},[e._v(e._s(e.$t("action.submit")))])],1)],2)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"中间过程输出"}},[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem4,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{position:"relative",padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:e.downLoadBaseData}},[e._v(e._s(e.$t("export")))]),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,"show-file-list":!1}},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"}},[e._v(e._s(e.$t("Import")))]),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:function(e){}}},[e._v(e._s(e.$t("action.submit")))])],1)],2)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"全体"}},[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem5,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{position:"relative",padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:e.downLoadBaseData}},[e._v(e._s(e.$t("export")))]),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,"show-file-list":!1}},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"}},[e._v(e._s(e.$t("Import")))]),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:function(e){}}},[e._v(e._s(e.$t("action.submit")))])],1)],2)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"直材推移图"}},[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem6,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{position:"relative",padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:e.downLoadBaseData}},[e._v(e._s(e.$t("export")))]),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,"show-file-list":!1}},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"}},[e._v(e._s(e.$t("Import")))]),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:function(e){}}},[e._v(e._s(e.$t("action.submit")))])],1)],2)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"直劳推移图"}},[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem7,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{position:"relative",padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:e.downLoadBaseData}},[e._v(e._s(e.$t("export")))]),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,"show-file-list":!1}},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"}},[e._v(e._s(e.$t("Import")))]),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:function(e){}}},[e._v(e._s(e.$t("action.submit")))])],1)],2)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"投资推移图"}},[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem8,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{position:"relative",padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:e.downLoadBaseData}},[e._v(e._s(e.$t("export")))]),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,"show-file-list":!1}},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"}},[e._v(e._s(e.$t("Import")))]),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:function(e){}}},[e._v(e._s(e.$t("action.submit")))])],1)],2)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"投资（0基点）"}},[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem9,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{position:"relative",padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:e.downLoadBaseData}},[e._v(e._s(e.$t("export")))]),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,"show-file-list":!1}},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"}},[e._v(e._s(e.$t("Import")))]),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:function(e){}}},[e._v(e._s(e.$t("action.submit")))])],1)],2)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"PIC推移图"}},[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem10,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{position:"relative",padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:e.downLoadBaseData}},[e._v(e._s(e.$t("export")))]),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,"show-file-list":!1}},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"}},[e._v(e._s(e.$t("Import")))]),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:function(e){}}},[e._v(e._s(e.$t("action.submit")))])],1)],2)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"PIC（0基点）"}},[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem11,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{position:"relative",padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:e.downLoadBaseData}},[e._v(e._s(e.$t("export")))]),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,"show-file-list":!1}},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"}},[e._v(e._s(e.$t("Import")))]),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"small"},on:{click:function(e){}}},[e._v(e._s(e.$t("action.submit")))])],1)],2)],1)],1)],1)])},staticRenderFns:[]};var c=a("VU/8")(n,o,!1,function(e){a("L+EF")},"data-v-73835ea8",null);t.default=c.exports},"4wnU":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuBatteryPicDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryPicDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuBatteryPicDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryPicDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryPicDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryPicDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryPicDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuBatteryPicDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuBatteryPicDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryPicDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].picId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryPicDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuBatteryPicDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryPicDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuBatteryPicDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuBatteryPicDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuBatteryPicDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].picId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"picId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuBatteryPicDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("YixA")},"data-v-e01bda74",null);t.default=f.exports},"50BH":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"StampingPicFunds",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:"",progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingPicFunds/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuStampingPicFunds",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingPicFunds/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingPicFunds/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingPicFunds/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingPicFunds/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),i.getinfo(e.versionId),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})})},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList(),i.getinfo(e)})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingPicFunds/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].fundsId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingPicFunds/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingPicFunds/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getInvestInfo?versionId="+e}).then(function(e){t.info=[{name:"直劳单价"},{name:"DSTR"},{name:"基点车直劳单价"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].fundsId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"fundsId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("6Cmg")},"data-v-200ca6b9",null);t.default=f.exports},"50Q/":function(e,t){},"50gk":function(e,t){},"51+Y":function(e,t){},"5OEe":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("AUIh"),r={name:"PayRecordController",data:function(){return{pageRequest:{page:1,pageSize:10,showTotal:!0},tableData:[],loading:!0,columns:[{label:"订单号",prop:"prepayid",minWidth:"160"},{label:"业务类型",prop:"ywtype",minWidth:"120"},{label:"订单是否处理",prop:"isdispose",minWidth:"120",formatter:function(e,t,a,i){return 0==a?"否":1==a?"是":void 0}},{label:"是否付款成功",prop:"codestate",minWidth:"120",formatter:function(e,t,a,i){return 0==a?"否":1==a?"是":void 0}},{label:"购买时间",prop:"czdate",minWidth:"160",formatter:function(e,t,a,r){return Object(i.a)(e[t.property])}},{label:"购买金额（单位：分）",prop:"czprice",minWidth:"180"},{label:"实际付款时间",prop:"fkdate",minWidth:"160",formatter:function(e,t,a,r){return Object(i.a)(e[t.property])}},{label:"最近一次退款日期",prop:"lasttkdate",minWidth:"160",formatter:function(e,t,a,r){return""==a||null==a?"无":Object(i.a)(e[t.property])}},{label:"支付方式",prop:"payment",minWidth:"140",formatter:function(e,t,a,i){return 0==a?"支付宝APP支付":1==a?"微信APP支付":2==a?"支付宝H5支付":3==a?"微信H5支付":void 0}},{label:"第三方支付交易号",prop:"thirdcode",minWidth:"240"},{label:"累计退款金额（单位：分）",prop:"tkmoney",minWidth:"190"},{label:"备注",prop:"memo",minWidth:"140"}]}},mounted:function(){this.getList()},methods:{handleSizeChange:function(e){this.pageRequest.pageSize=e,this.getList()},handleCurrentChange:function(e){this.pageRequest.page=e,this.getList()},getList:function(){var e=this;e.$api.common.xyjPostPay({url:"/sysPayRecord/query",data:{pageBean:e.pageRequest,params:{},sorter:[]}}).then(function(t){200==t.code&&(e.loading=!1,e.tableData=t.data)})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"header"},[e._m(0),e._v(" "),a("div",{staticClass:"header-right"},[a("el-button",{staticClass:"fa fa-refresh",attrs:{size:"mini",type:"primary"},on:{click:e.getList}},[e._v("\n        "+e._s(e.$t("action.refresh"))+"\n      ")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,border:"",size:"mini","max-height":"550","element-loading-text":"加载中"}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号","min-width":"60"}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.label,attrs:{sortable:"",align:"center",prop:e.prop,formatter:e.formatter,label:e.label,"min-width":e.minWidth}})})],2),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageRequest.page,"page-sizes":[10,20,30,40,50],"page-size":e.pageRequest.pageSize,layout:"total, sizes, prev, pager, next",total:e.tableData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header-left"},[t("span",{staticClass:"el-icon-tickets"}),this._v(" "),t("span",{staticClass:"sx"}),this._v(" "),t("span",[this._v("支付信息表")])])}]};var l=a("VU/8")(r,s,!1,function(e){a("51+Y")},"data-v-f15dffa0",null);t.default=l.exports},"5zde":function(e,t,a){a("zQR9"),a("qyJz"),e.exports=a("FeBl").Array.from},"6Cmg":function(e,t){},"6GiL":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{url:"http://192.168.3.111:8080/activityApi/modeler.html?modelId=1"}},mounted:function(){this.$nextTick(function(){document.getElementById("mobsf").style.height=.55*document.getElementById("mobsf").scrollWidth+"px",console.dir(document.getElementById("mobsf").contentWindow.document.document.getElementById("paletteHelpWrapper"))})}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("iframe",{ref:"test",attrs:{src:"http://192.168.3.111:8080/activityApi/modeler.html?modelId=1",id:"mobsf",width:"100%",scrolling:"no",frameborder:"0"}})])},staticRenderFns:[]};var s=a("VU/8")(i,r,!1,function(e){a("F8jz")},null,null);t.default=s.exports},"6HeU":function(e,t){},"6eCB":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"TIcBuResinInvestDI",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryMaterial/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},extraAttribute:{marketDate:{type:"month",valueFormat:"yyyy年MM月",format:"yyyy年MM月"}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuBatteryMaterial",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryMaterial/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryMaterial/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryMaterial/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryMaterial/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})}),this.getinfo(e.versionId)},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),this.getinfo(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryMaterial/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].materiaId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryMaterial/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryMaterial/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getMaterialsInfo?versionId="+e}).then(function(e){t.info=[{name:"材料市况"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materiaId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materiaId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("z86h")},"data-v-38115ccc",null);t.default=f.exports},"6w8g":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vmr0"),c=a("TE7m"),d=a("ZqJ4"),m={name:"TIcBuPaintingPic",components:{ChooseCarType:n.a,EditPicTable:o.a},data:function(){var e=this;return{qmodify:d.a.QMODIFY,approvaling:d.a.APPROVALING,reject:d.a.REJECT,complete:d.a.COMPLETE,ticketcancel:d.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,editdisabled:!1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingPic/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:d.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingPic/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!1,hasView:!1,hasEdit:!1,isExpand:!1,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(t,a){0==e.editdisabled&&(t.length>1?e.editdisabled=!0:e.editdisabled=!1)},"select-all":function(t){0==e.editdisabled&&(e.editdisabled=0!=t)}},extraSelectData:{class1:function(){return[{label:"劳务费",value:"劳务费"},{label:"JLAT",value:"JLAT"},{label:"海外出差",value:"海外出差"},{label:"国内出差",value:"国内出差"}]}},operationAttrs:{width:"100px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuPaintingPic",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingPic/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingPic/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingPic/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingPic/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,extraCheng:{class1:this.showClass2}}}},methods:{showClass2:function(e,t){this.$refs.reftableitem.$refs.dialogForm.value.class2="";"劳务费"==t?this.$refs.reftableitem.$refs.dialogForm.setOptions("class2",[{label:"直劳",value:"直劳"},{label:"准直",value:"准直"},{label:"间接",value:"间接"}]):"JLAT"!=t&&"海外出差"!=t&&"国内出差"!=t||this.$refs.reftableitem.$refs.dialogForm.setOptions("class2",[{label:"人月",value:"人月"},{label:"渡航回数",value:"渡航回数"}])},reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId,e.picNo=t.picNo)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId,e.picNo=this.$refs.reftableitem.data[0].picNo},findByTableName:function(){this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,method:"get",url:"/sysTableinfo/findByTableNameByCarYears?tablename=tIcBuPaintingPic&versionId="+this.$refs.reftablamain.selected[0].versionId},this.tableitemKey++},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.findByTableName(),d.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.editdisabled=e,i.tableitem.disabledNew=e})})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.findByTableName()})}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),d.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.editdisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},findafter2:function(e,t){e.length<=0||this.$refs.reftableitem.$refs.table.setCurrentRow(e[0])},add:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.getTableColumns;this.$refs.editpicshow.show("add",t,e,{},"/tIcBuPaintingPic/save")},edit:function(){var e=this.$refs.reftableitem.selected[0];if(""!=e&&void 0!=e){var t=e,a=this.$refs.reftablamain.selected[0].versionId,i=this.$refs.reftableitem.getTableColumns;this.$refs.editpicshow.show("edit",i,a,t,"/tIcBuPaintingPic/save")}else this.$message({type:"info",message:"请选择要编辑的数据！"})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingPic/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].picNo,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingPic/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingPic/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},submission:function(){var e=this;d.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"},on:{update:e.findafter2}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",disabled:e.isDisabled,label:e.$t("action.chooseVehicleType")},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx,.xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.add"),disabled:e.isDisabled},on:{click:e.add}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.editdisabled},on:{click:e.edit}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("edit-pic-table",{ref:"editpicshow",on:{update:e.findByTableName}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var p=a("VU/8")(m,u,!1,function(e){a("X63W")},"data-v-7d9dc68e",null);t.default=p.exports},"6ztQ":function(e,t){},"7cGE":function(e,t){},"7rjI":function(e,t){},"8nKs":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("TE7m"),c=a("hnOB"),d=a("ZqJ4"),m={name:"TIcBuWeldingInvestDI",components:{ChooseCarType:n.a},data:function(){var e=this;return{qmodify:d.a.QMODIFY,approvaling:d.a.APPROVALING,reject:d.a.REJECT,complete:d.a.COMPLETE,ticketcancel:d.a.TICKETCANCEL,isDisabled:!1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingInvestDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:function(e,t,a){switch(a){case 0:return"编辑中";case 1:return"审批中";case 2:return"完成";default:return a}}},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"EQUAL",value0:0,andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuResinInvestDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinInvestDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinInvestDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinInvestDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinInvestDI/delete",method:"delete"},extraSelectData:{ordertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new4type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new5type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},othertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]}},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(c.a)("tIcBuResinInvestDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(c.a)("tIcBuResinInvestDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),d.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),d.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(o.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinInvestDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=e.filename,a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,e.filename)}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(o.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinInvestDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(c.a)("tIcBuResinInvestDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(o.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinInvestDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=e.filename,a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,e.filename)}).catch(function(t){e.$message.error(t.message)})},submission:function(){var e=this;d.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].investId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"investId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(c.a)("tIcBuResinInvestDI",e,"moveChart")}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var p=a("VU/8")(m,u,!1,function(e){a("6HeU")},"data-v-0e7a7b2b",null);t.default=p.exports},"9+zb":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"WeldingPicFunds",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingPicFunds/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuWeldingPicFunds",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingPicFunds/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingPicFunds/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingPicFunds/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingPicFunds/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})}),this.getinfo(e.versionId)},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),this.getinfo(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingPicFunds/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].fundsId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingPicFunds/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingPicFunds/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getMaterialsInfo?versionId="+e}).then(function(e){t.info=[{name:"新车汇率"},{name:"基点车汇率"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].fundsId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"fundsId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("QJSq")},"data-v-4a5d9f65",null);t.default=f.exports},"9DZP":function(e,t){},"9RDS":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"TIcBuResinLabour",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:[],text:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinLabour/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,isExpand:!1,tableAttrs:{width:"800px"},tableOns:{"expand-change":function(t,a){a.length?(e.$refs.reftableitem.expands=[],t&&e.$refs.reftableitem.expands.push(t.id)):e.$refs.reftableitem.expands=[]},"cell-click":function(t,a,i,r){e.$refs.reftableitem.$refs.table.toggleRowExpansion(t)}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuResinLabour",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinLabour/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinLabour/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinLabour/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinLabour/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})}),this.getinfo(e.versionId)},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),this.getinfo(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinLabour/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].labourId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinLabour/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinLabour/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getLabourInfo?versionId="+e+"&type=3"}).then(function(e){t.info=[{name:"直劳单价"},{name:"DSTR"},{name:"基点车直劳单价"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},mounted:function(){var e=this;this.$nextTick(function(){setTimeout(function(){e.$emit("done")},1e3)})}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",disabled:e.isDisabled,label:e.$t("action.chooseVehicleType")},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("rnQr")},"data-v-1d9e5f43",null);t.default=f.exports},"9VfZ":function(e,t){},"9Yi5":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"TIcBuPaintingPicFunds",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:[],text:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingPicFunds/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,isExpand:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuPaintingPicFunds",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingPicFunds/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingPicFunds/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingPicFunds/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingPicFunds/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})}),this.getinfo(e.versionId)},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}),this.getinfo(e[0].versionId))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingPicFunds/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].fundsId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingPicFunds/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingPicFunds/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getMaterialsInfo?versionId="+e}).then(function(e){t.info=[{name:"新车汇率"},{name:"基点车汇率"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",disabled:e.isDisabled,label:e.$t("action.chooseVehicleType")},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("ksef")},"data-v-9f380de4",null);t.default=f.exports},"9aDp":function(e,t){},"9f0+":function(e,t){},"9lgc":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"TIcBuPaintingMaterial",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingMaterial/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,isExpand:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuPaintingMaterial",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingMaterial/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingMaterial/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingMaterial/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingMaterial/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})}),this.getinfo(e.versionId)},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}),this.getinfo(e[0].versionId))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingMaterial/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].materiaId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingMaterial/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingMaterial/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getMaterialsInfo?versionId="+e}).then(function(e){t.info=[{name:"材料市况"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",disabled:e.isDisabled,label:e.$t("action.chooseVehicleType")},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("FnkE")},"data-v-7a287cdc",null);t.default=f.exports},"9lo3":function(e,t){},"9sii":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("AUIh"),r={name:"YlkPage",components:{"ri-jie-suan":a("kdhO").default},data:function(){return{isShowPage:!1,loading:!1,detailsId:"",pageRequest:{page:1,pageSize:10,showTotal:!0},options:"",form:{gas_id:"",date:"",gasName:""},form2:{gas_id:"",date:"",date2:"",gasName:""},rules:{date:[{required:!0,message:"请选择开始日期",trigger:"change"}],date2:[{required:!0,message:"请选择结束日期",trigger:"change"}],gas_id:[{required:!0,message:"请选择油站",trigger:"change"}]},query:[],tableData:{rows:[]},columns:[{prop:"gasName",label:"油站名称",width:"160",align:"center"},{prop:"allSalemoney",label:"销售总金额",width:"140",align:"center"},{prop:"allProfitmoney",label:"油站当日收益（元）",width:"180",align:"center"},{prop:"allYemoney",label:"余额（总额）",width:"140",align:"center"},{prop:"allWxmoery",label:"微信（总额）",width:"140",align:"center"},{prop:"allAlimoery",label:"支付宝（总额）",width:"140",align:"center"},{prop:"allCashmoney",label:"现金（总额）",width:"140",align:"center"},{prop:"allScmoney",label:"刷卡（总额）",width:"140",align:"center"},{prop:"_92ilnum",label:"汽油92（总升）",width:"160",align:"center"},{prop:"_95ilnum",label:"汽油95（总升）",width:"160",align:"center"},{prop:"_00ilnum",label:"柴油0（总升）",width:"160",align:"center"},{prop:"_98ilnum",label:"柴油-10#（总升）",width:"160",align:"center"},{prop:"createTime",label:"操作时间",width:"160",align:"center",formatter:function(e,t,a,r){return Object(i.a)(e[t.property])}},{prop:"createBy",label:"结算人",width:"150",align:"center"}]}},computed:{gasId:function(){return this.form.gas_id}},watch:{gasId:function(e){var t=this;t.options.map(function(a,i){a.id==e&&(t.form.gasName=a.name)})}},created:function(){this.getSelect()},mounted:function(){this.findPage()},methods:{showParent:function(){this.isShowPage=!1,this.detailsId=""},details:function(e){console.log(e),this.detailsId=e.id,console.log("detailsId",this.detailsId),this.isShowPage=!0},formatter:function(e,t,a,i){return a.toString().substring(0,10)},getSummaries:function(e){var t=e.columns,a=e.data,i=[];return t.forEach(function(e,t){if(0!==t){var r=a.map(function(t){return Number(t[e.property])});t>4&&t<12?(i[t]=r.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),i[t]=i[t].toFixed(2)+" 元"):i[t]=""}else i[t]="合计"}),i},getSelect:function(){var e=this;e.$api.common.xyjPost({url:"/partGasinfo/query",data:{}}).then(function(t){console.log(t.data),e.options=t.data.rows})},handleSelectionChange:function(e){this.multipleSelection=e,this.$message({type:"warning",message:this.multipleSelection})},refreshPageRequest:function(e){this.pageRequest.page=e,this.findPage()},refreshPageSizeRequest:function(e){this.pageRequest.pageSize=e,this.findPage()},searchquery:function(){var e=[];this.form.gas_id&&e.push({hasInitValue:!1,operation:"EQUAL",property:"gas_id",relation:"AND",value:this.form.gas_id}),this.form.date&&e.push({hasInitValue:!1,operation:"BETWEEN",property:"create_time",relation:"AND",value:this.form.date}),this.query=e,this.findPage()},findPage:function(){var e=this;e.$api.common.xyjQueryPost({url:"/appOrderJs/query",data:{pageBean:e.pageRequest,params:{},querys:e.query,selfDate:{},sorter:[]}}).then(function(t){e.loading=!1,console.log("res",t),e.tableData=t.data})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isShowPage,expression:"!isShowPage"}],staticClass:"sys-coupon-bag"},[a("el-container",[a("el-header",[a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-search"}),a("span",{staticClass:"sx"},[e._v("筛选查询")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-row"),e._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"mini"},on:{click:e.searchquery}},[e._v("查询")])],1)])]),e._v(" "),a("el-main",[a("el-row",{staticClass:"searchForm"},[a("el-form",{ref:"searchForm",attrs:{size:"small",model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"油站",prop:"gas_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.gas_id,callback:function(t){e.$set(e.form,"gas_id",t)},expression:"form.gas_id"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"结算日期",prop:"date"}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)])],1)],1),e._v(" "),a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-tickets"}),a("span",{staticClass:"sx"},[e._v("会员列表")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-button",{staticClass:"fa fa-refresh",attrs:{size:"mini",type:"primary"},on:{click:e.findPage}},[e._v("\n              刷新\n            ")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.tableData.rows,size:"mini","show-summary":"","summary-method":e.getSummaries,"show-overflow-tooltip":"true",border:""}},[a("el-table-column",{attrs:{fixed:"left",type:"index",label:"序号","min-width":"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"left",prop:"jsStartDate",label:"操作","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.details(t.row)}}},[e._v("\n                详情\n              ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"left",formatter:e.formatter,prop:"jsStartDate",label:"开始日期","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"left",formatter:e.formatter,prop:"jsEndDate",label:"结束日期","min-width":"100",align:"center"}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{sortable:"",prop:e.prop,label:e.label,formatter:e.formatter,"min-width":e.width,align:e.align}})})],2),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageRequest.page,"page-sizes":[10,20,30,40,50],"page-size":e.pageRequest.pageSize,layout:"sizes, total, prev, pager, next",total:e.tableData.total},on:{"current-change":e.refreshPageRequest,"size-change":e.refreshPageSizeRequest}})],1)],1)],1)],1),e._v(" "),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowPage,expression:"isShowPage"}]},[a("ri-jie-suan",{attrs:{detailsId:e.detailsId},on:{showParent:e.showParent}})],1)])],1)},staticRenderFns:[]};var l=a("VU/8")(r,s,!1,function(e){a("Q5zf")},null,null);t.default=l.exports},A4MV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuAssembleInvestDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleInvestDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"1000px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},extraSelectData:{ordertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},incidentaltype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},electrictype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},logisticstype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},pugtype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},threadtype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},othertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuAssembleInvestDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleInvestDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleInvestDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleInvestDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleInvestDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete,onDialogDefault:function(e){e.orderType="车型",e.threadType="车型",e.incidentalType="车型",e.electricType="车型",e.logisticsType="车型",e.pugType="车型",e.skill1Type="车型",e.skill2Type="车型",e.skill3Type="车型",e.otherType="车型"}}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuAssembleInvestDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuAssembleInvestDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(){var e=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){e.$refs.reftableitem.getList(),e.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssembleInvestDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleInvestDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuAssembleInvestDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssembleInvestDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuAssembleInvestDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuAssembleInvestDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuAssembleInvestDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].investId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"investId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuAssembleInvestDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("f/BR")},"data-v-2e24700c",null);t.default=f.exports},AUIh:function(e,t,a){"use strict";function i(e,t,a){if(null!=e){var i=new Date(e),r=i.getFullYear(),s=i.getMonth()+1;s=1==s.toString().length?"0"+s:s;var l=i.getDate();l=1==l.toString().length?"0"+l:l;var n=i.getHours();n=1==n.toString().length?"0"+n:n;var o=i.getMinutes();o=1==o.toString().length?"0"+o:o;var c=i.getSeconds();return r+t+s+t+l+" "+n+a+o+a+(c=1==c.toString().length?"0"+c:c)}}t.a=function(e){return i(e,"/",":")},t.b=i},AVYP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("AUIh");var i={name:"YlkPage",data:function(){return{loading:!1,pageRequest:{page:1,pageSize:10,showTotal:!0},options:"",form:{gas_id:"",date:"",date1:"",gasName:""},form2:{gas_id:"",date:"",date2:"",gasName:"",isHistory:""},rules:{date:[{required:!0,message:"请选择开始日期",trigger:"change"}],date2:[{required:!0,message:"请选择结束日期",trigger:"change"}],gas_id:[{required:!0,message:"请选择油站",trigger:"change"}]},jsEndDate:"",query:[],tableData:{rows:[]},columns:[{prop:"gasName",label:"油站名称",width:"180",align:"center"},{prop:"allSalemoney",label:"销售总金额",width:"140",align:"center"},{prop:"allProfitmoney",label:"油站当日收益（元）",width:"190",align:"center"},{prop:"allYemoney",label:"余额（总额）",width:"160",align:"center"},{prop:"allWxmoery",label:"微信（总额）",width:"160",align:"center"},{prop:"allAlimoery",label:"支付宝（总额）",width:"160",align:"center"},{prop:"allCashmoney",label:"现金（总额）",width:"160",align:"center"},{prop:"allScmoney",label:"刷卡（总额）",width:"160",align:"center"},{prop:"_92ilnum",label:"汽油92（总升）",width:"160",align:"center"},{prop:"_95ilnum",label:"汽油95（总升）",width:"160",align:"center"},{prop:"_00ilnum",label:"柴油0（总升）",width:"160",align:"center"},{prop:"_98ilnum",label:"柴油-10#（总升）",width:"180",align:"center"}]}},computed:{gasId:function(){return this.form.gas_id}},watch:{gasId:function(e){var t=this;t.options.map(function(a,i){a.id==e&&(t.form.gasName=a.name)})}},created:function(){this.getSelect()},mounted:function(){this.findPage()},methods:{getSummaries:function(e){var t=e.columns,a=e.data,i=[];return t.forEach(function(e,t){if(0!==t){var r=a.map(function(t){return Number(t[e.property])});t>2&&t<10?(i[t]=r.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),i[t]=i[t].toFixed(2)+" 元"):i[t]=""}else i[t]="结算"}),i},getSelect:function(){var e=this;e.$api.common.xyjPost({url:"/partGasinfo/query",data:{}}).then(function(t){console.log(t.data),e.options=t.data.rows})},handleSelectionChange:function(e){this.multipleSelection=e,this.$message({type:"warning",message:this.multipleSelection})},refreshPageRequest:function(e){this.pageRequest.page=e,this.findPage()},refreshPageSizeRequest:function(e){this.pageRequest.pageSize=e,this.findPage()},formPass:function(){var e=this;this.$refs.searchForm.validate(function(t){if(!t)return!1;e.searchquery()})},searchquery:function(){var e=[];this.form.gas_id&&e.push({hasInitValue:!1,operation:"EQUAL",property:"gas_id",relation:"AND",value:this.form.gas_id}),this.form.date&&e.push({hasInitValue:!1,operation:"BETWEEN",property:"thedays",relation:"AND",value:this.form.date}),this.query=e,this.findPage()},findPage:function(){var e=this;e.loading=!0,e.form2.date=e.form.date,e.form2.gas_id=e.form.gas_id,e.form2.gasName=e.form.gasName,console.log(e.form2),e.$api.common.xyjQueryPost({url:"/appOrderJsDays/getsellapporderDays",data:{pageBean:{},params:{},querys:e.query,selfDate:{},sorter:[]}}).then(function(t){e.loading=!1,console.log("res",t),e.tableData=t})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"sys-coupon-bag"},[a("el-container",[a("el-header",[a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-search"}),a("span",{staticClass:"sx"},[e._v("筛选查询")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-row"),e._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"mini"},on:{click:e.formPass}},[e._v("查询")])],1)])]),e._v(" "),a("el-main",[a("el-row",{staticClass:"searchForm"},[a("el-form",{ref:"searchForm",attrs:{size:"small",model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"油站",prop:"gas_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.gas_id,callback:function(t){e.$set(e.form,"gas_id",t)},expression:"form.gas_id"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"开始日期",prop:"date"}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)])],1)],1),e._v(" "),a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-tickets"}),a("span",{staticClass:"sx"},[e._v("会员列表")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-button",{staticClass:"fa fa-refresh",attrs:{size:"mini",type:"primary"},on:{click:e.findPage}},[e._v("\n              刷新\n            ")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.tableData.rows,size:"mini","show-summary":"","summary-method":e.getSummaries,"show-overflow-tooltip":"true",border:""}},[a("el-table-column",{attrs:{fixed:"left",type:"index",label:"序号","min-width":"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"left",prop:"thedays",label:"日期","min-width":"150",align:"center"}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{sortable:"",prop:e.prop,label:e.label,formatter:e.formatter,"min-width":e.width,align:e.align}})})],2),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageRequest.page,"page-sizes":[10,20,30,40,50],"page-size":e.pageRequest.pageSize,layout:"sizes, total, prev, pager, next",total:e.tableData.total},on:{"current-change":e.refreshPageRequest,"size-change":e.refreshPageSizeRequest}})],1)],1)],1)],1)])},staticRenderFns:[]};var s=a("VU/8")(i,r,!1,function(e){a("LzwA")},null,null);t.default=s.exports},Aw6S:function(e,t){},BQHT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("NGEn"),r=a.n(i),s={name:"table-tree-column",props:{prop:{type:String},treeKey:{type:String,default:"id"},parentKey:{type:String,default:"parentId"},levelKey:{type:String,default:"level"},childKey:{type:String,default:"children"}},methods:{childStyles:function(e){return{"padding-left":25*e[this.levelKey]+"px"}},iconClasses:function(e){return[e._expanded?"el-icon-caret-bottom":"el-icon-caret-right"]},iconStyles:function(e){return{visibility:this.hasChild(e)?"visible":"hidden"}},hasChild:function(e){return r()(e[this.childKey])&&e[this.childKey].length>=1||!1},toggleHandle:function(e,t){var a=this;if(this.hasChild(t)){var i=this.$parent.store.states.data.slice(0);i[e]._expanded=!i[e]._expanded,i=i[e]._expanded?i.splice(0,e+1).concat(t[this.childKey]).concat(i):this.removeChildNode(i,t[this.treeKey]),this.$parent.store.commit("setData",i),this.$nextTick(function(){a.$parent.doLayout()})}},removeChildNode:function(e,t){var a=r()(t)?t:[t];if(t.length<=0)return e;for(var i=[],s=0;s<e.length;s++)-1!==a.indexOf(e[s][this.parentKey])&&-1===a.indexOf(e[s][this.treeKey])&&(i.push(e.splice(s,1)[0][this.treeKey]),s--);return this.removeChildNode(e,i)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table-column",e._b({attrs:{prop:e.prop},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:e.childStyles(t.row),on:{click:function(a){a.preventDefault(),e.toggleHandle(t.$index,t.row)}}},[a("i",{class:e.iconClasses(t.row),style:e.iconStyles(t.row)}),e._v("\n      "+e._s(t.row[e.prop])+"\n    ")])]}}])},"el-table-column",e.$attrs,!1))},staticRenderFns:[]},n=a("VU/8")(s,l,!1,null,null,null);t.default=n.exports},BtyH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s={name:"ForecastMain",data:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return{tablemain:{hasOperation:!1,hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick},operationAttrs:{width:"200px"},formatters:{state:function(e,t,a){switch(a){case 0:return"编辑中";case 1:return"审批中";case 2:return"完成";default:return a}}},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCar/getForecastMain",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"EQUAL",value0:0,andor0:"AND"}},extraSelectData:{versionid:function(){var e=this;axios({hostUrl:this.global.lyBaseUrl,url:"/tIcDbPlatform/query",method:"post",data:{}}).then(function(e){data.$options=e.rows.map(function(e,t){var a={};return a.label=e.platformName,a.value=e.platformName,a})}).catch(function(t){e.$message.error(t.message)})}}}}}),methods:{rowclick:function(e,t,a){var i=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList()})},findafter:function(e,t){var a=this;e.length<=0||(this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e[0].versionId}),this.$nextTick(function(){a.$refs.reftableitem.getList()}))}}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",[t("xyj-table",this._b({ref:"reftablamain",attrs:{id:"1"},on:{update:this.findafter}},"xyj-table",this.tablemain,!1))],1)])},staticRenderFns:[]};var n=a("VU/8")(s,l,!1,function(e){a("rv2k")},"data-v-71eaecf7",null);t.default=n.exports},BuCy:function(e,t){},"C+na":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("TE7m"),c=a("ZqJ4"),d={name:"StampingMaterial",components:{ChooseCarType:n.a},data:function(){var e=this;return{qmodify:c.a.QMODIFY,approvaling:c.a.APPROVALING,reject:c.a.REJECT,complete:c.a.COMPLETE,ticketcancel:c.a.TICKETCANCEL,isDisabled:!1,text:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],paramsTrans:{hostUrl:this.global.lyBaseUrl,url:"/tIcBuCarType/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingMaterial/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",e.$refs.reftablamain.$children[2].$el.style.display="none",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom="",e.$refs.reftablamain.$children[2].$el.style.display=""}})}},operationAttrs:{width:"200px"},formatters:{state:c.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,isExpand:!1,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{"expand-change":function(t,a){a.length?(e.$refs.reftableitem.expands=[],t&&e.$refs.reftableitem.expands.push(t.id)):e.$refs.reftableitem.expands=[]},"cell-click":function(t,a,i,r){e.$refs.reftableitem.$refs.table.toggleRowExpansion(t)}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuStampingMaterial",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingMaterial/delete",method:"delete"},onManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},onManualNew:this.reftableitemManualNew,onManualDelete:function(e){},extraCheng:{material:this.materialChange}}}},methods:{materialChange:function(e,t){this.$refs.reftableitem.$refs.dialogForm.setOptions("brandNo",[{label:"文本框",value:"input"}])},reftableitemManualNew:function(e){e&&(e.versionId=this.$refs.reftablamain.selected[0].versionId)},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),c.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),c.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(o.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingMaterial/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].materialId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(o.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingMaterial/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.$nextTick(function(){a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3)}))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){console.warn(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(o.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingMaterial/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},submission:function(){var e=this;c.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"},scopedSlots:e._u([{key:"expandContent",fn:function(e){}}])},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,"show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var u=a("VU/8")(d,m,!1,function(e){a("lB67")},"data-v-45cd2464",null);t.default=u.exports},C4Z4:function(e,t){},C9fe:function(e,t){},CDeG:function(e,t){},CdzR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuPaintingPicZDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingPicZDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,isExpand:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuPaintingPicZDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingPicZDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingPicZDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingPicZDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingPicZDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuPaintingPicZDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuPaintingPicZDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingPicZDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].picId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingPicZDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuPaintingPicZDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingPicZDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuPaintingPicZDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuPaintingPicZDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuPaintingPicZDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuPaintingPicZDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",disabled:e.isDisabled,label:e.$t("action.chooseVehicleType")},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("E4CP")},"data-v-79e7c002",null);t.default=f.exports},Cxac:function(e,t){},"D/jM":function(e,t){},"D/uo":function(e,t){},DHxA:function(e,t){},DeLq:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuBatteryInvestDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryInvestDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"tIcBuBatteryInvestDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryInvestDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryInvestDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryInvestDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryInvestDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuBatteryInvestDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuBatteryInvestDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryInvestDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryInvestDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuBatteryInvestDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryInvestDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuBatteryInvestDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuBatteryInvestDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuBatteryInvestDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].investId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"investId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuBatteryInvestDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("bOWS")},"data-v-039ee8c7",null);t.default=f.exports},Dp0i:function(e,t){},"E/Y2":function(e,t){},E0nX:function(e,t){},E4CP:function(e,t){},EMjc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"TIcBuBatteryLabour",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryLabour/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuBatteryLabour",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryLabour/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryLabour/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryLabour/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryLabour/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})}),this.getinfo(e.versionId)},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),this.getinfo(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryLabour/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].labourId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryLabour/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryLabour/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getLabourInfo?versionId="+e+"&type=6"}).then(function(e){t.info=[{name:"直劳单价"},{name:"DSTR"},{name:"基点车直劳单价"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].labourId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"labourId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("yZMX")},"data-v-4409e6cf",null);t.default=f.exports},EN35:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),r=a.n(i),s={name:"TableColumnFilterDialog",components:{},props:{columns:{type:Array,default:[]},size:{type:String,default:"mini"}},data:function(){return{selections:[],dialogVisible:!1}},methods:{selectionChange:function(e){this.selections=e},setDialogVisible:function(e){this.dialogVisible=e},handleFilterColumns:function(){for(var e=[],t=0;t<this.columns.length;t++){var a=this.columns[t];this.hasColumn(a)&&e.push(a)}this.$emit("handleFilterColumns",{filterColumns:JSON.parse(r()(e))})},hasColumn:function(e){for(var t=0;t<this.selections.length;t++){var a=this.selections[t];if(e.prop==a.prop)return!0}return!1}},mounted:function(){}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"表格显示列",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-table",{ref:"fitlerTable",staticStyle:{width:"100%"},attrs:{data:e.columns,height:"330px","tooltip-effect":"dark","header-align":"left",align:"left",size:e.size},on:{"selection-change":e.selectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{label:"属性"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.prop))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"列名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:e.size},model:{value:t.row.label,callback:function(a){e.$set(t.row,"label",a)},expression:"scope.row.label"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最小宽度"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:e.size},model:{value:t.row.minWidth,callback:function(a){e.$set(t.row,"minWidth",a)},expression:"scope.row.minWidth"}})]}}])})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.size},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{attrs:{size:e.size,type:"primary"},nativeOn:{click:function(t){return e.handleFilterColumns(t)}}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1)},staticRenderFns:[]};var n=a("VU/8")(s,l,!1,function(e){a("O8Kh")},"data-v-637af325",null);t.default=n.exports},Esqk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"StampingPicDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingPicDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuStampingPicDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingPicDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingPicDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingPicDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingPicDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuStampingPicDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuStampingPicDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingPicDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].picId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingPicDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuStampingPicDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingPicDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuStampingPicDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuStampingPicDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuStampingPicDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].picId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"picId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuStampingPicDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("9aDp")},"data-v-383505b3",null);t.default=f.exports},F8jz:function(e,t){},FVdd:function(e,t){},FeuD:function(e,t){},FflJ:function(e,t){},FnkE:function(e,t){},"GFB+":function(e,t){},Gzdy:function(e,t){},H0fP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"WeldingPicDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingPicDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuWeldingPicDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingPicDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingPicDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingPicDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingPicDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuWeldingPicDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuWeldingPicDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingPicDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].picId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingPicDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuWeldingPicDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingPicDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuWeldingPicDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuWeldingPicDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuWeldingPicDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].picId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"picId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuWeldingPicDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("niAL")},"data-v-979eb56c",null);t.default=f.exports},HPnc:function(e,t){},HuBv:function(e,t){},IMnS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=(a("TE7m"),{name:"Welding",components:{},data:function(){return{tableitemKey:1,tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick},operationAttrs:{width:"200px"},formatters:{state:function(e,t,a,i){switch(a){case 0:return"编辑中";case 1:return"审批中";case 2:return"完成";default:return a}}},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfoSum",sorter:[],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWelding/getSumInfo",method:"post",notCondition:!0},InitQuery:{}},tableitem:{hasOperation:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"OfficeSum",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"carId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWelding/getSumInfoItem",method:"post",notCondition:!1}}}},methods:{findByTableName:function(){this.tableitem.editAxios={hostUrl:this.global.lyBudgetUrl,method:"get",url:"/sysTableinfo/findByTableNameAccordVersionNum?tablename=OfficeSum&carId="+this.$refs.reftablamain.selected[0].carId},this.tableitemKey++},rowclick:function(e,t,a){var i=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.carId}),this.$nextTick(function(){i.findByTableName()})},findafter:function(e,t){var a=this;e.length<=0||(this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e[0].carId}),this.$nextTick(function(){a.findByTableName()}))}}}),l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",[t("xyj-table",this._b({ref:"reftablamain",attrs:{id:"1"},on:{update:this.findafter}},"xyj-table",this.tablemain,!1))],1),this._v(" "),t("div",[t("xyj-table",this._b({key:this.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",this.tableitem,!1))],1)])},staticRenderFns:[]};var n=a("VU/8")(s,l,!1,function(e){a("K0eP")},"data-v-e8229af4",null);t.default=n.exports},IOVJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuResinInvestZDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinInvestZDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,isExpand:!1,dialogWidth:"1000px",tableAttrs:{width:"800px"},tableOns:{"expand-change":function(t,a){a.length?(e.$refs.reftableitem.expands=[],t&&e.$refs.reftableitem.expands.push(t.id)):e.$refs.reftableitem.expands=[]},"cell-click":function(t,a,i,r){e.$refs.reftableitem.$refs.table.toggleRowExpansion(t)}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuResinInvestZDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinInvestZDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinInvestZDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinInvestZDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinInvestZDI/delete",method:"delete"},extraSelectData:{ordertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new4type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new5type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},othertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]}},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete,onDialogDefault:function(e){e.orderType="车型",e.new1Type="车型",e.new2Type="车型",e.new3Type="车型",e.new4Type="车型",e.new5Type="车型",e.skill1Type="车型",e.skill2Type="车型",e.skill3Type="车型",e.otherType="车型"}}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuResinInvestZDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuResinInvestZDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinInvestZDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinInvestZDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuResinInvestZDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinInvestZDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuResinInvestZDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuResinInvestZDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuResinInvestZDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuResinInvestZDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("b3vt")},"data-v-0d38fdba",null);t.default=f.exports},Is6l:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("c/Tr"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("wbNz"),o=a("BQHT"),c=a("xA5l"),d=a("uLE8"),m={components:{PopupTreeInput:c.a,KtButton:n.default,TableTreeColumn:o.default,FaIconTooltip:d.a},computed:{comp:function(){var e=this;if(this.url)return function(){return a("PRBW")("./views"+e.url)}}},data:function(){return{url:"",data:[],size:"small",loading:!1,filters:{name:""},tableTreeDdata:[],dialogVisible:!1,menuTypeList:["目录","菜单","按钮"],dataForm:{id:0,type:1,name:"",parentId:0,parentName:"",url:"",perms:"",orderNum:0,icon:"",iconList:[]},dataRule:{name:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}]},popupTreeData:[],popupTreeProps:{label:"name",children:"children"}}},methods:{findTreeData:function(){var e=this;this.loading=!0,this.$api.menu.findMenuTree().then(function(t){e.tableTreeDdata=t.data,e.popupTreeData=e.getParentMenuTree(t.data),e.loading=!1})},getParentMenuTree:function(e){return[{parentId:0,name:"顶级菜单",children:e}]},handleAdd:function(){this.dialogVisible=!0,this.dataForm={id:0,type:1,typeList:["目录","菜单","按钮"],name:"",parentId:0,parentName:"",url:"",perms:"",orderNum:0,icon:"",iconList:[]}},handleEdit:function(e){this.dialogVisible=!0,l()(this.dataForm,e)},handleDelete:function(e){var t=this;this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){var a=t.getDeleteIds([],e);t.$api.menu.batchDelete(a).then(function(e){t.findTreeData(),t.$message({message:"删除成功",type:"success"})})})},getDeleteIds:function(e,t){if(e.push({id:t.id}),null!=t.children)for(var a=0,i=t.children.length;a<i;a++)this.getDeleteIds(e,t.children[a]);return e},test:function(e){var t=null;return function e(){var a=r()(document.querySelectorAll(".xyj-table .tableMain .XyjBtn"));if(0!=a.length)return t&&clearTimeout(t),a;t=setTimeout(e,1)}()},handleTreeSelectChange:function(e,t){var a=this;this.loading=!0;var i=void 0;this.url=e.url,this.dataForm.parentId=e.id,this.dataForm.parentName=e.name,clearTimeout(i),i=setTimeout(function(){var t=r()(document.querySelectorAll(".XyjBtn"));a.test()&&(t=t.concat(a.test(e)));var i={};t=(t=t.map(function(t){var a={};return a.label=t.textContent,a.value=e.url.replace(/\//g,":").substr(1)+":"+t.dataset.perms,a})).reduce(function(e,t){return!i[t.value]&&(i[t.value]=e.push(t)),e},[]),a.data=t,a.loading=!1},2e3)},iconActiveHandle:function(e){this.dataForm.icon=e},submitForm:function(){var e=this;this.$refs.dataForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var t=l()({},e.dataForm);e.$api.menu.save(t).then(function(t){e.editLoading=!1,200==t.code?(e.$message({message:"操作成功",type:"success"}),e.$refs.dataForm.resetFields(),e.dialogVisible=!1):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.data.length=0,e.findTreeData()})})})}},mounted:function(){this.findTreeData()}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),a("el-form-item",[a("kt-button",{ref:"kButton",attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:menu:view",type:"primary"},on:{click:function(t){e.findTreeData(null)}}})],1),e._v(" "),a("el-form-item",[a("kt-button",{ref:"kButton",attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:menu:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableTreeDdata,stripe:"",size:"mini","element-loading-text":"拼命加载中","row-key":"id"}},[a("el-table-column",{attrs:{prop:"name","header-align":"center",align:"left",width:"150",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:"图标"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("i",{class:e.row.icon||""})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"type","header-align":"center",align:"center",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.type?a("el-tag",{attrs:{size:"small"}},[e._v("目录")]):1===t.row.type?a("el-tag",{attrs:{size:"small",type:"success"}},[e._v("菜单")]):2===t.row.type?a("el-tag",{attrs:{size:"small",type:"info"}},[e._v("按钮")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"parentName","header-align":"center",align:"center",width:"120",label:"上级菜单"}}),e._v(" "),a("el-table-column",{attrs:{prop:"url","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"菜单URL"}}),e._v(" "),a("el-table-column",{attrs:{prop:"perms","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"授权标识"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNum","header-align":"center",align:"center",label:"排序"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"185",label:e.$t("action.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("kt-button",{ref:"kButton",attrs:{icon:"fa fa-edit",label:e.$t("action.edit"),perms:"sys:menu:edit"},on:{click:function(a){e.handleEdit(t.row)}}}),e._v(" "),a("kt-button",{ref:"kButton",attrs:{icon:"fa fa-trash",label:e.$t("action.delete"),perms:"sys:menu:delete",type:"danger"},on:{click:function(a){e.handleDelete(t.row)}}})]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dataForm.id?"修改":"新增",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{"text-align":"left"},attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"80px",size:e.size},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.submitForm()}}},[a("el-form-item",{attrs:{label:"菜单类型",prop:"type"}},[a("el-radio-group",{model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}},e._l(e.menuTypeList,function(t,i){return a("el-radio",{key:i,attrs:{label:i}},[e._v(e._s(t))])}))],1),e._v(" "),a("el-form-item",{attrs:{label:e.menuTypeList[e.dataForm.type]+"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:e.menuTypeList[e.dataForm.type]+"名称"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上级菜单",prop:"parentName"}},[a("popup-tree-input",{attrs:{data:e.popupTreeData,props:e.popupTreeProps,prop:null==e.dataForm.parentName||""==e.dataForm.parentName?"顶级菜单":e.dataForm.parentName,nodeKey:""+e.dataForm.parentId,currentChangeHandle:e.handleTreeSelectChange}})],1),e._v(" "),0!==e.dataForm.type?a("el-form-item",{attrs:{label:"授权标识",prop:"perms"}},[2!==e.dataForm.type||e.dataForm.id?a("el-input",{attrs:{placeholder:"如: sys:user:add, sys:user:edit, sys:user:delete"},model:{value:e.dataForm.perms,callback:function(t){e.$set(e.dataForm,"perms",t)},expression:"dataForm.perms"}}):a("div",[a("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-spinner":"el-icon-loading","value-key":"label",clearable:"",placeholder:"请选择"},model:{value:e.dataForm.perms,callback:function(t){e.$set(e.dataForm,"perms",t)},expression:"dataForm.perms"}},e._l(e.data,function(e,t){return a("el-option",{key:t,attrs:{label:e.label+"("+e.value+")",value:e.value}})}))],1)],1):e._e(),e._v(" "),1===e.dataForm.type?a("el-form-item",{attrs:{label:"菜单路由",prop:"url"}},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"菜单路由"},model:{value:e.dataForm.url,callback:function(t){e.$set(e.dataForm,"url",t)},expression:"dataForm.url"}})],1),e._v(" "),a("el-col",{staticClass:"icon-list__tips",attrs:{span:2}},[a("el-tooltip",{staticStyle:{padding:"10px"},attrs:{placement:"top",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[e._v("URL格式：")]),e._v(" "),a("p",[e._v("1.常规业务开发的功能URL，如用户管理，Views目录下页面路径为 /Sys/User, 此处填写 /sys/user。")]),e._v(" "),a("p",[e._v("2.嵌套外部网页，如通过菜单打开百度网页，此处填写 http://www.baidu.com，http:// 不可省略。")]),e._v(" "),a("p",[e._v("示例：用户管理：/sys/user 嵌套百度：http://www.baidu.com 嵌套网页：http://127.0.0.1:8000")])]),e._v(" "),a("i",{staticClass:"el-icon-warning"})])],1)],1)],1):e._e(),e._v(" "),2!==e.dataForm.type?a("el-form-item",{attrs:{label:"排序编号",prop:"orderNum"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,label:"排序编号"},model:{value:e.dataForm.orderNum,callback:function(t){e.$set(e.dataForm,"orderNum",t)},expression:"dataForm.orderNum"}})],1):e._e(),e._v(" "),2!==e.dataForm.type?a("el-form-item",{attrs:{label:"菜单图标",prop:"icon"}},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-input",{directives:[{name:"popover",rawName:"v-popover:iconListPopover",arg:"iconListPopover"}],staticClass:"icon-list__input",attrs:{readonly:!1,placeholder:"菜单图标名称（如：fa fa-home fa-lg）"},model:{value:e.dataForm.icon,callback:function(t){e.$set(e.dataForm,"icon",t)},expression:"dataForm.icon"}})],1),e._v(" "),a("el-col",{staticClass:"icon-list__tips",attrs:{span:2}},[a("fa-icon-tooltip")],1)],1)],1):e._e()],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.size},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{attrs:{size:e.size,type:"primary"},on:{click:function(t){e.submitForm()}}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1),e._v(" "),a("div",[a(e.comp,{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],tag:"compoent"})],1)],1)},staticRenderFns:[]};var p=a("VU/8")(m,u,!1,function(e){a("xbgB")},"data-v-662e555e",null);t.default=p.exports},Iz6T:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuBatteryLabourlDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryLabourlDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuBatteryLabourlDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryLabourlDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryLabourlDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryLabourlDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryLabourlDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuBatteryLabourlDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuBatteryLabourlDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryLabourlDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].labourlId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryLabourlDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuBatteryLabourlDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryLabourlDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuBatteryLabourlDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuBatteryLabourlDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuBatteryLabourlDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].labourlId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"labourlId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuBatteryLabourlDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("lPpo")},"data-v-50cdb132",null);t.default=f.exports},JYOD:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuPaintingLabourlDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingLabourlDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,isExpand:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuPaintingLabourlDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingLabourlDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingLabourlDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingLabourlDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingLabourlDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuPaintingLabourlDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuPaintingLabourlDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingLabourlDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].labourlId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingLabourlDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuPaintingLabourlDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingLabourlDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuPaintingLabourlDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuPaintingLabourlDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuPaintingLabourlDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuPaintingLabourlDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",disabled:e.isDisabled,label:e.$t("action.chooseVehicleType")},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("zeAH")},"data-v-8b969100",null);t.default=f.exports},Jqo2:function(e,t){},K0eP:function(e,t){},K8HG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"TIcBuResinPicFunds",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinPicFunds/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,isExpand:!1,tableAttrs:{width:"800px"},tableOns:{"expand-change":function(t,a){a.length?(e.$refs.reftableitem.expands=[],t&&e.$refs.reftableitem.expands.push(t.id)):e.$refs.reftableitem.expands=[]},"cell-click":function(t,a,i,r){e.$refs.reftableitem.$refs.table.toggleRowExpansion(t)}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuResinPicFunds",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinPicFunds/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinPicFunds/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinPicFunds/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinPicFunds/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})}),this.getinfo(e.versionId)},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}),this.getinfo(e[0].versionId))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinPicFunds/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].fundsId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinPicFunds/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinPicFunds/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getMaterialsInfo?versionId="+e}).then(function(e){t.info=[{name:"新车汇率"},{name:"基点车汇率"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{disabled:e.isDisabled,type:"primary",label:e.$t("action.chooseVehicleType")},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("9f0+")},"data-v-3fee8a68",null);t.default=f.exports},KclI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("fZjL"),r=a.n(i),s=a("TE7m"),l={name:"Factory",mounted:function(){},data:function(){return{loading:!1,dialogVisible:!1,isEdit:!1,row:{},rules:{factoryType:[{required:!0,message:"请选择工厂",trigger:"change"}],factoryName:[{required:!0,message:"请输入名称",trigger:"change"}]},form:{factoryType:"",factoryName:"",factoryAddress:"",memo:"",id:0},tableConfig:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!1,hasPagination:!1,formatters:{factoryType:function(e,t,a){switch(a){case 1:return"花都一厂";case 2:return"花都二厂";case 3:return"花都三厂";default:return a}}},tableAttrs:{width:"800px"},tableOns:{"row-click":this.rowclick},operationAttrs:{width:"65px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcDbFactory",bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcDbFactory/query",method:"post",notCondition:!0},bNewUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcDbFactory/save",method:"post",close:!0},bEditUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcDbFactory/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyBaseUrl,url:"/tIcDbFactory/delete",method:"delete"},onManualEdit:function(e,t){e&&(e.id=t.id)}}}},methods:{rowclick:function(e,t,a){this.row=e},handleClose:function(){this.dialogVisible=!1,this.isEdit=!1,this.$refs.form.resetFields()},add:function(){this.dialogVisible=!0,this.isEdit=!1},Edit:function(){this.isEdit=!0,this.isEdit&&0!=r()(this.row).length?(this.dialogVisible=!0,this.form.factoryAddress=this.row.factoryAddress,this.form.factoryName=this.row.factoryName,this.form.memo=this.row.memo,this.form.factoryType=String(this.row.factoryType),this.form.id=this.row.id):this.$message({message:"请选择需要编辑的数据",type:"warning"})},confirm:function(){var e=this;this.loading=!0,this.$refs.form.validate(function(t){t&&(e.isEdit||delete e.form.id,Object(s.a)({hostUrl:e.global.lyBaseUrl,url:"/tIcDbFactory/save",method:"post",data:e.form}).then(function(t){200==t.code&&(e.$refs.otable.getList(),e.$refs.form.resetFields(),e.row={},e.dialogVisible=!1)}).catch(function(t){e.$message.error(t.message)}).finally(function(t){e.loading=!1}))})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"left"}},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.add}},[e._v(e._s(e.$t("action.add")))]),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.Edit}},[e._v(e._s(e.$t("action.edit")))]),e._v(" "),a("xyj-table",e._b({ref:"otable",attrs:{id:"1"}},"xyj-table",e.tableConfig,!1)),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"工厂字典",visible:e.dialogVisible,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"工厂",prop:"factoryType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择工厂",clearable:""},model:{value:e.form.factoryType,callback:function(t){e.$set(e.form,"factoryType",t)},expression:"form.factoryType"}},[a("el-option",{attrs:{label:"花都一厂",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"花都二厂",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"花都三厂",value:"3"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"factoryName"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.factoryName,callback:function(t){e.$set(e.form,"factoryName",t)},expression:"form.factoryName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址",prop:"factoryAddress"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.factoryAddress,callback:function(t){e.$set(e.form,"factoryAddress",t)},expression:"form.factoryAddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"memo"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.memo,callback:function(t){e.$set(e.form,"memo",t)},expression:"form.memo"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.confirm}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(l,n,!1,function(e){a("w3l/")},"data-v-2165e92e",null);t.default=o.exports},Krnv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=a("bOdI"),s=a.n(r),l=a("woOf"),n=a.n(l),o=a("mvHQ"),c=a.n(o),d=a("oXfx"),m=a("vALX"),u=a("TE7m"),p=a("hnOB"),f=a("ZqJ4"),b={name:"WeldingLabourlDI",components:{ChooseCarType:d.a,EditTable:m.a},data:function(){var e=this;return{qmodify:f.a.QMODIFY,approvaling:f.a.APPROVALING,reject:f.a.REJECT,complete:f.a.COMPLETE,ticketcancel:f.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingLabourlDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(c()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:f.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuWeldingLabourlDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingLabourlDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingLabourlDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingLabourlDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingLabourlDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:(i={reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(p.a)("tIcBuWeldingLabourlDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(p.a)("tIcBuWeldingLabourlDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=n()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),f.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})}},s()(i,"itemAfterSuccessNew",function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(p.a)("tIcBuWeldingInvestZDI",a,"moveChart")}),s()(i,"itemAfterSuccessDelete",function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(p.a)("tIcBuWeldingInvestZDI",t,"moveChart")}),s()(i,"findafter",function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=n()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),f.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))}),s()(i,"chooseType",function(){this.$refs.carshow.open(!0)}),s()(i,"carSeledtOk",function(e){var t=this;this.tableitem.customQuery[100]=n()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})}),s()(i,"downLoadBaseData",function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(u.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingLabourlDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].labourlId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})}),s()(i,"importExcel",function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(u.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingLabourlDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(p.a)("tIcBuWeldingLabourlDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})}),s()(i,"downloadBlank",function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(u.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingLabourlDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})}),s()(i,"update",function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuWeldingLabourlDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(p.a)("tIcBuWeldingLabourlDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")}),s()(i,"edit",function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuWeldingLabourlDI"),this.$refs.editDialog.getdialogFrom(t)}),s()(i,"submission",function(){var e=this;f.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].labourlId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"labourlId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})}),s()(i,"findcardate",function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}),i),watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(p.a)("tIcBuWeldingLabourlDI",e,"moveChart")}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var g=a("VU/8")(b,h,!1,function(e){a("m1ne")},"data-v-69598aae",null);t.default=g.exports},"L+EF":function(e,t){},"L/27":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("MIYg"),o={name:"appDialog",props:{},data:function(){return{buttonLoad:!1,placeholder:"",titleName:"",dialogVisible:!1,stepid:"",currstepid:"",nodeguid:"",wfid:"",ationtype:"-1",business_no:"",businessdata:"",process_name:"",steps:[],choosesteps:[],stepUser:[],setpname:"",userlist:[],opinion:""}},methods:{open:function(e){var t=this,a=this;this.titleName=e.titlename,this.stepid=e.stepid,this.wfid=e.wfid,this.business_no=e.business_no,this.ationtype=e.ationtype,this.process_name=e.process_name,this.currstepid=e.currstepid,this.nodeguid=e.nodeguid,this.businessdata=e.businessdata,this.placeholder=e.placeholder;var i={wfid:this.currstepid,currstepid:this.stepid,business_data:this.businessdata,business_no:this.business_no},s=encodeURIComponent(r()(i));this.$api.expapi.getNextStepInfo({action:this.ationtype,showd:!1,nextJson:s}).then(function(e){if("1"===e.result)if(e.rows.steps){a.steps.length=0,a.steps=e.rows.steps[0].choosesteps,a.choosesteps.length=0;for(var i=0;i<a.steps.length;i++)a.choosesteps.push({value:a.steps[i].id,label:a.steps[i].name});a.choosesteps.length>0&&(a.setpname=a.choosesteps[0].value,a.onSetpChange(a.setpname))}else t.$message.error("获取工作流下一步错误！！！");else{var r=n.a.ERRORINFO[e.msg];t.$message.error(r)}}).catch(function(e){t.$message.error(e.message)}),this.dialogVisible=!0},onActionEvent:function(){var e=this;this.buttonLoad=!0;var t={userinfo:{userid:sessionStorage.getItem("userid"),username:sessionStorage.getItem("user")},wfid:this.nodeguid,currstepid:this.currstepid,actiontype:this.ationtype,priotiry:"-1",cc:[],handler_text:this.opinion,attch:[],process_name:this.process_name,business_data:this.businessdata,business_no:this.business_no,nextstep:[{stepid:this.setpname,auditor:this.getAuditor(this.setpname,this.userlist)}]},a=encodeURIComponent(r()(t));this.$api.expapi.handleWFAction({subJson:a}).then(function(t){if("1"!==t.result){var a=n.a.ERRORINFO[t.msg];return e.$message.error(a),void(e.buttonLoad=!1)}e.$emit("onDialogClose"),e.close()}).catch(function(t){e.$message.error(t.message),e.buttonLoad=!1})},onSetpChange:function(e){for(var t=0;t<this.steps.length;t++)if(this.steps[t].id===e){this.stepUser.length=0;for(var a=0;a<this.steps[t].user.userlist.length;a++)this.stepUser.push({value:this.steps[t].user.userlist[a].user_id,label:this.steps[t].user.userlist[a].user_name})}this.userlist.length=0,this.stepUser.length>0&&this.userlist.push(this.stepUser[0].value)},close:function(){this.dialogVisible=!1},getAuditor:function(e,t){for(var a=this,i=[],r=0;r<this.steps.length;r++)if(this.steps[r].id===e)for(var s=function(e){var s=a.steps[r].user.userlist.filter(function(a){return a.user_id===t[e]});s.length>0&&i.push({userid:s[0].user_id,username:s[0].user_name})},l=0;l<t.length;l++)s(l);return i}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.titleName,"close-on-click-modal":!1,visible:e.dialogVisible,center:"",width:"45%","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("span",[e._v("\n            下一步骤：\n            "),a("el-select",{staticStyle:{width:"25%"},attrs:{placeholder:"请选择下一步骤"},on:{change:e.onSetpChange},model:{value:e.setpname,callback:function(t){e.setpname=t},expression:"setpname"}},e._l(e.choosesteps,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("span",[e._v("\n            下一步责任人：\n            "),a("el-select",{staticStyle:{width:"52.5%"},attrs:{placeholder:"下一步责任人",multiple:"","collapse-tags":""},model:{value:e.userlist,callback:function(t){e.userlist=t},expression:"userlist"}},e._l(e.stepUser,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)]),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:2,placeholder:e.placeholder,maxlength:50},model:{value:e.opinion,callback:function(t){e.opinion=t},expression:"opinion"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini",loading:e.buttonLoad},on:{click:e.onActionEvent}},[e._v(" "+e._s(e.titleName)+" ")])],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(o,c,!1,function(e){a("q4f+")},"data-v-6c75e510",null).exports,m={name:"backDialog",props:{},data:function(){return{buttonLoad:!1,placeholder:"",titleName:"",dialogVisible:!1,stepid:"",currstepid:"",nodeguid:"",wfid:"",ationtype:"-1",business_no:"",businessdata:"",process_name:"",reject:[],allReject:[],auditors:[],rejectSelect:"",userlist:"",opinion:""}},methods:{open:function(e){var t=this,a=this;this.titleName=e.titlename,this.stepid=e.stepid,this.wfid=e.wfid,this.business_no=e.business_no,this.ationtype=e.ationtype,this.process_name=e.process_name,this.currstepid=e.currstepid,this.nodeguid=e.nodeguid,this.businessdata=e.businessdata,this.placeholder=e.placeholder,this.$api.expapi.getBackInfo({action:this.ationtype,wfid:this.currstepid,currstepid:this.stepid,stepid:this.stepid}).then(function(e){if("1"===e.result){if(e.rows.reject&&e.rows.auditors){a.allReject=e.rows.reject;for(var i=0;i<e.rows.reject.length;i++)a.reject.push({value:e.rows.reject[i].ROLLBACK_STEP_GUID,label:e.rows.reject[i].STEP_NAME});t.reject.length>0&&(t.rejectSelect=a.reject[0].value);for(var r=0;r<e.rows.auditors.length;r++)a.auditors.push({value:e.rows.auditors[r].user_id,label:e.rows.auditors[r].user_name});t.auditors.length>0&&(t.userlist=a.auditors[0].value)}}else{var s=n.a.ERRORINFO[e.msg];t.$message.error(s)}}).catch(function(e){t.$message.error(e.message)}),this.dialogVisible=!0},onActionEvent:function(){var e=this;this.buttonLoad=!0;var t=this.getReject(this.rejectSelect),a={userinfo:{userid:sessionStorage.getItem("userid"),username:sessionStorage.getItem("user")},wfid:this.nodeguid,currstepid:this.stepid,actiontype:this.ationtype,priotiry:"-1",cc:[],handler_text:this.opinion,attch:[],process_name:this.process_name,business_data:this.businessdata,business_no:this.business_no,back_jump:t.IS_JUMP,back_step:t.ROLLBACK_STEP_GUID,back_auditorsId:this.userlist},i=encodeURIComponent(r()(a));this.$api.expapi.handleWFAction({subJson:i}).then(function(t){if("1"!==t.result){var a=n.a.ERRORINFO[t.msg];return e.$message.error(a),void(e.buttonLoad=!1)}e.$emit("onDialogClose"),e.close()}).catch(function(t){e.$message.error(t.message),e.buttonLoad=!1})},close:function(){this.dialogVisible=!1},getReject:function(e){for(var t={ROLLBACK_STEP_GUID:"",IS_JUMP:0},a=0;a<this.allReject.length;a++)if(this.allReject[a].ROLLBACK_STEP_GUID===e){t.ROLLBACK_STEP_GUID=this.allReject[a].ROLLBACK_STEP_GUID,t.IS_JUMP=this.allReject[a].IS_JUMP;break}return t}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.titleName,"close-on-click-modal":!1,visible:e.dialogVisible,center:"",width:"45%","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("span",[e._v("\n            驳回步骤：\n            "),a("el-select",{staticStyle:{width:"25%"},attrs:{placeholder:"请选择驳回步骤"},model:{value:e.rejectSelect,callback:function(t){e.rejectSelect=t},expression:"rejectSelect"}},e._l(e.reject,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("span",[e._v("\n            驳回责任人：\n            "),a("el-select",{staticStyle:{width:"52.5%"},attrs:{placeholder:"请选择驳回责任人"},model:{value:e.userlist,callback:function(t){e.userlist=t},expression:"userlist"}},e._l(e.auditors,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)]),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:2,placeholder:e.placeholder,maxlength:50},model:{value:e.opinion,callback:function(t){e.opinion=t},expression:"opinion"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini",loading:e.buttonLoad},on:{click:e.onActionEvent}},[e._v(" "+e._s(e.titleName)+" ")])],1)])],1)},staticRenderFns:[]};var p=a("VU/8")(m,u,!1,function(e){a("50gk")},"data-v-1572975c",null).exports,f=a("lbHh"),b=a.n(f),h=a("7t+N"),g=a.n(h),v=a("QPKf");function y(e){var t=b.a.get("token"),a=this,i={headers:e.formType?v.a.formHeaders:{token:t,"Content-Type":"application/json;charset=UTF-8"},url:v.a.baseUrl,type:"GET",async:!1,data:{},timeout:v.a.timeout,dataType:"json",beforeSend:function(e){},success:function(t,a,i){e.xyjSuccess&&"function"==typeof e.xyjSuccess&&e.xyjSuccess(t)},error:function(t,i){switch(i){case 400:e.xyjError&&("function"==typeof e.xyjError?e.xyjError(i,"请求错误"):a.$message.error("请求错误"));break;case 401:e.xyjError&&("function"==typeof e.xyjError?e.xyjError(i,"未授权，请登录"):a.$message.error("未授权，请登录"));break;case 403:e.xyjError&&("function"==typeof e.xyjError?e.xyjError(i,"拒绝访问"):a.$message.error("拒绝访问"));break;case 404:e.xyjError&&("function"==typeof e.xyjError?e.xyjError(i,"请求地址出错: "+err.response.config.url):a.$message.error("请求地址出错: "+err.response.config.url));break;case 408:e.xyjError&&("function"==typeof e.xyjError?e.xyjError(i,"请求超时"):a.$message.error("请求超时"));break;case 500:e.xyjError&&("function"==typeof e.xyjError?e.xyjError(i,"服务器内部错误"):a.$message.error("服务器内部错误"));break;case 501:e.xyjError&&("function"==typeof e.xyjError?e.xyjError(i,"服务未实现"):a.$message.error("服务未实现"));break;case 502:e.xyjError&&("function"==typeof e.xyjError?e.xyjError(i,"网关错误"):a.$message.error("网关错误"));break;case 503:e.xyjError&&("function"==typeof e.xyjError?e.xyjError(i,"服务不可用"):a.$message.error("服务不可用"));break;case 504:e.xyjError&&("function"==typeof e.xyjError?e.xyjError(i,"网关超时"):a.$message.error("网关超时"));break;case 505:e.xyjError&&("function"==typeof e.xyjError?e.xyjError(i,"HTTP版本不受支持"):a.$message.error("HTTP版本不受支持"))}},complete:function(){}};l()(i,e),g.a.ajax(i)}var I=a("d3+K"),$=I.a.mxGraph,w=I.a.mxClient,x=I.a.mxCodec,U=I.a.mxUtils,B=I.a.mxConstants,C=I.a.mxGraphModel,T=I.a.mxGraphHandler,k=I.a.mxEdgeStyle,_={name:"MyTasks",components:{OkDaialog:d,backDialog:p},data:function(){return{activeName:"wait",page:1,size:20,counttotal:0,hasPagination:!0,myLaunchData:[],myWaitData:[],myReadData:[],myDraftData:[],myFollowData:[],loadWait:!1,loadLaunch:!1,loadRead:!1,loaddraft:!1,loadFollow:!1,findFunc:null,tipsVisible:!1,messageinfo:"提示框显示信息",isOpen:!1,ApprovalCaption:"展开",wfid:"",process_name:"",Pending_type:-1,action_type:-1,stepid:"",currstepid:"",nodeguid:"",business_no:"",businessdata:null,actionlist:[],waitDialogTitle:"待办对话框",waitdialogVisible:!1,currentNodeAuditorName:"",prevnodes:[],tableConfig:{hasSelect:!1,hasOperation:!1,tableAttrs:{width:"800px"},operationAttrs:{width:"130px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcDbPlatform",sorter:[{direction:"ASC",property:"id"}],bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcDbPlatform/query",method:"post",notCondition:!0},InitQuery:{},customQuery:{}}}},methods:{onClickApprovalProcess:function(){this.isOpen=!this.isOpen;var e=document.querySelector(".approvalProcess"),t=document.querySelectorAll(".el-timeline>.el-timeline-item")[0];this.isOpen?(e.style.height=t.clientHeight*this.prevnodes.length+"px",this.ApprovalCaption="收起"):(this.ApprovalCaption="展开",e.style.height=t.clientHeight+"px")},paginationSizes:function(){return[10,20,30,40,50]},handleSizeChange:function(e){this.size!==e&&(this.page=1,this.size=e,this.findFunc())},handleCurrentChange:function(e){this.page!==e&&(this.page=e,this.findFunc())},getDetailed:function(e){for(var t=this,a=b.a.get("token"),i=function(i){y({url:t.global.baseUrl+"/mp/wfengine/step/stephandler.do",formType:!0,data:{isstart:0,wfid:e[i].PROCESS_MODULE_ID,nodeid:e[i].NODE_GUID,formname:e[i].FORMINFO,pending_type:e[i].PENDING_TYPE,token:a},xyjSuccess:function(t){"1"===t.result?e[i].stephandler=t.rows:this.$message.error(t.msg)}})},r=0;r<e.length;r++)i(r)},analysisData:function(e){for(var t=this,a=[],i=function(i){if(!e[i].stephandler.businessdata)return t.$message.error("工作流没有返回业务数据"),"continue";if(!(e[i].stephandler.businessdata instanceof Array))return t.$message.error("工作流返回业务数据类型错误"),"continue";if(e[i].stephandler.businessdata.length<=0)return t.$message.error("工作流没有返回任何业务数据"),"continue";var r=e[i].stephandler.businessdata[0].BUSINESSDATA;if(!r)return t.$message.error("工作流返回无效空业务数据"),"continue";var s=null;try{s=JSON.parse(r)}catch(e){return t.$message.error("业务数据反序列化失败"),"continue"}var l=a.filter(function(e){return e.carversionId===s.carversionId});e[i].tablename=s.tablename,e[i].bQuery=s.bQuery,e[i].hostUrl=s.hostUrl,e[i].fieldname=s.fieldname,l.length<=0?(s.approval=[],s.approval.push(e[i]),a.push(s)):l[0].approval.push(e[i])},r=0;r<e.length;r++)i(r);return a},findLaunch:function(){var e=this;this.loadLaunch=!0,this.$api.expapi.launch({pagesize:this.size,pageindex:this.page,sort:"desc",sortfield:"LAST_UPDATED_TIME",qmode:0,isqueryhistory:0}).then(function(t){if("1"!==t.result){var a=n.a.ERRORINFO[t.msg];return e.$message.error(a),void(e.loadLaunch=!1)}for(var i=0;i<t.rows.length;i++)t.rows[i].clickState=!1;e.myLaunchData=t.rows,e.counttotal=parseInt(t.records),e.loadLaunch=!1}).catch(function(t){e.$message.error(t.message),e.loadLaunch=!1})},findWait:function(){var e=this;this.loadWait=!0,this.$api.expapi.pending({pagesize:this.size,pageindex:this.page,sort:"desc",sortfield:"psrocessStartTime",qmode:0}).then(function(t){if("1"!==t.result){var a=n.a.ERRORINFO[t.msg];return e.$message.error(a),void(e.loadWait=!1)}e.getDetailed(t.rows),e.myWaitData=e.analysisData(t.rows),e.counttotal=parseInt(t.records),e.loadWait=!1}).catch(function(t){e.$message.error(t.message),e.loadWait=!1})},findRead:function(){var e=this,t=this;this.loadRead=!0,this.$api.expapi.already({pagesize:this.size,pageindex:this.page,sort:"desc",sortfield:"LAST_UPDATED_TIME",qmode:0,isqueryhistory:0,isquerypendshare:0}).then(function(a){if("1"!==a.result){var i=n.a.ERRORINFO[a.msg];return e.$message.error(i),void(e.loadRead=!1)}for(var r=0;r<a.rows.length;r++)a.rows[r].clickState=!1;e.myReadData=a.rows,t.counttotal=parseInt(a.records),e.loadRead=!1}).catch(function(t){e.$message.error(t.message),e.loadRead=!1})},findFollow:function(){var e=this;this.loadFollow=!0,this.$api.expapi.attention({pagesize:this.size,pageindex:this.page,sort:"desc",sortfield:"LAST_UPDATED_TIME",strisqueryhistory:0,qmode:0,strattention:1}).then(function(t){if("1"!==t.result){var a=n.a.ERRORINFO[t.msg];return e.$message.error(a),void(e.loadFollow=!1)}for(var i=0;i<t.rows.length;i++)t.rows[i].clickState=!1;e.myFollowData=t.rows,e.counttotal=parseInt(t.records),e.loadFollow=!1}).catch(function(t){e.$message.error(t.message),e.loadFollow=!1})},findDraft:function(){var e=this,t=this;this.loaddraft=!0,this.$api.expapi.draft({pagesize:this.size,pageindex:this.page,sort:"desc",sortfield:"CREATE_TIME",qmode:0}).then(function(a){if("1"!==a.result){var i=n.a.ERRORINFO[a.msg];return e.$message.error(i),void(e.loaddraft=!1)}e.myDraftData=a.rows,t.counttotal=parseInt(a.records),e.loaddraft=!1}).catch(function(t){e.$message.error(t.message),e.loaddraft=!1})},onTabClick:function(e,t){"wait"===e.name?this.findFunc=this.findWait:"launch"===e.name?this.findFunc=this.findLaunch:"read"===e.name?this.findFunc=this.findRead:"follow"===e.name?this.findFunc=this.findFollow:"draft"===e.name&&(this.findFunc=this.findDraft),this.page=1,this.findFunc()},formatProcessStatus:function(e,t){switch(e.PROCESS_STATUS){case 0:return 0;case 1:return"处理中";default:return e.PROCESS_STATUS}},onFollow:function(e){var t=this;e.clickState=!0;var a="0"===e.ATTENTION?"1":"0";this.$api.expapi.updateAttention({attention:e.ATTENTION,process_guids:e.PROCESS_GUID}).then(function(i){if("1"!==i.result){var r=n.a.ERRORINFO[i.msg];return t.$message.error(r),e.clickState=!1,!1}return e.ATTENTION=a,e.clickState=!1,!0}).catch(function(a){return t.$message.error(a.message),e.clickState=!1,!1})},formatCurrentStepName:function(e,t){return e.CURRENT_STEP_NAME+"("+e.AUDITOR_NAME+")"},onSee:function(e){this.process_name=e.PROCESS_NAME,this.Pending_type=e.PENDING_TYPE,this.stepid=e.STEP_GUID,this.currstepid=e.NODE_GUID,this.nodeguid=e.NODE_GUID,e.stephandler.currentnode.length>0?this.currentNodeAuditorName=e.stephandler.currentnode[0].AUDITOR_NAME:this.currentNodeAuditorName="",this.prevnodes=e.stephandler.nodes.reverse(),this.wfid=e.PROCESS_MODULE_ID,this.actionlist=e.stephandler.actionlist,this.business_no=e.stephandler.businessno,e.stephandler.businessdata.length>0?(this.businessdata=e.stephandler.businessdata[0].BUSINESSDATA,this.waitDialogTitle=e.PROCESS_MODULE_NAME,this.tableConfig.tableName=e.tablename,this.tableConfig.hostUrl=e.hostUrl,l()(this.tableConfig.bQuery,e.bQuery),l()(this.tableConfig.InitQuery,{0:{field0:e.fieldname,gx0:"EQUAL",value0:this.business_no,andor0:"AND"}}),l()(this.tableConfig.customQuery,{100:{field100:e.fieldname,gx100:"EQUAL",value100:this.business_no,andor100:"AND"}}),this.waitdialogVisible=!0,this.getprocessgraph()):this.$message.warning("审批数据不存请核实工作流")},onSeeLaunch:function(e){var t=b.a.get("token"),a=this;y({url:this.global.baseUrl+"/mp/wfengine/step/stephandler.do",formType:!0,data:{isstart:0,wfid:e.PROCESS_GUID,nodeid:e.NODE_GUID,formname:e.FORMINFO,pending_type:e.PENDING_TYPE,token:t},xyjSuccess:function(t){if("1"===t.result)if(a.process_name=e.PROCESS_NAME,a.Pending_type=e.PENDING_TYPE,a.stepid=e.STEP_GUID,a.currstepid=e.NODE_GUID,a.nodeguid=e.NODE_GUID,t.rows.currentnode.length>0?a.currentNodeAuditorName=t.rows.currentnode[0].AUDITOR_NAME:a.currentNodeAuditorName="",a.prevnodes=t.rows.nodes.reverse(),a.wfid=e.NODE_GUID,a.actionlist=[],a.business_no=t.rows.businessno,t.rows.businessdata.length>0){a.businessdata=t.rows.businessdata[0].BUSINESSDATA,a.waitDialogTitle=e.PROCESS_MODULE_NAME;var i=null;try{i=JSON.parse(a.businessdata)}catch(e){return void a.$message.error("业务数据反序列化失败")}a.tableConfig.tableName=i.tablename,a.tableConfig.hostUrl=i.hostUrl,l()(a.tableConfig.bQuery,i.bQuery),l()(a.tableConfig.InitQuery,{0:{field0:i.fieldname,gx0:"EQUAL",value0:a.business_no,andor0:"AND"}}),l()(a.tableConfig.customQuery,{100:{field100:i.fieldname,gx100:"EQUAL",value100:a.business_no,andor100:"AND"}}),a.waitdialogVisible=!0,a.getprocessgraph()}else a.$message.warning("审批数据不存请核实工作流");else a.$message.error(t.msg)}})},onActionEvent:function(e){switch(e.ACTION_TYPE){case 1:case 2:this.$refs.actionclick.open({wfid:this.wfid,stepid:this.stepid,business_no:this.business_no,ationtype:e.ACTION_TYPE,titlename:e.NAME,process_name:this.process_name,currstepid:this.currstepid,nodeguid:this.nodeguid,businessdata:this.businessdata,placeholder:"请输入"+e.NAME+"意见"},e.NAME);break;case 3:case 4:case 5:break;case 6:this.$refs.backclick.open({wfid:this.wfid,stepid:this.stepid,business_no:this.business_no,ationtype:e.ACTION_TYPE,titlename:e.NAME,process_name:this.process_name,currstepid:this.currstepid,nodeguid:this.nodeguid,businessdata:this.businessdata,placeholder:"请输入"+e.NAME+"意见"},e.NAME);break;case 7:this.action_type=e.ACTION_TYPE,this.messageinfo="您确认要作废此业务数据吗？",this.tipsVisible=!0}},toVoid:function(){var e=this,t={userinfo:{userid:sessionStorage.getItem("userid"),username:sessionStorage.getItem("user")},wfid:this.nodeguid,currstepid:this.stepid,actiontype:this.action_type,priotiry:"-1",cc:[],handler_text:"作废",attch:[],process_name:this.process_name,business_data:this.businessdata,business_no:this.business_no,nextstep:[]},a=encodeURIComponent(r()(t));this.$api.expapi.handleWFAction({subJson:a}).then(function(t){if("1"===t.result)e.tipsVisible=!1,e.onDialogClose();else{var a=n.a.ERRORINFO[t.msg];e.$message.error(a)}}).catch(function(t){e.$message.error(t.message)})},formatShow:function(e){switch(e.PENDING_TYPE){case 0:return"我的发起";case 1:return"审批";case 2:return"会签";case 3:return"结束";case 4:return"抄送";case 5:return"沟通";case 6:return"完成";case 7:return"作废";case 8:return"不通过";case 9:return"发子流程";case 10:return"重新发起";case 11:return"草稿";default:return e.PROCESS_STATUS}},getprocessgraph:function(){var e=this,t=this;this.$api.expapi.getprocessgraph({wfid:this.wfid,nodeid:this.nodeguid}).then(function(a){if("1"===a.result)t.graphContainer(a.rows.graphxml);else{var i=n.a.ERRORINFO[a.msg];e.$message.error(i)}}).catch(function(t){e.$message.error(t.message)})},graphContainer:function(e){if(w.isBrowserSupported()){var t=document.getElementById("graphContainer");t.innerHTML="";var a=new C,i=new $(t,a);i.getLabel=function(e){var t=this.labelsVisible?this.convertValueToString(e):"",a=this.model.getGeometry(e);if(null!=t&&this.model.isVertex(e)){if(null!=e.children&&e.children.length>0)for(var r=0;r<e.children.length;r++)i.getLabel(e.children[r]);if(2==this.getCellStyle(e)[B.STYLE_FONTSTYLE])return""}return"true"===a.isConnector?t="":a.StepName&&a.StepName.length>0&&(t=a.StepName),t},i.setResizeContainer(!0),i.setEnabled(!0),T.prototype.setMoveEnabled(!1),i.setCellsResizable(!1),i.setCellsEditable(!1),i.setConnectable(!1);var r=i.getStylesheet().getDefaultEdgeStyle();r[B.STYLE_ROUNDED]=!0,r[B.STYLE_EDGE]=k.ElbowConnector,i.getModel().beginUpdate();var s=U.parseXml(e);new x(s.documentElement).decode(s.documentElement,i.getModel()),i.getModel().endUpdate(),i.fit(),i.center(!0,!0,.5,.5);var l=i.getView().getScale();i.zoomTo(Math.round(l/2))}else U.error("Browser is not supported!",200,!1)},onDialogClose:function(){this.waitdialogVisible=!1,this.findFunc()}},created:function(){this.findFunc=this.findWait,this.findWait()}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"我的待办",name:"wait"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadWait,expression:"loadWait"}],staticStyle:{width:"100%"},attrs:{data:e.myWaitData,border:"",size:"mini","element-loading-text":"处理中请稍后","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"45",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+(e.page-1)*e.size+1)+" ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"left",label:"操作",width:"150","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.onSee(t.row)}}},[e._v("批准")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.onSee(t.row)}}},[e._v("详情")])]}}])}),e._v(" "),a("el-table-column",{attrs:{type:"expand",label:"展开","show-overflow-tooltip":"",width:"50",fixed:"left",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.row.approval,border:"",size:"mini","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"45",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+(e.page-1)*e.size+1)+" ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"left",label:"操作",width:"100","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.onSee(t.row)}}},[e._v(e._s(e.formatShow(t.row)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"OWNER_NAME",label:"发起人",width:"180","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"INITIATE_DATETIME",label:"发起时间",width:"200","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"PROCESS_MODULE_NAME",label:"流程名称",width:"200","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"PENDING_TITLE",label:"主题","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"CURRENT_STEP_NAME",label:"当前步骤",width:"350","header-align":"center","show-overflow-tooltip":""}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"versio",label:"版本号",width:"70","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"cartyp",label:"车型",width:"100","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"stage",label:"阶段",width:"120","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"platform",label:"平台",width:"80","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"actoryName",label:"工厂名称","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"sopdate",label:"SOP日期",width:"160","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ncontractdate",label:"合同日期",width:"160","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"basecar",label:"基点车",width:"100","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"basestage",label:"节点车阶段",width:"120","header-align":"center","show-overflow-tooltip":""}})],1),e._v(" "),e.hasPagination?a("el-pagination",{staticStyle:{"text-align":"right",padding:"10px 0"},attrs:{"current-page":e.page,"page-sizes":e.paginationSizes(),"page-size":e.size,total:e.counttotal,layout:"total,sizes,prev,pager,next,jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"我发起的",name:"launch"}},[a("transition",{key:"2",attrs:{name:"fade"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadLaunch,expression:"loadLaunch"}],staticStyle:{width:"100%"},attrs:{data:e.myLaunchData,border:"",size:"mini","element-loading-text":"处理中请稍后","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"45",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+(e.page-1)*e.size+1)+" ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"40",fixed:"left",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"left",label:"操作",width:"165",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.onSeeLaunch(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",loading:t.row.clickState},on:{click:function(a){e.onFollow(t.row)}}},[e._v(e._s("0"===t.row.ATTENTION?"关注":"取注"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"INITIATE_DATETIME",label:"发起时间",width:"180","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"PROCESS_MODULE_NAME",label:"流程名称",width:"200","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"PENDING_TITLE",label:"主题","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"CURRENT_STEP_NAME",label:"当前步骤",width:"350","header-align":"center","show-overflow-tooltip":"",formatter:e.formatCurrentStepName}}),e._v(" "),a("el-table-column",{attrs:{prop:"PROCESS_STATUS",label:"状态",width:"200","header-align":"center","show-overflow-tooltip":"",formatter:e.formatProcessStatus}})],1)],1),e._v(" "),e.hasPagination?a("el-pagination",{staticStyle:{"text-align":"right",padding:"10px 0"},attrs:{"current-page":e.page,"page-sizes":e.paginationSizes(),"page-size":e.size,total:e.counttotal,layout:"total,sizes,prev,pager,next,jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"我审阅的",name:"read"}},[a("transition",{key:"3",attrs:{name:"fade"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadRead,expression:"loadRead"}],staticStyle:{width:"100%"},attrs:{data:e.myReadData,border:"",size:"mini","element-loading-text":"处理中请稍后","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"45",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+(e.page-1)*e.size+1)+" ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"40",fixed:"left",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"left",label:"操作",width:"165",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.onSeeLaunch(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",loading:t.row.clickState},on:{click:function(a){e.onFollow(t.row)}}},[e._v(e._s("0"===t.row.ATTENTION?"关注":"取注"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"OWNER_NAME",label:"发起人",width:"120","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"INITIATE_DATETIME",label:"发起时间",width:"180","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"PROCESS_MODULE_NAME",label:"流程名称",width:"200","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"PENDING_TITLE",label:"主题","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"CURRENT_STEP_NAME",label:"当前步骤",width:"350","header-align":"center","show-overflow-tooltip":"",formatter:e.formatCurrentStepName}}),e._v(" "),a("el-table-column",{attrs:{prop:"PROCESS_STATUS",label:"状态",width:"200","header-align":"center","show-overflow-tooltip":"",formatter:e.formatProcessStatus}})],1)],1),e._v(" "),e.hasPagination?a("el-pagination",{staticStyle:{"text-align":"right",padding:"10px 0"},attrs:{"current-page":e.page,"page-sizes":e.paginationSizes(),"page-size":e.size,total:e.counttotal,layout:"total,sizes,prev,pager,next,jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"我关注的",name:"follow"}},[a("transition",{key:"4",attrs:{name:"fade"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadFollow,expression:"loadFollow"}],staticStyle:{width:"100%"},attrs:{data:e.myFollowData,border:"",size:"mini","element-loading-text":"处理中请稍后","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"45",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+(e.page-1)*e.size+1)+" ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"40",fixed:"left",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"left",label:"操作",width:"165",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.onSeeLaunch(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",loading:t.row.clickState},on:{click:function(a){e.onFollow(t.row)}}},[e._v(e._s("0"===t.row.ATTENTION?"关注":"取注"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"OWNER_NAME",label:"发起人",width:"120","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"INITIATE_DATETIME",label:"发起时间",width:"180","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"PROCESS_MODULE_NAME",label:"流程名称",width:"200","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"PENDING_TITLE",label:"主题","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"CURRENT_STEP_NAME",label:"当前步骤",width:"180","header-align":"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"PROCESS_STATUS",label:"状态",width:"80","header-align":"center","show-overflow-tooltip":"",formatter:e.formatProcessStatus}})],1)],1),e._v(" "),e.hasPagination?a("el-pagination",{staticStyle:{"text-align":"right",padding:"10px 0"},attrs:{"current-page":e.page,"page-sizes":e.paginationSizes(),"page-size":e.size,total:e.counttotal,layout:"total,sizes,prev,pager,next,jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)],1),e._v(" "),a("transition",{attrs:{name:"fade"}},[e.waitdialogVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.waitDialogTitle,visible:e.waitdialogVisible,fullscreen:""},on:{"update:visible":function(t){e.waitdialogVisible=t}}},[a("div",{staticStyle:{"padding-bottom":"10px"}},[a("el-row",{staticStyle:{"text-align":"left","margin-bottom":"5px"}},[e._v("\n            当前责任人： "),a("span",[e._v(e._s(e.currentNodeAuditorName))])]),e._v(" "),a("el-row",{staticStyle:{"text-align":"left"}},[e._v("\n            流程记录：\n          ")]),e._v(" "),a("el-row",{staticClass:"approvalProcess",attrs:{gutter:20}},[a("el-timeline",e._l(e.prevnodes,function(t,i){return a("el-timeline-item",{key:i,staticStyle:{"text-align":"left"},attrs:{timestamp:t.HANDLE_DATETIME,placement:"top",type:"success"}},[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:8}},[a("el-col",{attrs:{span:18}},[a("div",[a("strong",[e._v("责任人：")]),e._v(e._s(t.AUDITOR_NAME)+e._s(t.ORG_NAME))]),e._v(" "),a("div",{staticStyle:{color:"#909399","margin-top":"5px"}},[e._v(" 抄送："+e._s(t.Attachments))])])],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:8}},[a("div",[a("strong",[e._v("操作：")]),e._v(e._s(t.STEP_NAME)+" "+e._s(t.Operation))]),e._v(" "),a("div",{staticStyle:{color:"#909399","margin-top":"5px"}},[e._v("附件 ："+e._s(t.Attachments))])]),e._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:8}},[a("div",[a("strong",[e._v("意见：")]),e._v(e._s(t.HANDLETEXT))]),e._v(" "),a("div",{staticStyle:{color:"#909399","margin-top":"5px"}},[e._v("下一步责任人："+e._s(t.NextAuditors))])])],1)],1)],1)}))],1),e._v(" "),a("div",[e.prevnodes.length>1?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.onClickApprovalProcess}},[e._v(e._s(e.ApprovalCaption))]):e._e()],1)],1),e._v(" "),e.waitdialogVisible?a("xyj-table",e._b({ref:"findtable",attrs:{id:"1"}},"xyj-table",e.tableConfig,!1),[a("template",{slot:"xyjcontainer"},[a("el-row",{attrs:{type:"flex",justify:"start"}},e._l(e.actionlist,function(t){return a("el-button",{key:t.ID,attrs:{type:"primary",size:"mini"},on:{click:function(a){e.onActionEvent(t)}}},[e._v("\n                  "+e._s(t.NAME)+"\n                ")])}))],1)],2):e._e(),e._v(" "),a("div",{ref:"xyjsvg",staticStyle:{width:"100%",margin:"0 auto"},attrs:{id:"graphContainer"}}),e._v(" "),a("ok-daialog",{ref:"actionclick",attrs:{name:"actionclick"},on:{onDialogClose:e.onDialogClose}}),e._v(" "),a("back-dialog",{key:"2",ref:"backclick",attrs:{name:"backclick"},on:{onDialogClose:e.onDialogClose}}),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.tipsVisible,"append-to-body":"","close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.tipsVisible=t}}},[a("span",[e._v(e._s(this.messageinfo))]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.toVoid}},[e._v("确 定")])],1)])],1):e._e()],1)],1)},staticRenderFns:[]};var S=a("VU/8")(_,D,!1,function(e){a("VYEP")},"data-v-70d946d8",null);t.default=S.exports},LBp1:function(e,t){},LS0E:function(e,t){},LzwA:function(e,t){},MNhb:function(e,t){},MXW0:function(e,t){},N244:function(e,t){},N5r1:function(e,t){},NBKY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{rules:e.rules,size:"small",model:e.form,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"APP名称：",prop:"appName"}},[a("el-input",{model:{value:e.form.appName,callback:function(t){e.$set(e.form,"appName",t)},expression:"form.appName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目访问路径：",prop:"notifyUrl"}},[a("el-input",{model:{value:e.form.notifyUrl,callback:function(t){e.$set(e.form,"notifyUrl",t)},expression:"form.notifyUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信appid：",prop:"wxappid"}},[a("el-input",{model:{value:e.form.wxappid,callback:function(t){e.$set(e.form,"wxappid",t)},expression:"form.wxappid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信appSecret：",prop:"wxappsecret"}},[a("el-input",{model:{value:e.form.wxappsecret,callback:function(t){e.$set(e.form,"wxappsecret",t)},expression:"form.wxappsecret"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信使用商户号：",prop:"mchid"}},[a("el-input",{model:{value:e.form.mchid,callback:function(t){e.$set(e.form,"mchid",t)},expression:"form.mchid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务器ip：",prop:"ipspbillcreateip"}},[a("el-input",{model:{value:e.form.ipspbillcreateip,callback:function(t){e.$set(e.form,"ipspbillcreateip",t)},expression:"form.ipspbillcreateip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信KpiKey：",prop:"wxKpikey"}},[a("el-input",{model:{value:e.form.wxKpikey,callback:function(t){e.$set(e.form,"wxKpikey",t)},expression:"form.wxKpikey"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付宝pld：",prop:"zfbPid"}},[a("el-input",{model:{value:e.form.zfbPid,callback:function(t){e.$set(e.form,"zfbPid",t)},expression:"form.zfbPid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付宝appid：",prop:"zfbAppid"}},[a("el-input",{model:{value:e.form.zfbAppid,callback:function(t){e.$set(e.form,"zfbAppid",t)},expression:"form.zfbAppid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付宝应用私钥：",prop:"privateKey"}},[a("el-input",{attrs:{rows:5,type:"textarea"},model:{value:e.form.privateKey,callback:function(t){e.$set(e.form,"privateKey",t)},expression:"form.privateKey"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付宝应用公钥：",prop:"publicKey"}},[a("el-input",{attrs:{rows:5,type:"textarea"},model:{value:e.form.publicKey,callback:function(t){e.$set(e.form,"publicKey",t)},expression:"form.publicKey"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付宝公钥：",prop:"alipayPublicKey"}},[a("el-input",{attrs:{rows:5,type:"textarea"},model:{value:e.form.alipayPublicKey,callback:function(t){e.$set(e.form,"alipayPublicKey",t)},expression:"form.alipayPublicKey"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.open2}},[e._v(e._s(e.$t("action.submit")))])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")({name:"pay",data:function(){return{form:{id:"",appName:"",wxappid:"",wxappsecret:"",mchid:"",ipspbillcreateip:"",notifyUrl:"",wxKpikey:"",zfbPid:"",zfbAppid:"",privateKey:"",publicKey:"",alipayPublicKey:""},rules:{appName:[{required:!0,message:"请输入活动名称",trigger:"blur"}],wxappid:[{required:!0,message:"请输入活动名称",trigger:"blur"}],wxappsecret:[{required:!0,message:"请输入活动名称",trigger:"blur"}],mchid:[{required:!0,message:"请输入活动名称",trigger:"blur"}],ipspbillcreateip:[{required:!0,message:"请输入活动名称",trigger:"blur"}],notifyUrl:[{required:!0,message:"请输入活动名称",trigger:"blur"}],wxKpikey:[{required:!0,message:"请输入活动名称",trigger:"blur"}],zfbPid:[{required:!0,message:"请输入活动名称",trigger:"blur"}],zfbAppid:[{required:!0,message:"请输入活动名称",trigger:"blur"}],privateKey:[{required:!0,message:"请输入活动名称",trigger:"blur"}],publicKey:[{required:!0,message:"请输入活动名称",trigger:"blur"}],alipayPublicKey:[{required:!0,message:"请输入活动名称",trigger:"blur"}]}}},mounted:function(){this.getFormList()},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message({message:"系统错误！",type:"error"}),!1;t.$api.common.xyjPostPay({url:"/sysPay/save",data:t.form}).then(function(e){200==e.code&&t.$message({message:"设置更新成功！",type:"success"})})})},open2:function(){var e=this;this.$confirm("此操作将更新支付设置信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.onSubmit("form")}).catch(function(){e.$message({type:"info",message:"已取消提交"})})},getFormList:function(){var e=this;this.$api.common.xyjGetPay({url:"/sysPay/get"}).then(function(t){0!==t.data.length&&(e.form=t.data)})}}},i,!1,function(e){a("uywC")},"data-v-0e1682c2",null);t.default=r.exports},NGEn:function(e,t){var a=Array.isArray;e.exports=a},NGlO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{src:"",loading:null}},methods:{resetSrc:function(e){this.src=e,console.log(e),this.load()},load:function(){this.loading=this.$loading({lock:!0,text:"loading...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)",target:document.querySelector("#main-container ")})},onloaded:function(){this.loading&&this.loading.close()}},mounted:function(){this.resetSrc(this.$store.state.iframe.iframeUrl)},watch:{$route:{handler:function(e,t){this.resetSrc(this.$store.state.iframe.iframeUrl)}}}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"iframe-container"},[t("iframe",{staticClass:"frame",attrs:{src:this.src,scrolling:"auto",frameborder:"0",onload:this.onloaded()}})])},staticRenderFns:[]};var s=a("VU/8")(i,r,!1,function(e){a("7cGE")},null,null);t.default=s.exports},NecF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var r=a("VU/8")({name:"AllTasks"},i,!1,function(e){a("6ztQ")},"data-v-2a7ee998",null);t.default=r.exports},Nx3o:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"TIcBuAssembleMaterial",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,info:"",progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleMaterial/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuAssembleMaterial",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleMaterial/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleMaterial/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleMaterial/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleMaterial/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},update:function(){this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameFollowVersionId?tablename=tIcBuAssembleMaterial&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"},this.tableitemKey++},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.update(),i.getinfo(e.versionId),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})})},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),this.getinfo(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(){var e=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){e.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssembleMaterial/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].materialId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleMaterial/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssembleMaterial/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getMaterialsInfo?versionId="+e}).then(function(e){t.info=[{name:"直劳单价"},{name:"DSTR"},{name:"基点车直劳单价"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("t/Kj")},"data-v-0eefc502",null);t.default=f.exports},"O/9E":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"csOrder",data:function(){return{column:[{prop:"precode",label:"支付票号",minwidth:"180",align:"center"},{prop:"productNum",label:"支付日期",minwidth:"180",align:"center"},{prop:"productCode",label:"系统账号",minwidth:"180",align:"center"},{prop:"commonName",label:"姓名",minwidth:"100",align:"center"},{prop:"commonName",label:"车牌号",minwidth:"180",align:"center"},{prop:"commonName",label:"订单金额(元)",minwidth:"120",align:"center"},{prop:"commonName",label:"汽油98(升)",minwidth:"100",align:"center"},{prop:"commonName",label:"汽油95(升)",minwidth:"100",align:"center"},{prop:"agentType",label:"汽油92(升)",minwidth:"100",align:"center"},{prop:"agentType",label:"钱包(元)",minwidth:"100",align:"center"},{prop:"agentType",label:"微信(元)",minwidth:"100",align:"center"},{prop:"agentType",label:"支付宝(元)",minwidth:"100",align:"center"},{prop:"agentType",label:"现金(元)",minwidth:"100",align:"center"},{prop:"agentType",label:"单价(元/升)",minwidth:"100",align:"center"},{prop:"agentType",label:"收益(元)",minwidth:"100",align:"center"},{prop:"agentType",label:"总收益(元)",minwidth:"100",align:"center"},{prop:"agentType",label:"支付方式",minwidth:"100",align:"center"},{prop:"agentType",label:"第三方单号",minwidth:"100",align:"center"},{prop:"agentType",label:"支付终端",minwidth:"100",align:"center"},{prop:"agentType",label:"油站编号",minwidth:"100",align:"center"},{prop:"agentType",label:"加油员工号",minwidth:"120",align:"center"},{prop:"agentType",label:"加油员姓名",minwidth:"100",align:"center"}],restaurants:[],labelPosition:"right",loading2:!0,total:0,operation:!0,dialogTableVisible:!1,tableData3:[],yzoption:[],checked:!1,loading:!1,phone:"",jyzName:"",zfphName:"",yzname:"",cphName:"",zfDate:"",addzsm:"0",search:[],pageRequest:{page:1,pageSize:10,showTotal:!0}}},methods:{youzname:function(){var e=this;if(0!=this.gongoption.length)this.gongoption.filter(function(t){t.supplierName==e.gongname&&(e.gongid=t.id,console.log(e.gongid))})},refreshPageRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pageRequest.page=e,this.findPage()},refreshPageSizeRequest:function(e){this.tableData3.pageSize=e,this.findPage()},searchquery:function(){this.phone&&this.search.push({property:"productNum",value:this.phone,operation:"LIKE",relation:"AND"}),this.zfphName&&this.search.push({property:"productNum",value:this.zfphName,operation:"LIKE",relation:"AND"}),this.zfDate&&this.search.push({property:"productNum",value:this.zfDate,operation:"LIKE",relation:"AND"}),this.jyzName&&this.search.push({property:"productName",value:this.jyzName,operation:"LIKE",relation:"AND"}),this.cphName&&this.search.push({property:"medicineClassify",value:this.cphName,operation:"LIKE",relation:"AND"}),this.findPage(this.search)},findPage:function(e){var t=this;this.loading=!0,this.$api.common.xyjPost({url:"/scm/scmZsjProduct/v1/list",data:{pageBean:this.pageRequest,params:{},querys:e,sorter:[]}}).then(function(e){e?(t.tableData3=e.rows,t.total=e.total,t.loading2=!1,t.search=[]):t.$message({message:"操作失败, "+e.shortMessage,type:"error",duration:800})})}},mounted:function(){this.findPage()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",[a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-search"}),a("span",{staticClass:"sx"},[e._v("筛选查询")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-row"),e._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"mini"},on:{click:e.searchquery}},[e._v("查询")])],1)])]),e._v(" "),a("el-main",[a("el-form",{staticClass:"demo-ruleForm",attrs:{"label-position":e.labelPosition,size:"small","label-width":"120px"}},[a("el-form-item",{attrs:{label:"手机账号"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入手机账号"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"加油员姓名"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入加油员姓名"},model:{value:e.jyzName,callback:function(t){e.jyzName=t},expression:"jyzName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"油站名称"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择油站名称"},on:{change:e.youzname},model:{value:e.yzname,callback:function(t){e.yzname=t},expression:"yzname"}},e._l(e.yzoption,function(e){return a("el-option",{key:e.id,attrs:{label:e.supplierName,value:e.supplierName}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"购买日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.zfDate,callback:function(t){e.zfDate=t},expression:"zfDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付票号"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入支付票号"},model:{value:e.zfphName,callback:function(t){e.zfphName=t},expression:"zfphName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"车牌号"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入车牌号"},model:{value:e.cphName,callback:function(t){e.cphName=t},expression:"cphName"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-tickets"}),a("span",{staticClass:"sx"},[e._v("待确认支付订单信息")])]),e._v(" "),a("div",{staticClass:"headright"})]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.tableData3,size:"mini","show-overflow-tooltip":"false","show-summary":"true",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",minwidth:"100",align:"center"}}),e._v(" "),e._l(e.column,function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,"min-width":e.minwidth,align:e.align}})})],2),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageRequest.page,"page-sizes":[10,20,30,40,50],"page-size":e.pageRequest.pageSize,layout:"sizes, total, prev, pager, next",total:e.total},on:{"current-change":e.refreshPageRequest,"size-change":e.refreshPageSizeRequest}})],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,r,!1,function(e){a("LBp1")},"data-v-2a6b7156",null);t.default=s.exports},O7Sy:function(e,t){},O8Kh:function(e,t){},OIYI:function(e,t){},OTGQ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("AUIh"),r={name:"MemberList",data:function(){return{loading:!0,tableData:{},pageRequest:{page:1,pageSize:10,showTotal:!0},form:{appUserPhone:"",appUserNickname:"",createTime:""},query:[],columns:[{prop:"createTime",label:"更新时间",width:"180",align:"center",formatter:function(e,t,a,r){return Object(i.a)(e[t.property])}},{prop:"operStatus",label:"状态",align:"center",width:"100"},{prop:"appUserPhone",label:"手机账号",width:"180",align:"center"},{prop:"appUserNickname",label:"昵称",width:"180",align:"center"},{prop:"appUserPassword",label:"密码",width:"280",align:"center"},{prop:"account",label:"余额",width:"180",align:"center"},{prop:"cybnum98",label:"存油宝_98#汽油升数",width:"180",align:"center"},{prop:"cybnum95",label:"存油宝_95#汽油升数",width:"180",align:"center"},{prop:"cybnum92",label:"存油宝_92#汽油升数",width:"180",align:"center"},{prop:"cybnum00",label:"存油宝_柴油升数",width:"180",align:"center"},{prop:"cybnum",label:"总升",width:"180",align:"center"},{prop:"appUserSex",label:"性别",width:"180",align:"center"}]}},mounted:function(){this.findPage()},methods:{refreshPageRequest:function(e){this.pageRequest.page=e,this.findPage()},refreshPageSizeRequest:function(e){this.pageRequest.pageSize=e,this.findPage()},searchquery:function(){var e=[];this.form.phone&&e.push({hasInitValue:!1,operation:"EQUAL",property:"phone",relation:"AND",value:this.form.phone}),this.form.appUserNickname&&e.push({hasInitValue:!1,operation:"EQUAL",property:"appUserNickname",relation:"AND",value:this.form.appUserNickname}),this.form.createTime&&e.push({hasInitValue:!1,operation:"BETWEEN",property:"createTime",relation:"AND",value:this.form.createTime}),this.query=e,this.findPage()},findPage:function(){var e=this;e.$api.common.xyjPost({url:"/appUserStatusHis/query",data:{pageBean:e.pageRequest,params:{},querys:e.query,selfDate:{additionalProp1:"string",additionalProp2:"string",additionalProp3:"string"},sorter:[]}}).then(function(t){e.loading=!1,console.log(t),e.tableData=t.data})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",[a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-search"}),a("span",{staticClass:"sx"},[e._v("筛选查询")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-row"),e._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"mini"},on:{click:e.searchquery}},[e._v("查询")])],1)])]),e._v(" "),a("el-main",[a("el-form",{staticClass:"demo-ruleForm",attrs:{size:"small","label-width":"120px"}},[a("el-form-item",{attrs:{label:"手机号码"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入手机账号"},model:{value:e.form.appUserPhone,callback:function(t){e.$set(e.form,"appUserPhone",t)},expression:"form.appUserPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"会员昵称"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入会员姓名"},model:{value:e.form.appUserNickname,callback:function(t){e.$set(e.form,"appUserNickname",t)},expression:"form.appUserNickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"更新日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.createTime,callback:function(t){e.$set(e.form,"createTime",t)},expression:"form.createTime"}})],1)],1),e._v(" "),a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-tickets"}),a("span",{staticClass:"sx"},[e._v("列表信息")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-button",{staticClass:"fa fa-refresh",attrs:{size:"mini",type:"primary"},on:{click:e.findPage}},[e._v("\n            刷新\n          ")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.tableData.rows,size:"mini","show-overflow-tooltip":"false",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"100",align:"center"}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{sortable:"",prop:e.prop,label:e.label,formatter:e.formatter,"min-width":e.width,align:e.align}})})],2),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageRequest.page,"page-sizes":[10,20,30,40,50],"page-size":e.pageRequest.pageSize,layout:"sizes, total, prev, pager, next",total:e.tableData.total},on:{"current-change":e.refreshPageRequest,"size-change":e.refreshPageSizeRequest}})],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(r,s,!1,function(e){a("hcWO")},"data-v-4d6ed840",null);t.default=l.exports},PRBW:function(e,t,a){var i={"./views/ApplicationDictionary/BrandDictionary":["m7kY"],"./views/ApplicationDictionary/BrandDictionary.vue":["m7kY"],"./views/ApplicationDictionary/CompanyDictionary":["07rk"],"./views/ApplicationDictionary/CompanyDictionary.vue":["07rk"],"./views/ApplicationDictionary/EquipmentDictionary":["fJKY"],"./views/ApplicationDictionary/EquipmentDictionary.vue":["fJKY"],"./views/ApplicationDictionary/GasStationTag":["wNfd"],"./views/ApplicationDictionary/GasStationTag.vue":["wNfd"],"./views/ApplicationDictionary/StandardDictionary":["ZwJZ"],"./views/ApplicationDictionary/StandardDictionary.vue":["ZwJZ"],"./views/Backup/Backup":["5Iox"],"./views/Backup/Backup.vue":["5Iox"],"./views/Core/KtButton":["wbNz"],"./views/Core/KtButton.vue":["wbNz"],"./views/Core/KtTable":["/4e5"],"./views/Core/KtTable.vue":["/4e5"],"./views/Core/MessagePanel":["VaSu"],"./views/Core/MessagePanel.vue":["VaSu"],"./views/Core/NoticePanel":["6XgB"],"./views/Core/NoticePanel.vue":["6XgB"],"./views/Core/PersonalPanel":["vlPt"],"./views/Core/PersonalPanel.vue":["vlPt"],"./views/Core/TableColumnFilterDialog":["EN35"],"./views/Core/TableColumnFilterDialog.vue":["EN35"],"./views/Core/TableTreeColumn":["BQHT"],"./views/Core/TableTreeColumn.vue":["BQHT"],"./views/CwManagement/CenterStatistic":["kdhO"],"./views/CwManagement/CenterStatistic.vue":["kdhO"],"./views/CwManagement/CenterStatisticBetween":["9sii"],"./views/CwManagement/CenterStatisticBetween.vue":["9sii"],"./views/CwManagement/DaySalesStatistics":["AVYP"],"./views/CwManagement/DaySalesStatistics.vue":["AVYP"],"./views/CwManagement/DayStatistic":["vuze"],"./views/CwManagement/DayStatistic.vue":["vuze"],"./views/CwManagement/MonthsSalesStatistics":["k3T2"],"./views/CwManagement/MonthsSalesStatistics.vue":["k3T2"],"./views/CwManagement/WeekSalesStatistics":["d+Pf"],"./views/CwManagement/WeekSalesStatistics.vue":["d+Pf"],"./views/Error/404":["vr1u"],"./views/Error/404.vue":["vr1u"],"./views/GasStationSystem/DailyBusiness/GasStationDlayInfo":["pRm9"],"./views/GasStationSystem/DailyBusiness/GasStationDlayInfo.vue":["pRm9"],"./views/GasStationSystem/DailyBusiness/OilPriceSetting":["yBve"],"./views/GasStationSystem/DailyBusiness/OilPriceSetting.vue":["yBve"],"./views/Generator/Generator":["wuuA"],"./views/Generator/Generator.vue":["wuuA"],"./views/HeadBar/HeadBar":["4bIh"],"./views/HeadBar/HeadBar.vue":["4bIh"],"./views/Home":["j7e0"],"./views/Home.vue":["j7e0"],"./views/IFrame/IFrame":["NGlO"],"./views/IFrame/IFrame.vue":["NGlO"],"./views/Intro/Intro":["SiGl"],"./views/Intro/Intro.vue":["SiGl"],"./views/Login":["lmfZ"],"./views/Login.vue":["lmfZ"],"./views/MainContent/MainContent":["u37B"],"./views/MainContent/MainContent.vue":["u37B"],"./views/Member/AppUserStatus":["1Q7v"],"./views/Member/AppUserStatus.vue":["1Q7v"],"./views/Member/AppUserStatusHis":["OTGQ"],"./views/Member/AppUserStatusHis.vue":["OTGQ"],"./views/Member/FindBuyOrder":["o85e"],"./views/Member/FindBuyOrder.vue":["o85e"],"./views/Member/FindPage":["p0ki"],"./views/Member/FindPage.vue":["p0ki"],"./views/Member/FindPayToCancel":["Z/mt"],"./views/Member/FindPayToCancel.vue":["Z/mt"],"./views/Member/MemberList":["so3D"],"./views/Member/MemberList.vue":["so3D"],"./views/Member/MethodsStatistical":["yse4"],"./views/Member/MethodsStatistical.vue":["yse4"],"./views/Member/Setting":["bUMU"],"./views/Member/Setting.vue":["bUMU"],"./views/Member/SmsPushRecord":["nZqn"],"./views/Member/SmsPushRecord.vue":["nZqn"],"./views/Member/ToBeConfirmed":["O/9E"],"./views/Member/ToBeConfirmed.vue":["O/9E"],"./views/Member/Upload":["cI1M"],"./views/Member/Upload.vue":["cI1M"],"./views/NavBar/NavBar":["w7g/"],"./views/NavBar/NavBar.vue":["w7g/"],"./views/NewCar/Budget/Assemble/TIcBuAssemble":["Q9V0"],"./views/NewCar/Budget/Assemble/TIcBuAssemble.vue":["Q9V0"],"./views/NewCar/Budget/Assemble/TIcBuAssembleInvest":["eoFw"],"./views/NewCar/Budget/Assemble/TIcBuAssembleInvest.vue":["eoFw"],"./views/NewCar/Budget/Assemble/TIcBuAssembleInvestDI":["A4MV"],"./views/NewCar/Budget/Assemble/TIcBuAssembleInvestDI.vue":["A4MV"],"./views/NewCar/Budget/Assemble/TIcBuAssembleInvestZDI":["YETs"],"./views/NewCar/Budget/Assemble/TIcBuAssembleInvestZDI.vue":["YETs"],"./views/NewCar/Budget/Assemble/TIcBuAssembleLabour":["erd9"],"./views/NewCar/Budget/Assemble/TIcBuAssembleLabour.vue":["erd9"],"./views/NewCar/Budget/Assemble/TIcBuAssembleLabourlDI":["2ytj"],"./views/NewCar/Budget/Assemble/TIcBuAssembleLabourlDI.vue":["2ytj"],"./views/NewCar/Budget/Assemble/TIcBuAssembleMaterial":["Nx3o"],"./views/NewCar/Budget/Assemble/TIcBuAssembleMaterial.vue":["Nx3o"],"./views/NewCar/Budget/Assemble/TIcBuAssembleMaterialDI":["Xsg9"],"./views/NewCar/Budget/Assemble/TIcBuAssembleMaterialDI.vue":["Xsg9"],"./views/NewCar/Budget/Assemble/TIcBuAssemblePic":["jiAh"],"./views/NewCar/Budget/Assemble/TIcBuAssemblePic.vue":["jiAh"],"./views/NewCar/Budget/Assemble/TIcBuAssemblePicDI":["gmfD"],"./views/NewCar/Budget/Assemble/TIcBuAssemblePicDI.vue":["gmfD"],"./views/NewCar/Budget/Assemble/TIcBuAssemblePicFunds":["nQR5"],"./views/NewCar/Budget/Assemble/TIcBuAssemblePicFunds.vue":["nQR5"],"./views/NewCar/Budget/Assemble/TIcBuAssemblePicZDI":["3EcB"],"./views/NewCar/Budget/Assemble/TIcBuAssemblePicZDI.vue":["3EcB"],"./views/NewCar/Budget/Battery/TIcBuBattery":["/Rxi"],"./views/NewCar/Budget/Battery/TIcBuBattery.vue":["/Rxi"],"./views/NewCar/Budget/Battery/TIcBuBatteryInvest":["teXH"],"./views/NewCar/Budget/Battery/TIcBuBatteryInvest.vue":["teXH"],"./views/NewCar/Budget/Battery/TIcBuBatteryInvestDI":["DeLq"],"./views/NewCar/Budget/Battery/TIcBuBatteryInvestDI.vue":["DeLq"],"./views/NewCar/Budget/Battery/TIcBuBatteryInvestZDI":["pIth"],"./views/NewCar/Budget/Battery/TIcBuBatteryInvestZDI.vue":["pIth"],"./views/NewCar/Budget/Battery/TIcBuBatteryLabour":["EMjc"],"./views/NewCar/Budget/Battery/TIcBuBatteryLabour.vue":["EMjc"],"./views/NewCar/Budget/Battery/TIcBuBatteryLabourlDI":["Iz6T"],"./views/NewCar/Budget/Battery/TIcBuBatteryLabourlDI.vue":["Iz6T"],"./views/NewCar/Budget/Battery/TIcBuBatteryMaterial":["6eCB"],"./views/NewCar/Budget/Battery/TIcBuBatteryMaterial.vue":["6eCB"],"./views/NewCar/Budget/Battery/TIcBuBatteryMaterialDI":["uoGy"],"./views/NewCar/Budget/Battery/TIcBuBatteryMaterialDI.vue":["uoGy"],"./views/NewCar/Budget/Battery/TIcBuBatteryPic":["nRqV"],"./views/NewCar/Budget/Battery/TIcBuBatteryPic.vue":["nRqV"],"./views/NewCar/Budget/Battery/TIcBuBatteryPicDI":["4wnU"],"./views/NewCar/Budget/Battery/TIcBuBatteryPicDI.vue":["4wnU"],"./views/NewCar/Budget/Battery/TIcBuBatteryPicFunds":["Ss0p"],"./views/NewCar/Budget/Battery/TIcBuBatteryPicFunds.vue":["Ss0p"],"./views/NewCar/Budget/Battery/TIcBuBatteryPicZDI":["pKAm"],"./views/NewCar/Budget/Battery/TIcBuBatteryPicZDI.vue":["pKAm"],"./views/NewCar/Budget/Painting/TIcBuPainting":["oxDA"],"./views/NewCar/Budget/Painting/TIcBuPainting.vue":["oxDA"],"./views/NewCar/Budget/Painting/TIcBuPaintingInvest":["ffkl"],"./views/NewCar/Budget/Painting/TIcBuPaintingInvest.vue":["ffkl"],"./views/NewCar/Budget/Painting/TIcBuPaintingInvestDI":["/o3i"],"./views/NewCar/Budget/Painting/TIcBuPaintingInvestDI.vue":["/o3i"],"./views/NewCar/Budget/Painting/TIcBuPaintingInvestZDI":["os3D"],"./views/NewCar/Budget/Painting/TIcBuPaintingInvestZDI.vue":["os3D"],"./views/NewCar/Budget/Painting/TIcBuPaintingLabour":["zD33"],"./views/NewCar/Budget/Painting/TIcBuPaintingLabour.vue":["zD33"],"./views/NewCar/Budget/Painting/TIcBuPaintingLabourlDI":["JYOD"],"./views/NewCar/Budget/Painting/TIcBuPaintingLabourlDI.vue":["JYOD"],"./views/NewCar/Budget/Painting/TIcBuPaintingMaterial":["9lgc"],"./views/NewCar/Budget/Painting/TIcBuPaintingMaterial.vue":["9lgc"],"./views/NewCar/Budget/Painting/TIcBuPaintingMaterialDI":["dbHl"],"./views/NewCar/Budget/Painting/TIcBuPaintingMaterialDI.vue":["dbHl"],"./views/NewCar/Budget/Painting/TIcBuPaintingPic":["6w8g"],"./views/NewCar/Budget/Painting/TIcBuPaintingPic.vue":["6w8g"],"./views/NewCar/Budget/Painting/TIcBuPaintingPicDI":["2IVI"],"./views/NewCar/Budget/Painting/TIcBuPaintingPicDI.vue":["2IVI"],"./views/NewCar/Budget/Painting/TIcBuPaintingPicFunds":["9Yi5"],"./views/NewCar/Budget/Painting/TIcBuPaintingPicFunds.vue":["9Yi5"],"./views/NewCar/Budget/Painting/TIcBuPaintingPicZDI":["CdzR"],"./views/NewCar/Budget/Painting/TIcBuPaintingPicZDI.vue":["CdzR"],"./views/NewCar/Budget/Resin/TIcBuResin":["44j5"],"./views/NewCar/Budget/Resin/TIcBuResin.vue":["44j5"],"./views/NewCar/Budget/Resin/TIcBuResinInvest":["mt2M"],"./views/NewCar/Budget/Resin/TIcBuResinInvest.vue":["mt2M"],"./views/NewCar/Budget/Resin/TIcBuResinInvestDI":["V5wI"],"./views/NewCar/Budget/Resin/TIcBuResinInvestDI.vue":["V5wI"],"./views/NewCar/Budget/Resin/TIcBuResinInvestZDI":["IOVJ"],"./views/NewCar/Budget/Resin/TIcBuResinInvestZDI.vue":["IOVJ"],"./views/NewCar/Budget/Resin/TIcBuResinLabour":["9RDS"],"./views/NewCar/Budget/Resin/TIcBuResinLabour.vue":["9RDS"],"./views/NewCar/Budget/Resin/TIcBuResinLabourlDI":["W/B4"],"./views/NewCar/Budget/Resin/TIcBuResinLabourlDI.vue":["W/B4"],"./views/NewCar/Budget/Resin/TIcBuResinMaterial":["uy2x"],"./views/NewCar/Budget/Resin/TIcBuResinMaterial.vue":["uy2x"],"./views/NewCar/Budget/Resin/TIcBuResinMaterialDI":["2763"],"./views/NewCar/Budget/Resin/TIcBuResinMaterialDI.vue":["2763"],"./views/NewCar/Budget/Resin/TIcBuResinPic":["0g07"],"./views/NewCar/Budget/Resin/TIcBuResinPic.vue":["0g07"],"./views/NewCar/Budget/Resin/TIcBuResinPicDI":["uHIP"],"./views/NewCar/Budget/Resin/TIcBuResinPicDI.vue":["uHIP"],"./views/NewCar/Budget/Resin/TIcBuResinPicFunds":["K8HG"],"./views/NewCar/Budget/Resin/TIcBuResinPicFunds.vue":["K8HG"],"./views/NewCar/Budget/Resin/TIcBuResinPicZDI":["uqws"],"./views/NewCar/Budget/Resin/TIcBuResinPicZDI.vue":["uqws"],"./views/NewCar/Budget/Resin/TIcBuWeldingInvestDI":["8nKs"],"./views/NewCar/Budget/Resin/TIcBuWeldingInvestDI.vue":["8nKs"],"./views/NewCar/Budget/Stamping/Stamping":["rkLl"],"./views/NewCar/Budget/Stamping/Stamping.vue":["rkLl"],"./views/NewCar/Budget/Stamping/StampingInvest":["YPTT"],"./views/NewCar/Budget/Stamping/StampingInvest.vue":["YPTT"],"./views/NewCar/Budget/Stamping/StampingInvestDI":["Vgup"],"./views/NewCar/Budget/Stamping/StampingInvestDI.vue":["Vgup"],"./views/NewCar/Budget/Stamping/StampingInvestZDI":["qE4d"],"./views/NewCar/Budget/Stamping/StampingInvestZDI.vue":["qE4d"],"./views/NewCar/Budget/Stamping/StampingLabour":["qaGO"],"./views/NewCar/Budget/Stamping/StampingLabour.vue":["qaGO"],"./views/NewCar/Budget/Stamping/StampingLabourlDI":["mQlM"],"./views/NewCar/Budget/Stamping/StampingLabourlDI.vue":["mQlM"],"./views/NewCar/Budget/Stamping/StampingMaterial":["C+na"],"./views/NewCar/Budget/Stamping/StampingMaterial.vue":["C+na"],"./views/NewCar/Budget/Stamping/StampingMaterialDI":["SjE2"],"./views/NewCar/Budget/Stamping/StampingMaterialDI.vue":["SjE2"],"./views/NewCar/Budget/Stamping/StampingPic":["ZkMO"],"./views/NewCar/Budget/Stamping/StampingPic.vue":["ZkMO"],"./views/NewCar/Budget/Stamping/StampingPicDI":["Esqk"],"./views/NewCar/Budget/Stamping/StampingPicDI.vue":["Esqk"],"./views/NewCar/Budget/Stamping/StampingPicFunds":["50BH"],"./views/NewCar/Budget/Stamping/StampingPicFunds.vue":["50BH"],"./views/NewCar/Budget/Stamping/StampingPicZDI":["qLoF"],"./views/NewCar/Budget/Stamping/StampingPicZDI.vue":["qLoF"],"./views/NewCar/Budget/Stamping/StampingS":["cZLy"],"./views/NewCar/Budget/Stamping/StampingS.vue":["cZLy"],"./views/NewCar/Budget/StampingApproval":["eCB+"],"./views/NewCar/Budget/StampingApproval.vue":["eCB+"],"./views/NewCar/Budget/Welding/Welding":["IMnS"],"./views/NewCar/Budget/Welding/Welding.vue":["IMnS"],"./views/NewCar/Budget/Welding/WeldingInvest":["30oC"],"./views/NewCar/Budget/Welding/WeldingInvest.vue":["30oC"],"./views/NewCar/Budget/Welding/WeldingInvestDI":["yXjv"],"./views/NewCar/Budget/Welding/WeldingInvestDI.vue":["yXjv"],"./views/NewCar/Budget/Welding/WeldingInvestZDI":["b6ri"],"./views/NewCar/Budget/Welding/WeldingInvestZDI.vue":["b6ri"],"./views/NewCar/Budget/Welding/WeldingLabour":["ikHd"],"./views/NewCar/Budget/Welding/WeldingLabour.vue":["ikHd"],"./views/NewCar/Budget/Welding/WeldingLabourlDI":["Krnv"],"./views/NewCar/Budget/Welding/WeldingLabourlDI.vue":["Krnv"],"./views/NewCar/Budget/Welding/WeldingMaterial":["R4P/"],"./views/NewCar/Budget/Welding/WeldingMaterial.vue":["R4P/"],"./views/NewCar/Budget/Welding/WeldingMaterialDI":["QlNj"],"./views/NewCar/Budget/Welding/WeldingMaterialDI.vue":["QlNj"],"./views/NewCar/Budget/Welding/WeldingPic":["vt9m"],"./views/NewCar/Budget/Welding/WeldingPic.vue":["vt9m"],"./views/NewCar/Budget/Welding/WeldingPicDI":["H0fP"],"./views/NewCar/Budget/Welding/WeldingPicDI.vue":["H0fP"],"./views/NewCar/Budget/Welding/WeldingPicFunds":["9+zb"],"./views/NewCar/Budget/Welding/WeldingPicFunds.vue":["9+zb"],"./views/NewCar/Budget/Welding/WeldingPicZDI":["rPqH"],"./views/NewCar/Budget/Welding/WeldingPicZDI.vue":["rPqH"],"./views/NewCar/Budget/Workflow/ProcessConfiguration":["6GiL"],"./views/NewCar/Budget/Workflow/ProcessConfiguration.vue":["6GiL"],"./views/NewCar/CarType/ApprovalList":["BtyH"],"./views/NewCar/CarType/ApprovalList.vue":["BtyH"],"./views/NewCar/CarType/CarTypeStageCompare":["yBzE"],"./views/NewCar/CarType/CarTypeStageCompare.vue":["yBzE"],"./views/NewCar/CarType/EngineeringSummary":["4IhR"],"./views/NewCar/CarType/EngineeringSummary.vue":["4IhR"],"./views/NewCar/CarType/ForecastMain":["dw9a"],"./views/NewCar/CarType/ForecastMain.vue":["dw9a"],"./views/NewCar/CarType/TypicalMain":["13PT"],"./views/NewCar/CarType/TypicalMain.vue":["13PT"],"./views/NewCar/Precondition/Brand":["aDJU"],"./views/NewCar/Precondition/Brand.vue":["aDJU"],"./views/NewCar/Precondition/CarType":["oGgH"],"./views/NewCar/Precondition/CarType.vue":["oGgH"],"./views/NewCar/Precondition/Factory":["KclI"],"./views/NewCar/Precondition/Factory.vue":["KclI"],"./views/NewCar/Precondition/Forecast":["1KBz"],"./views/NewCar/Precondition/Forecast.vue":["1KBz"],"./views/NewCar/Precondition/Platform":["We3H"],"./views/NewCar/Precondition/Platform.vue":["We3H"],"./views/NewCar/Precondition/Stage":["gA2/"],"./views/NewCar/Precondition/Stage.vue":["gA2/"],"./views/NewCar/Precondition/TIcBuCarType":["bU0e"],"./views/NewCar/Precondition/TIcBuCarType.vue":["bU0e"],"./views/NewCar/WorkFlow/AllTasks":["NecF"],"./views/NewCar/WorkFlow/AllTasks.vue":["NecF"],"./views/NewCar/WorkFlow/MyTasks":["L/27"],"./views/NewCar/WorkFlow/MyTasks.vue":["L/27"],"./views/NewCar/workConfig":["rwgC"],"./views/NewCar/workConfig.js":["rwgC"],"./views/Sys/Dept":["sWj1"],"./views/Sys/Dept.vue":["sWj1"],"./views/Sys/Dict":["sj2w"],"./views/Sys/Dict.vue":["sj2w"],"./views/Sys/ExcelTemplate":["nvX0"],"./views/Sys/ExcelTemplate.vue":["nvX0"],"./views/Sys/Log":["qnVm"],"./views/Sys/Log.vue":["qnVm"],"./views/Sys/Menu":["Is6l"],"./views/Sys/Menu.vue":["Is6l"],"./views/Sys/Pay":["NBKY"],"./views/Sys/Pay.vue":["NBKY"],"./views/Sys/PayRecordController":["5OEe"],"./views/Sys/PayRecordController.vue":["5OEe"],"./views/Sys/Role":["bfzu"],"./views/Sys/Role.vue":["bfzu"],"./views/Sys/Txmessage":["1S5d"],"./views/Sys/Txmessage.vue":["1S5d"],"./views/Sys/User":["VKGr"],"./views/Sys/User.vue":["VKGr"],"./views/Sys/VersionManagement":["0uU0"],"./views/Sys/VersionManagement.vue":["0uU0"],"./views/TableSet/TableSet":["jAyP"],"./views/TableSet/TableSet.vue":["jAyP"],"./views/Test/TestTable":["m71v"],"./views/Test/TestTable.vue":["m71v"],"./views/mpLogin":["kSa1"],"./views/mpLogin.vue":["kSa1"]};function r(e){var t=i[e];return t?Promise.all(t.slice(1).map(a.e)).then(function(){return a(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}r.keys=function(){return Object.keys(i)},r.id="PRBW",e.exports=r},PpAd:function(e,t){},Q5zf:function(e,t){},Q9V0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=(a("TE7m"),{name:"TIcBuAssemble",components:{},data:function(){return{tableitemKey:1,tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick},operationAttrs:{width:"200px"},formatters:{state:function(e,t,a,i){switch(a){case 0:return"编辑中";case 1:return"审批中";case 2:return"完成";default:return a}}},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfoSum",sorter:[],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssemble/getSumInfo",method:"post",notCondition:!0},InitQuery:{}},tableitem:{hasOperation:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"OfficeSum",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"carId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssemble/getSumInfoItem",method:"post",notCondition:!1}}}},methods:{findByTableName:function(){this.tableitem.editAxios={hostUrl:this.global.lyBudgetUrl,method:"get",url:"/sysTableinfo/findByTableNameAccordVersionNum?tablename=OfficeSum&carId="+this.$refs.reftablamain.selected[0].carId},this.tableitemKey++},rowclick:function(e,t,a){var i=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.carId}),this.$nextTick(function(){i.findByTableName()})},findafter:function(e,t){var a=this;e.length<=0||(this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e[0].carId}),this.$nextTick(function(){a.findByTableName()}))}}}),l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",[t("xyj-table",this._b({ref:"reftablamain",attrs:{id:"1"},on:{update:this.findafter}},"xyj-table",this.tablemain,!1))],1),this._v(" "),t("div",[t("xyj-table",this._b({key:this.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",this.tableitem,!1))],1)])},staticRenderFns:[]};var n=a("VU/8")(s,l,!1,function(e){a("SEB/")},"data-v-884a53c0",null);t.default=n.exports},QJSq:function(e,t){},"QW/i":function(e,t){},QbQI:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAtCAYAAADsvzj/AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAB6SURBVGhD7c+xCcAwDETRTOtlPI33Ezi4DY4IHMEX5xevUnH6R0T0HRDihhA3hLghxM2jkFprL6UsMbZnP139M6S1Nr2/YWwRcocQASEZQgSEZAgREJIhREBIhhABIRlCBIRkCBG8GrICIV9FiBtC3BDihhA3m4REPwFapivemSN87wAAAABJRU5ErkJggg=="},QlNj:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"WeldingMaterialDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingMaterialDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuWeldingMaterialDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingMaterialDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingMaterialDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingMaterialDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingMaterialDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuWeldingMaterialDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuWeldingMaterialDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingMaterialDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].materiaId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingMaterialDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuWeldingMaterialDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingMaterialDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuWeldingMaterialDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuWeldingMaterialDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuWeldingMaterialDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materiaId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materiaId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuWeldingMaterialDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("LS0E")},"data-v-2ce11c5c",null);t.default=f.exports},"R4P/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"WeldingMaterial",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],ceshi:{},paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingMaterial/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.ceshi=t,e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuWeldingMaterial",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingMaterial/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingMaterial/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingMaterial/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingMaterial/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})}),this.getinfo(e.versionId)},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),this.getinfo(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingMaterial/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].materialId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingMaterial/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingMaterial/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getMaterialsInfo?versionId="+e}).then(function(e){t.info=[{name:"材料市况"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("2HFU")},"data-v-7ca0884a",null);t.default=f.exports},"SEB/":function(e,t){},SVO6:function(e,t){},SiGl:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this.$createElement;return(this._self._c||e)("span",[this._v("首页")])},staticRenderFns:[]};var r=a("VU/8")({components:{},methods:{}},i,!1,function(e){a("OIYI")},null,null);t.default=r.exports},SjE2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"StampingMaterialDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,text:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingMaterialDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post"},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuStampingMaterialDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterialDI/query",method:"post"},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterialDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterialDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingMaterialDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId,e.craftName=t.craftName,e.craftPrice=t.craftPrice,e.materiaId=t.materiaId,e.memo=t.memo)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuStampingMaterialDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuStampingMaterialDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingMaterialDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].materiaId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingMaterialDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuStampingMaterialDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingMaterialDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=TIcBuStampingMaterialDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuStampingMaterialDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuStampingMaterialDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materiaId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materiaId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuStampingMaterialDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("E0nX")},"data-v-26330f78",null);t.default=f.exports},Ss0p:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"TIcBuBatteryPicFunds",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryPicFunds/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuBatteryPicFunds",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryPicFunds/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryPicFunds/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryPicFunds/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryPicFunds/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})}),this.getinfo(e.versionId)},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),this.getinfo(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryPicFunds/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].fundsId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryPicFunds/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryPicFunds/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getMaterialsInfo?versionId="+e}).then(function(e){t.info=[{name:"新车汇率"},{name:"基点车汇率"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].fundsId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"fundsId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("kWiv")},"data-v-4c73e70c",null);t.default=f.exports},TDYB:function(e,t){},TmV0:function(e,t,a){a("fZOM"),e.exports=a("FeBl").Object.values},UPtk:function(e,t){},UnAt:function(e,t){},V5wI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"tIcBuResinInvestDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinInvestDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"1000px",tableAttrs:{width:"800px"},tableOns:{"expand-change":function(t,a){a.length?(e.$refs.reftableitem.expands=[],t&&e.$refs.reftableitem.expands.push(t.id)):e.$refs.reftableitem.expands=[]},"cell-click":function(t,a,i,r){e.$refs.reftableitem.$refs.table.toggleRowExpansion(t)}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuResinInvestDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinInvestDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinInvestDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinInvestDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinInvestDI/delete",method:"delete"},extraSelectData:{ordertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new4type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new5type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},othertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]}},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete,onDialogDefault:function(e){e.orderType="车型",e.new1Type="车型",e.new2Type="车型",e.new3Type="车型",e.new4Type="车型",e.new5Type="车型",e.skill1Type="车型",e.skill2Type="车型",e.skill3Type="车型",e.otherType="车型"}}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuResinInvestDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuResinInvestDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinInvestDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinInvestDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuResinInvestDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinInvestDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuResinInvestDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuResinInvestDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuResinInvestDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuResinInvestDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("FflJ")},"data-v-1cfce927",null);t.default=f.exports},VKGr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("xA5l"),o=a("/4e5"),c=a("wbNz"),d=a("EN35"),m=a("AUIh"),u={components:{PopupTreeInput:n.a,KtTable:o.default,KtButton:c.default,TableColumnFilterDialog:d.default},data:function(){return{size:"small",filters:{name:""},columns:[],filterColumns:[],pageRequest:{pageNum:1,pageSize:10},pageResult:{},operation:!1,dialogVisible:!1,editLoading:!1,dataFormRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}]},dataForm:{id:0,name:"",password:"123456",deptId:1,deptName:"",email:"",mobile:"",status:1,userRoles:[]},deptData:[],deptTreeProps:{label:"name",children:"children"},roles:[]}},methods:{findPage:function(e){var t=this;null!==e&&(this.pageRequest=e.pageRequest),this.pageRequest.columnFilters={name:{name:"name",value:this.filters.name}},this.$api.user.findPage(this.pageRequest).then(function(e){t.pageResult=e.data,t.findUserRoles()}).then(null!=e?e.callback:"")},findUserRoles:function(){var e=this;this.$api.role.findAll().then(function(t){e.roles=t.data})},handleDelete:function(e){this.$api.user.batchDelete(e.params).then(null!=e?e.callback:"")},handleAdd:function(){this.dialogVisible=!0,this.operation=!0,this.dataForm={id:0,name:"",password:"",deptId:1,deptName:"",email:"",mobile:"",status:1,userRoles:[]}},handleEdit:function(e){this.dialogVisible=!0,this.operation=!1,this.dataForm=l()({},e.row);for(var t=[],a=0,i=e.row.userRoles.length;a<i;a++)t.push(e.row.userRoles[a].roleId);this.dataForm.userRoles=t},submitForm:function(){var e=this;this.$refs.dataForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;for(var t=l()({},e.dataForm),a=[],i=0,r=t.userRoles.length;i<r;i++){var s={userId:t.id,roleId:t.userRoles[i]};a.push(s)}t.userRoles=a,e.$api.user.save(t).then(function(t){e.editLoading=!1,200==t.code?(e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1,e.$refs.dataForm.resetFields()):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.findPage(null)})})})},findDeptTree:function(){var e=this;this.$api.dept.findDeptTree().then(function(t){e.deptData=t.data})},deptTreeCurrentChangeHandle:function(e,t){this.dataForm.deptId=e.id,this.dataForm.deptName=e.name},dateFormat:function(e,t,a,i){return Object(m.a)(e[t.property])},displayFilterColumnsDialog:function(){this.$refs.tableColumnFilterDialog.setDialogVisible(!0)},handleFilterColumns:function(e){this.filterColumns=e.filterColumns,this.$refs.tableColumnFilterDialog.setDialogVisible(!1)},initColumns:function(){this.columns=[{prop:"id",label:"ID",minWidth:50},{prop:"name",label:"用户名",minWidth:120},{prop:"deptName",label:"机构",minWidth:120},{prop:"roleNames",label:"角色",minWidth:100},{prop:"email",label:"邮箱",minWidth:120},{prop:"mobile",label:"手机",minWidth:100},{prop:"status",label:"状态",minWidth:70}],this.filterColumns=JSON.parse(r()(this.columns))}},mounted:function(){this.findDeptTree(),this.initColumns()}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:role:view",type:"primary"},on:{click:function(t){e.findPage(null)}}})],1),e._v(" "),a("el-form-item",[e._v("CellRowExcel\n\t\t\t\t"),a("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:user:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),e._v(" "),a("div",{staticClass:"toolbar",staticStyle:{float:"right","padding-top":"10px","padding-right":"15px"}},[a("el-form",{attrs:{inline:!0,size:e.size}},[a("el-form-item",[a("el-button-group",[a("el-tooltip",{attrs:{content:"刷新",placement:"top"}},[a("el-button",{attrs:{icon:"fa fa-refresh"},on:{click:function(t){e.findPage(null)}}})],1),e._v(" "),a("el-tooltip",{attrs:{content:"列显示",placement:"top"}},[a("el-button",{attrs:{icon:"fa fa-filter"},on:{click:e.displayFilterColumnsDialog}})],1),e._v(" "),a("el-tooltip",{attrs:{content:"导出",placement:"top"}},[a("el-button",{attrs:{icon:"fa fa-file-excel-o"}})],1)],1)],1)],1),e._v(" "),a("table-column-filter-dialog",{ref:"tableColumnFilterDialog",attrs:{columns:e.columns},on:{handleFilterColumns:e.handleFilterColumns}})],1),e._v(" "),a("kt-table",{attrs:{id:"ktable",permsEdit:"sys:user:edit",permsDelete:"sys:user:delete",data:e.pageResult,columns:e.filterColumns},on:{findPage:e.findPage,handleEdit:e.handleEdit,handleDelete:e.handleDelete}}),e._v(" "),a("el-dialog",{attrs:{title:e.operation?"新增":"编辑",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"80px",rules:e.dataFormRules,size:e.size,"label-position":"right"}},[e._e(),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.dataForm.password,callback:function(t){e.$set(e.dataForm,"password",t)},expression:"dataForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"机构",prop:"deptName"}},[a("popup-tree-input",{attrs:{data:e.deptData,props:e.deptTreeProps,prop:e.dataForm.deptName,nodeKey:""+e.dataForm.deptId,currentChangeHandle:e.deptTreeCurrentChangeHandle}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.email,callback:function(t){e.$set(e.dataForm,"email",t)},expression:"dataForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.mobile,callback:function(t){e.$set(e.dataForm,"mobile",t)},expression:"dataForm.mobile"}})],1),e._v(" "),e.operation?e._e():a("el-form-item",{attrs:{label:"角色",prop:"userRoles"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.dataForm.userRoles,callback:function(t){e.$set(e.dataForm,"userRoles",t)},expression:"dataForm.userRoles"}},e._l(e.roles,function(e){return a("el-option",{key:e.id,attrs:{label:e.remark,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.size},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{attrs:{size:e.size,type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v(e._s(e.$t("action.submit")))])],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("tFUA")},"data-v-4cb0d63c",null);t.default=f.exports},VYEP:function(e,t){},Vgup:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"StampingInvestDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,info:[],text:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingInvestDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"1000px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuStampingInvestDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingInvestDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingInvestDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingInvestDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingInvestDI/delete",method:"delete"},extraSelectData:{ordertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new4type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new5type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},othertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]}},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete,onDialogDefault:function(e){e.orderType="车型",e.new1Type="车型",e.new2Type="车型",e.new3Type="车型",e.new4Type="车型",e.new5Type="车型",e.skill1Type="车型",e.skill2Type="车型",e.skill3Type="车型",e.otherType="车型"}}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuStampingInvestDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuStampingInvestDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingInvestDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingInvestDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuStampingInvestDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingInvestDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuStampingInvestDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuStampingInvestDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuStampingInvestDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].investId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"investId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuStampingInvestDI",e,"moveChart")}},mounted:function(){}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("MXW0")},"data-v-e9fb1d6c",null);t.default=f.exports},VjWM:function(e,t){},"W/B4":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuResinLabourlDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinLabourlDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,isExpand:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{"expand-change":function(t,a){a.length?(e.$refs.reftableitem.expands=[],t&&e.$refs.reftableitem.expands.push(t.id)):e.$refs.reftableitem.expands=[]},"cell-click":function(t,a,i,r){e.$refs.reftableitem.$refs.table.toggleRowExpansion(t)}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuResinLabourlDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinLabourlDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinLabourlDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinLabourlDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinLabourlDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuResinLabourlDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuResinLabourlDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinLabourlDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].labourlId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinLabourlDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuResinLabourlDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinLabourlDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuResinLabourlDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuResinLabourlDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuResinLabourlDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuResinLabourlDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",disabled:e.isDisabled,label:e.$t("action.chooseVehicleType")},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("1XDo")},"data-v-6b031ada",null);t.default=f.exports},WP8V:function(e,t){},We3H:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("xyj-table",this._b({ref:"otable",attrs:{id:"1"}},"xyj-table",this.tableConfig,!1))],1)},staticRenderFns:[]};var r=a("VU/8")({name:"Platform",mounted:function(){this.$refs.otable.hasPagination=!1},data:function(){return{tableConfig:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcDbPlatform",bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcDbPlatform/query",method:"post",notCondition:!0},bNewUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcDbPlatform/save",method:"post",close:!0},bEditUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcDbPlatform/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyBaseUrl,url:"/tIcDbPlatform/delete",method:"delete"},onManualEdit:function(e,t){e&&(e.id=t.id)}}}}},i,!1,function(e){a("r56Q")},"data-v-6742a872",null);t.default=r.exports},WsJo:function(e,t){},X63W:function(e,t){},XYry:function(e,t){},Xqfw:function(e,t){},Xsg9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuAssembleMaterialDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleMaterialDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuAssembleMaterialDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleMaterialDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleMaterialDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleMaterialDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleMaterialDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuAssembleMaterialDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuAssembleMaterialDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(){var e=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){e.$refs.reftableitem.getList(),e.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssembleMaterialDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].materiaId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleMaterialDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuAssembleMaterialDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssembleMaterialDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuAssembleMaterialDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuAssembleMaterialDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuAssembleMaterialDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materiaId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materiaId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuAssembleMaterialDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("WP8V")},"data-v-3a292ebe",null);t.default=f.exports},"Y+xd":function(e,t){},Y9ZQ:function(e,t){},YETs:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuAssembleInvestZDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleInvestZDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"1000px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuAssembleInvestZDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleInvestZDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleInvestZDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleInvestZDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleInvestZDI/delete",method:"delete"},extraSelectData:{threadtype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},incidentaltype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},electrictype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},logisticstype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},pugtype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},newtype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},othertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]}},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete,onDialogDefault:function(e){e.threadType="车型",e.incidentalType="车型",e.electricType="车型",e.logisticsType="车型",e.pugType="车型",e.newType="车型",e.skill1Type="车型",e.skill2Type="车型",e.skill3Type="车型",e.otherType="车型"}}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuAssembleInvestZDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuAssembleInvestZDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(){var e=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){e.$refs.reftableitem.getList(),e.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssembleInvestZDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleInvestZDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuAssembleInvestZDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssembleInvestZDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuAssembleInvestZDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuAssembleInvestZDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuAssembleInvestZDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].investId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"investId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuAssembleInvestZDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("UPtk")},"data-v-98d4b49c",null);t.default=f.exports},YPTT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"StampingInvest",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,text:[],info:"",progress:{tableFlag:!1,UploadPercent:0},fileList:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingInvest/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuStampingInvest",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingInvest/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingInvest/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingInvest/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingInvest/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onDialogDefault:function(e){e.allocation="DFL"}}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),i.getinfo(e.versionId),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})})},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingInvest/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingInvest/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingInvest/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getInvestInfo?versionId="+e}).then(function(e){t.info=[{name:"直劳单价"},{name:"DSTR"},{name:"基点车直劳单价"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].investId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"investId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("gmA7")},"data-v-52ba5c78",null);t.default=f.exports},YTIs:function(e,t){},YixA:function(e,t){},YzAn:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAtCAYAAADsvzj/AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAANrSURBVGhD7ZndSzJBFIffv9bSiCzpg6AyQjKIipKIIi0EhegTvFD6oCyISr3qkwiSLizsqkBRhPPyGxjZ1fOuu61j8uLFg+zMmXUed+bM2fpTqVTof6Aj0m50RNqNjohqcrkcfXx8sH0cbSdyd3dHS0tL5HA4BFwMR9uIJJNJmpycrAqAoaEhNpbjV0W+vr5of3+f+vv7dQLBYFB8xuNxdhzHr4i8vr5WJyuBzO7urtgXuO7q6qJyucyO52ipSDqdprm5OZ0AltPx8TGVSiURAxm0RyKRuvFGtETk8PCwbv0vLCxQKpXSxUFGLrP393ddXyOUieTzedra2iKPx6MT2NjYoOfnZ3YMngxiAoEA229E00UeHx9pfX1dN3m32017e3tCjhsjkU/t/v6e7TeiaSKXl5diuWgFJiYm6OTkxNSmxTLDmKmpKba/EbZECoUCJRIJ8eVagfn5ecpkMuyYfyF/hPPzc7a/ET8SeXt7o+3tbRocHNQJIKW+vLywY4zAnsF4KwdgLZZEsHZDoRB1d3dXJ9/X1ydS5ufnJzvGDEgAuNfBwQHbbwZTIldXV7S4uFidPBgfHxdZhou3AhIA7ud0Oun7+5uNMYOhCJaQz+fTCeBAw8HGxf8EZDPcF0+a6zeLocjDw4NOQguW19jYmHhS0WiUjo6OxAZH+YEairtfLchmSM24XzabZWPM0nBp3d7e0tnZGe3s7NDq6ipNT0/XHXIcw8PDNDMzI54qd1+A1IxY/BhcvxUsbXYtKO7wxC4uLsQmRcaanZ2lkZERnRCyGzce4JxBjNVUzfFjESOkJCa5vLzMxmDy6Mce5PqtokQEyHLc6/Wy/Tg00Y+9xfVbRZkIwD5xuVyiAtC249CEBJahtt0OSkWw2TFhZDJtu3ypwkGqbbeDUpG1tTUx4evr62obKgC09fT02KoGalEqIt/2YrFYXdvm5qYu1i5KRU5PT8WksZRkG2oztD09Peli7aJUBIcpJu33+8W1nTfARigVwXs3Jj4wMCCuUWji+ubmpi7WLkpFgCxnUGjiEyUOF2cX5SKyepZ/BkJ9xcXZRbnIysqKEACjo6NULBbZOLsoF0HRKEXsvAE2QrmITMG9vb3iXwVcTDNQLiJTcDgcZvubhXIRgJKea28mLRFpBR2RdqMj0l5U6C/WgmlzrVHMFwAAAABJRU5ErkJggg=="},"Z/mt":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"FindPayToCancel",data:function(){return{column:[{prop:"precode",label:"支付票号",minwidth:"180",align:"center"},{prop:"productNum",label:"支付日期",minwidth:"180",align:"center"},{prop:"productNum",label:"支付时间",minwidth:"180",align:"center"},{prop:"productCode",label:"系统账号",minwidth:"180",align:"center"},{prop:"commonName",label:"手机账号",minwidth:"100",align:"center"},{prop:"commonName",label:"姓名",minwidth:"180",align:"center"},{prop:"commonName",label:"车牌号",minwidth:"120",align:"center"},{prop:"commonName",label:"订单金额(元)",minwidth:"100",align:"center"},{prop:"commonName",label:"汽油98(升)",minwidth:"100",align:"center"},{prop:"agentType",label:"汽油95(升)",minwidth:"100",align:"center"},{prop:"agentType",label:"汽油92(升)",minwidth:"100",align:"center"},{prop:"agentType",label:"柴油0(升)",minwidth:"100",align:"center"},{prop:"agentType",label:"服务费(升/元)",minwidth:"100",align:"center"},{prop:"agentType",label:"钱包(元)",minwidth:"100",align:"center"},{prop:"agentType",label:"微信(元)",minwidth:"100",align:"center"},{prop:"agentType",label:"支付宝(元)",minwidth:"100",align:"center"},{prop:"agentType",label:"现金(元)",minwidth:"100",align:"center"},{prop:"agentType",label:"结算价(元/升)",minwidth:"100",align:"center"},{prop:"agentType",label:"单价(元/升)",minwidth:"100",align:"center"},{prop:"agentType",label:"收益",minwidth:"100",align:"center"},{prop:"agentType",label:"总收益",minwidth:"100",align:"center"},{prop:"agentType",label:"支付方式",minwidth:"100",align:"center"},{prop:"agentType",label:"第三方单号",minwidth:"100",align:"center"},{prop:"agentType",label:"支付终端",minwidth:"120",align:"center"},{prop:"agentType",label:"油站编号",minwidth:"100",align:"center"},{prop:"agentType",label:"加油员工号",minwidth:"100",align:"center"},{prop:"agentType",label:"加油员姓名",minwidth:"100",align:"center"}],restaurants:[],labelPosition:"right",loading2:!0,total:0,operation:!0,dialogTableVisible:!1,tableData3:[],yzoption:[],checked:!1,loading:!1,phone:"",jyzName:"",zfphName:"",yzname:"",cphName:"",zfDate:"",addzsm:"0",search:[],pageRequest:{page:1,pageSize:10,showTotal:!0}}},methods:{youzname:function(){var e=this;if(0!=this.gongoption.length)this.gongoption.filter(function(t){t.supplierName==e.gongname&&(e.gongid=t.id,console.log(e.gongid))})},refreshPageRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pageRequest.page=e,this.findPage()},refreshPageSizeRequest:function(e){this.tableData3.pageSize=e,this.findPage()},searchquery:function(){this.phone&&this.search.push({property:"productNum",value:this.phone,operation:"LIKE",relation:"AND"}),this.zfphName&&this.search.push({property:"productNum",value:this.zfphName,operation:"LIKE",relation:"AND"}),this.zfDate&&this.search.push({property:"productNum",value:this.zfDate,operation:"LIKE",relation:"AND"}),this.jyzName&&this.search.push({property:"productName",value:this.jyzName,operation:"LIKE",relation:"AND"}),this.cphName&&this.search.push({property:"medicineClassify",value:this.cphName,operation:"LIKE",relation:"AND"}),this.findPage(this.search)},findPage:function(e){var t=this;this.loading=!0,this.$api.common.xyjPost({url:"/scm/scmZsjProduct/v1/list",data:{pageBean:this.pageRequest,params:{},querys:e,sorter:[]}}).then(function(e){e?(t.tableData3=e.rows,t.total=e.total,t.loading2=!1,t.search=[]):t.$message({message:"操作失败, "+e.shortMessage,type:"error",duration:800})})}},mounted:function(){this.findPage()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",[a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-search"}),a("span",{staticClass:"sx"},[e._v("筛选查询")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-row"),e._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"mini"},on:{click:e.searchquery}},[e._v("查询")])],1)])]),e._v(" "),a("el-main",[a("el-form",{staticClass:"demo-ruleForm",attrs:{"label-position":e.labelPosition,size:"small","label-width":"120px"}},[a("el-form-item",{attrs:{label:"手机账号"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入手机账号"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"加油员姓名"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入加油员姓名"},model:{value:e.jyzName,callback:function(t){e.jyzName=t},expression:"jyzName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"油站名称"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择油站名称"},on:{change:e.youzname},model:{value:e.yzname,callback:function(t){e.yzname=t},expression:"yzname"}},e._l(e.yzoption,function(e){return a("el-option",{key:e.id,attrs:{label:e.supplierName,value:e.supplierName}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"购买日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.zfDate,callback:function(t){e.zfDate=t},expression:"zfDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付票号"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入支付票号"},model:{value:e.zfphName,callback:function(t){e.zfphName=t},expression:"zfphName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"车牌号"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入车牌号"},model:{value:e.cphName,callback:function(t){e.cphName=t},expression:"cphName"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-tickets"}),a("span",{staticClass:"sx"},[e._v("支付订单数据")])]),e._v(" "),a("div",{staticClass:"headright"})]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.tableData3,size:"mini","show-overflow-tooltip":"false","show-summary":"true",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",minwidth:"100",align:"center"}}),e._v(" "),e._l(e.column,function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,"min-width":e.minwidth,align:e.align}})})],2),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageRequest.page,"page-sizes":[10,20,30,40,50],"page-size":e.pageRequest.pageSize,layout:"sizes, total, prev, pager, next",total:e.total},on:{"current-change":e.refreshPageRequest,"size-change":e.refreshPageSizeRequest}})],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,r,!1,function(e){a("2lH2")},"data-v-63656ada",null);t.default=s.exports},ZkMO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("vmr0"),m=a("TE7m"),u=a("ZqJ4"),p={name:"StampingPic",components:{ChooseCarType:c.a,EditPicTable:d.a},mounted:function(){},data:function(){var e=this;return{qmodify:u.a.QMODIFY,approvaling:u.a.APPROVALING,reject:u.a.REJECT,complete:u.a.COMPLETE,ticketcancel:u.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,info:[],editdisabled:!1,text:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingPic/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){var a=e;function i(){a.$refs.reftablamain.$children[0].$el.style.display="none",a.$refs.reftablamain.$children[2].$el.style.display="none",a.$refs.reftablamain.$el.style.marginBottom="10px",delete a.$refs.reftablamain.getTableAttrs.height,a.$refs.reftablamain.$children[1].$el.style.cssText=""}e.$refs.reftablamain.data.length>1?(e.text=JSON.parse(o()(e.$refs.reftablamain.data)),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),i()):1==e.$refs.reftablamain.data.length&&i()})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:u.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingPic/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!1,hasView:!1,hasEdit:!1,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(t,a){0==e.editdisabled&&(t.length>1?e.editdisabled=!0:e.editdisabled=!1)},"select-all":function(t){0==e.editdisabled&&(e.editdisabled=0!=t)}},extraSelectData:{class1:function(){return[{label:"劳务费",value:"劳务费"},{label:"JLAT",value:"JLAT"},{label:"海外出差",value:"海外出差"},{label:"国内出差",value:"国内出差"}]}},operationAttrs:{width:"100px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuStampingPic",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingPic/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingPic/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingPic/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingPic/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,extraCheng:{class1:this.showClass2}}}},methods:{showClass2:function(e,t){this.$refs.reftableitem.$refs.dialogForm.value.class2="";"劳务费"==t?this.$refs.reftableitem.$refs.dialogForm.setOptions("class2",[{label:"直劳",value:"直劳"},{label:"准直",value:"准直"},{label:"间接",value:"间接"}]):"JLAT"!=t&&"海外出差"!=t&&"国内出差"!=t||this.$refs.reftableitem.$refs.dialogForm.setOptions("class2",[{label:"人月",value:"人月"},{label:"渡航回数",value:"渡航回数"}])},reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId,e.picId=t.picId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId,e.picId=this.$refs.reftableitem.data[0].picId},findByTableName:function(){this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,method:"get",url:"/sysTableinfo/findByTableNameByCarYears?tablename=tIcBuStampingPic&versionId="+this.$refs.reftablamain.selected[0].versionId},this.tableitemKey++},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.findByTableName(),i.getinfo(e.versionId),u.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.editdisabled=e,i.tableitem.disabledNew=e})})},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),u.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.editdisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},findafter2:function(e,t){e.length<=0||this.$refs.reftableitem.$refs.table.setCurrentRow(e[0])},add:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.getTableColumns;this.$refs.editpicshow.show("add",t,e,{},"/tIcBuStampingPic/save")},edit:function(){var e=this.$refs.reftableitem.selected[0];if(""!=e&&void 0!=e){var t=e,a=this.$refs.reftablamain.selected[0].versionId,i=this.$refs.reftableitem.getTableColumns;this.$refs.editpicshow.show("edit",i,a,t,"/tIcBuStampingPic/save")}else this.$message({type:"info",message:"请选择要编辑的数据！"})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(m.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingPic/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].picId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(m.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingPic/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(m.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingPic/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(m.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getMaterialsInfo?versionId="+e}).then(function(e){t.info=[{name:"材料市况"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;u.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].picId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"picId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"},on:{update:e.findafter2}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.add"),disabled:e.isDisabled},on:{click:e.add}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",disabled:e.editdisabled,label:e.$t("action.edit")}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("edit-pic-table",{ref:"editpicshow",on:{update:e.findByTableName}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var b=a("VU/8")(p,f,!1,function(e){a("Y+xd")},"data-v-5e260912",null);t.default=b.exports},ZwJZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("AUIh"),r={name:"StandardDictionary",data:function(){return{dialogLoading:!1,loading:!1,userInfo:null,dialogInfo:{type:"",mark:""},editPriceForm:{lowfee:"",highfee:"",guidefee:"",memo:""},editPriceFormRules:{lowfee:[{required:!0,message:"请输入最低价",trigger:"blur"}],highfee:[{required:!0,message:"请输入最高价",trigger:"blur"}],guidefee:[{required:!0,message:"请输入指导价",trigger:"blur"}]},dialogEdit:!1,pageResult:{rows:[]},pageRequest:{page:1,pageSize:10,showTotal:!0}}},methods:{resetMoney:function(e){console.log(e);var t=e.target.value;e.target.value=t.match(/^\d*(\.?\d{0,2})/g)[0]||null,this.editPriceForm[e.target.getAttribute("data-flag")]=e.target.value,console.log(this.editPriceForm[e.target.getAttribute("data-flag")])},resetForm:function(e){var t=this;t.dialogEdit=!1,t.dialogInfo.type="",t.dialogInfo.mark="",t.$nextTick(function(){t.$refs.editPriceForm.resetFields()})},submitForm:function(e){var t=this;t.$refs[e].validate(function(e){console.log(e),e&&t.$api.common.xyjPostyw({url:"/sysOil/save",data:{guidefee:t.editPriceForm.guidefee,highfee:t.editPriceForm.highfee,id:t.editPriceForm.id,lastUpdateBy:t.userInfo,lowfee:t.editPriceForm.lowfee,memo:t.editPriceForm.memo}}).then(function(e){console.log(e),t.dialogEdit=!1,t.getMainList(),t.$message({message:"编辑成功！",type:"success",duration:2e3})})})},editPrice:function(e){var t=this;t.dialogInfo.type=e.type,t.dialogInfo.mark=e.mark,t.dialogEdit=!0,void 0!=t.$refs.editPriceForm&&t.$nextTick(function(){t.$refs.editPriceForm.resetFields()}),setTimeout(function(){t.editPriceForm.lowfee=e.lowfee,t.editPriceForm.highfee=e.highfee,t.editPriceForm.guidefee=e.guidefee,t.editPriceForm.memo=e.memo,t.editPriceForm.id=e.id},100)},getMainList:function(){var e=this;e.loading=!0,e.$api.common.xyjQueryPost({url:"/sysOil/query",data:{pageBean:e.pageRequest,params:{},querys:[],sorter:[]}}).then(function(t){if(e.loading=!1,t.data.rows.length>0){t.data.rows.forEach(function(e,t){switch(e.type){case 0:e.mark="00#柴油";break;case 1:e.mark="-10#柴油";break;case 2:e.mark="95#汽油";break;case 3:e.mark="92#汽油"}e.changeTime=Object(i.b)(e.lastUpdateTime,"-",":")})}e.pageResult=t.data})}},mounted:function(){this.userInfo=sessionStorage.getItem("user"),this.getMainList()}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"sx"},[e._v("油标号信息")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-row",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"fa fa-refresh"},on:{click:e.getMainList}},[e._v(" 刷新")])],1)],1)])]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.pageResult.rows,border:""}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.editPrice(t.row)}}},[e._v("编辑")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"mark",label:"标号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"lowfee",label:"最低油价（元/升）"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"highfee",label:"最高油价（元/升）"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"guidefee",label:"国家指导价（元/升）"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"lastUpdateBy",label:"操作员"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"memo",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"changeTime",label:"操作时间"}})],1),e._v(" "),e._e(),e._v(" "),a("transition",{attrs:{name:"el-fade-in"}},[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticClass:"dialog-oil-price-edit",staticStyle:{width:"50%",margin:"auto"},attrs:{title:"油价编辑",visible:e.dialogEdit},on:{"update:visible":function(t){e.dialogEdit=t}}},[a("div",[a("div",{staticClass:"dialog-static-info"},[a("span",{staticClass:"dialog-info-label"},[e._v("编号:")]),e._v(" "),a("span",{staticClass:"dialog-oil-info"},[e._v(e._s(e.dialogInfo.type))])]),e._v(" "),a("div",{staticClass:"dialog-static-info"},[a("span",{staticClass:"dialog-info-label"},[e._v("标号:")]),e._v(" "),a("span",{staticClass:"dialog-oil-info"},[e._v(e._s(e.dialogInfo.mark))])])]),e._v(" "),a("el-form",{ref:"editPriceForm",attrs:{model:e.editPriceForm,rules:e.editPriceFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"最低油价:",prop:"lowfee"}},[a("el-input",{staticClass:"dialog-short-input",attrs:{"data-flag":"lowfee"},nativeOn:{input:function(t){return e.resetMoney(t)}},model:{value:e.editPriceForm.lowfee,callback:function(t){e.$set(e.editPriceForm,"lowfee",t)},expression:"editPriceForm.lowfee"}}),e._v(" "),a("span",[e._v("元/升")])],1),e._v(" "),a("el-form-item",{attrs:{label:"最高油价:",prop:"highfee"}},[a("el-input",{staticClass:"dialog-short-input",attrs:{"data-flag":"highfee"},nativeOn:{input:function(t){return e.resetMoney(t)}},model:{value:e.editPriceForm.highfee,callback:function(t){e.$set(e.editPriceForm,"highfee",t)},expression:"editPriceForm.highfee"}}),e._v(" "),a("span",[e._v("元/升")])],1),e._v(" "),a("el-form-item",{attrs:{label:"国家指导价:",prop:"guidefee"}},[a("el-input",{staticClass:"dialog-short-input",attrs:{"data-flag":"guidefee"},nativeOn:{input:function(t){return e.resetMoney(t)}},model:{value:e.editPriceForm.guidefee,callback:function(t){e.$set(e.editPriceForm,"guidefee",t)},expression:"editPriceForm.guidefee"}}),e._v(" "),a("span",[e._v("元/升")])],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"memo"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.editPriceForm.memo,callback:function(t){e.$set(e.editPriceForm,"memo",t)},expression:"editPriceForm.memo"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetForm("editPriceForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("editPriceForm")}}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(r,s,!1,function(e){a("d2np")},"data-v-30a97808",null);t.default=l.exports},aDJU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("xyj-table",this._b({ref:"otable",attrs:{id:"1"}},"xyj-table",this.tableConfig,!1))],1)},staticRenderFns:[]};var r=a("VU/8")({name:"Brand",mounted:function(){this.$refs.otable.hasPagination=!1},data:function(){return{tableConfig:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcDbBrand",sorter:[{direction:"ASC",property:"id"}],bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcDbBrand/query",method:"post",notCondition:!0},bNewUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcDbBrand/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcDbBrand/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyBaseUrl,url:"/tIcDbBrand/delete",method:"delete"},onManualEdit:function(e,t){e&&(e.id=t.id)}}}}},i,!1,function(e){a("chCm")},"data-v-1416e3cc",null);t.default=r.exports},aU6b:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAtCAYAAADsvzj/AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAMxSURBVGhD7ZfbSzpBFMd/f20PPVgR9lAPQVSUQVfIQCm0C91Lo+gCEhTiBSUpK4KiyKIgCgqiB+H8+A7MMuYpdndmYQkfPqB7zsycz467c/xXrVbpL9AQ8RsNEb/REPEbnoucnZ1RoVBgYybxXGRqaorGxsbYmEk8Fbm+vqampiZBLpdjc0zhqUgsFrNEhoeH2RxTeCby+PhoSUi8fFY8E1lcXBTFT09PC/B5aGiIzTWBJyJvb2/WLjw/Pwvk91KpxI7RxROR1dVVUTR2Ql6TuzIwMFCTawrjIl9fX9bdx07I6+qu4GxRx5jAuMjm5qYoVt0NidyVUChUF9PFlQju+v39PRWLRdrb26O5uTkaHR2lrq4u666ruyFRd6W9vZ36+vooHA6LF8P+/j5dXFzQx8dH3Tg72BJZWVmh8fFx6uzstAr5CeRwuyFBrKOjgx2rAlGcPcvLy+w837G9I5FIpGah1tZWGhkZofX1dXFq39zc0Pv7OzuW4/X1lU5PT2l3d5dmZmaov7+fAoFAzRpob7ixHI5+WlhQLpLJZNgcHTCnGwng+BmJx+PWYsfHx2yOG46OjlxLAFcP+8LCgrXo4eEhm+OEVCqlJQFciYClpSVr8YODAzbHDnjr6UoA1yJAnuBgZ2eHzfmN7e1tIxJASwRsbGxYxSQSCTaHA7mmJIC2COju7hYF4YDk4hx49UoRLu4UIyKyoJeXFzbOoXbIlUqFzXGCtsjDw4MopqWlhY3/Rltbmxibz+fZuBO0RXCWoJif/jRdXl7S1dUVG5uYmBBjt7a22LgTtEVmZ2dFMWj81OtoWdBIIgYmJydFo6nmJJNJEUP7o153g7YIdgLFyFMev/fvfZnK/Pw8PT09iVz0aLjW09NTM6cbtEWCwaAo5u7uzvqfLkEjWC6XRXsuhSVra2tiDD43NzfT5+cnO79dtERwZ1EIWm61c+3t7WVfxefn5zVC6KDljbi9va3Ld4KWSDabtYoCEEin02yuysnJSd0OYS4u1y5aInjbSAE3zSOekcHBQTEHHnwuxy5aItFo1Ej3ixcF5uJidtF+2P1CQ8RvNET8RkPEb/wRkSr9B19RWliq0MfsAAAAAElFTkSuQmCC"},asYw:function(e,t){},axT7:function(e,t){},b3vt:function(e,t){},b6ri:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"WeldingInvestZDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingInvestZDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuWeldingInvestZDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingInvestZDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingInvestZDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingInvestZDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingInvestZDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuWeldingInvestZDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuWeldingInvestZDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingInvestZDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingInvestZDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuWeldingInvestZDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingInvestZDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuWeldingInvestZDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuWeldingInvestZDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuWeldingInvestZDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].investId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"investId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuWeldingInvestZDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("Aw6S")},"data-v-7877fefe",null);t.default=f.exports},bOWS:function(e,t){},bU0e:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("TE7m"),l={name:"TIcBuCarType",mounted:function(){},data:function(){return{tableitemKey:1,loading:!1,tabName:"first",djbtn:!1,data:"",tablemain:{dialogVisible:!1,carForm:{platformName:"",brandName:"",cartype:"",typeName:"",stageName:"",hearing:"",sopdate:"",contractdate:"",carType:"",stage:"",versionId:"",dcarType:"",dstage:"",dversionId:""},platformNames:[],brandNames:[],typeNames:[],stageNames:[],ctypes:"",stages:"",editions:"",dctypes:"",dstages:"",deditions:"",carRules:{platformName:{required:!0,message:"请选择平台",trigger:"blur"},brandName:{required:!0,message:"请选择品牌",trigger:"blur"},cartype:{required:!0,message:"请输入车型",trigger:"blur"},typeName:{required:!0,message:"请选择类型",trigger:"blur"},stageName:{required:!0,message:"请选择阶段",trigger:"blur"},sopdate:{required:!0,message:"请选择sop时点",trigger:"blur"},contractdate:{required:!0,message:"请选择合同日期",trigger:"blur"},carType:{required:!0,message:"请选择基点车型",trigger:"blur"},stage:{required:!0,message:"请选择阶段",trigger:"blur"},versionId:{required:!0,message:"请选择版本信息",trigger:"blur"},dcarType:{required:!0,message:"请选择对比车型",trigger:"blur"},dstage:{required:!0,message:"请选择阶段",trigger:"blur"},dversionId:{required:!0,message:"请选择版本信息",trigger:"blur"}},hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick},operationAttrs:{width:"100px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcBuCarType",sorter:[{direction:"ASC",property:"id"}],bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcBuCarType/query",method:"post",notCondition:!0},bNewUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcBuCarType/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcBuCarType/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew},tableitem:{hasDelete:!0,hasNew:!1,hasView:!1,hasEdit:!1,disabled:!0,isShow:!1,dialogVisible:!1,versionForm:{id:"",carTypeId:"",factoryType:"",version:"",factoryName:"",factoryAddress:"",hearingTimes:"",memo:"",approvalState:1},factorys:[],times:[{label:"第1次",value:1},{label:"第2次",value:2},{label:"第3次",value:3},{label:"第4次",value:4},{label:"第5次",value:5}],verRules:{version:{required:!0,message:"请填写版本号",trigger:"blur"},factoryName:{required:!0,message:"请选择工厂名称",trigger:"blur"},factoryAddress:{required:!0,message:"请选择工厂地址",trigger:"blur"},hearingTimes:{required:!0,message:"请选择听证次数",trigger:"blur"},approvalState:{required:!0,message:"请选择",trigger:"blur"}},formatters:{confirm:function(e,t,a){switch(a){case 0:return"编辑中";case 1:return"冻结";case 2:return"解冻中";case 3:return"审批中";case 4:return"审批完成"}}},tableAttrs:{height:"150px",width:"800px"},tableOns:{"row-click":this.rowclick2},operationAttrs:{width:"130px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcBuCarVersion",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"carTypeId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcBuCarVersion/query",method:"post",notCondition:!1},bDeleteUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcBuCarVersion/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew},projectValue:{hasDelete:!1,hasNew:!0,hasView:!1,hasEdit:!0,formatters:{projectType:function(e,t,a){switch(a){case 1:return"冲压";case 2:return"焊装";case 3:return"树脂";case 4:return"涂装";case 5:return"总装";case 6:return"电池";case 7:return"全体";case 8:return"预备费";default:return a}}},tableAttrs:{height:"500px",width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"100px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcBuProjectValue",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"carVersionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcBuProjectValue/query",method:"post",notCondition:!1},bEditUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcBuProjectValue/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcBuProjectValue/delete",method:"delete"},onManualEdit:this.refProjectManualEdit},carVersionId:"",tableYearData:[],yearId:"",rcYear:"",dialogVisible:!1,dialogVisibleCar:!1,tableCarTypeData:[],nodes:[],addCarTypeForm:{id:"",node:"",bdate:"",edate:"",iconType:1},addRules:{node:{required:!0,message:"请输入节点",trigger:"blur"},bdate:{required:!0,message:"请选择开始日期",trigger:"blur"},edate:{required:!0,message:"请选择结束日期",trigger:"blur"}},page:1,size:5,total:null,paginationSizes:[5,10,15,20,25],paginationLayout:"total,sizes,prev,pager,next,jumper",roleRow:"",tablePeopData:[],dataRole:"",grantUsername:"",grantUserid:"",email:"",dataRoles:[{label:"车型技术科",value:1},{label:"冲压技术科",value:2},{label:"涂装技术科",value:3},{label:"树脂技术科",value:4},{label:"焊装技术科",value:5},{label:"总装技术科",value:6},{label:"电池技术科",value:7}],dialogVisibleRole:!1,roleLoading:!1,dataRoelForm:{role:""},columns:[{label:"用户名",prop:"user_name",minWidth:"90"},{label:"员工编号",prop:"emp_code",minWidth:"95"},{label:"员工姓名",prop:"emp_name",minWidth:"95"},{label:"默认组织",prop:"default_org_name",minWidth:"95"},{label:"所属组织",prop:"org_name",minWidth:"95"},{label:"生效日期",prop:"active_date",minWidth:"95"},{label:"失效日期",prop:"disable_date",minWidth:"95"},{label:"邮箱",prop:"email",minWidth:"70"}],roleForm:{username:"",empname:""},roleData:[],showOverflowTooltip:!0,tableFile:[],row:"",column:"",imageUrl:"",fileList:[],fileDisabled:!0,filedialogVisible:!1,dialogImageUrl:"",dscHttp:"",titleName:"",picBusiness:{hasDelete:!1,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{height:"500px",width:"800px"},formatters:{ccType:function(e,t,a){switch(a){case 1:return"国内出差";case 2:return"日本出差"}}},tableOns:{select:function(e,t){}},operationAttrs:{width:"100px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcBuPicBusiness",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"carVersionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcBuPicBusiness/query",method:"post",notCondition:!1},bEditUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcBuPicBusiness/save",method:"post",close:!0},onManualEdit:this.refProjectManualEdit},picJlat:{hasDelete:!1,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{height:"500px",width:"800px"},formatters:{jlatName:function(e,t,a){switch(a){case 1:return"技术支援费（工作日）";case 2:return"日津贴（滞留日）";case 3:return"住宿费";case 4:return"签证费";case 5:return"交通费（机票平均）"}}},tableOns:{select:function(e,t){}},operationAttrs:{width:"100px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcBuPicJlat",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"carVersionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcBuPicJlat/query",method:"post",notCondition:!1},bEditUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcBuPicJlat/save",method:"post",close:!0},onManualEdit:this.refProjectManualEdit},picSv:{hasDelete:!1,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{height:"500px",width:"800px"},formatters:{svName:function(e,t,a){switch(a){case 1:return"S/V(宿泊費、日当)";case 2:return"S/V(航空旅費)"}}},tableOns:{select:function(e,t){}},operationAttrs:{width:"100px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcBuPicSv",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"carVersionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcBuPicSv/query",method:"post",notCondition:!1},bEditUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcBuPicSv/save",method:"post",close:!0},onManualEdit:this.refProjectManualEdit},labourPrice:{hasDelete:!1,hasNew:!0,hasView:!1,hasEdit:!0,hasPagination:!1,tableAttrs:{height:"125px",width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"100px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcBuLabourPrice",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"carVersionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcBuLabourPrice/query",method:"post",notCondition:!1},bEditUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcBuLabourPrice/save",method:"post",close:!0},onManualEdit:this.refProjectManualEdit,onManualNew:this.reftableitemManualNew},rate:{hasDelete:!1,hasNew:!0,hasView:!1,hasEdit:!0,hasPagination:!1,tableAttrs:{height:"125px",width:"100px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"100px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcBuRate",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"carVersionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcBuRate/query",method:"post",notCondition:!1},bEditUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcBuRate/save",method:"post",close:!0},onManualEdit:this.refProjectManualEdit,onManualNew:this.reftableitemManualNew},baseLabourPrice:{hasDelete:!1,hasNew:!0,hasView:!1,hasEdit:!0,hasPagination:!1,tableAttrs:{height:"125px",width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"100px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcBuBaseLabourPrice",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"carVersionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcBuBaseLabourPrice/query",method:"post",notCondition:!1},bEditUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcBuBaseLabourPrice/save",method:"post",close:!0},onManualEdit:this.refProjectManualEdit,onManualNew:this.reftableitemManualNew},materialDate:{hasDelete:!1,hasNew:!0,hasView:!1,hasEdit:!0,hasPagination:!1,tableAttrs:{height:"125px",width:"800px"},tableOns:{select:function(e,t){}},extraAttribute:{mdate:{type:"date",valueFormat:"yyyy-MM-dd",format:"yyyy-MM-dd"}},operationAttrs:{width:"100px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcBuMaterialDate",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"carVersionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcBuMaterialDate/query",method:"post",notCondition:!1},bEditUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcBuMaterialDate/save",method:"post",close:!0},onManualEdit:this.refProjectManualEdit,onManualNew:this.reftableitemManualNew},topDate:{hasDelete:!1,hasNew:!0,hasView:!1,hasEdit:!0,hasPagination:!1,tableAttrs:{height:"125px",width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"100px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcBuTop",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"carVersionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcBuTop/query",method:"post",notCondition:!1},bEditUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcBuTop/save",method:"post",close:!0},onManualEdit:this.refProjectManualEdit,onManualNew:this.reftableitemManualNew},serviceCharge:{hasDelete:!1,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{height:"500px",width:"800px"},tableOns:{select:function(e,t){}},formatters:{type:function(e,t,a){switch(a){case 1:return"直接(CNY/H)";case 2:case 3:return"准直接(CNY/H)"}}},operationAttrs:{width:"100px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcBuServiceCharge",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"carVersionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcBuServiceCharge/query",method:"post",notCondition:!1},bEditUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcBuServiceCharge/save",method:"post",close:!0},onManualEdit:this.refProjectManualEdit,onManualNew:this.reftableitemManualNew},dstr:{hasDelete:!1,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{height:"500px",width:"800px"},formatters:{projectName:function(e,t,a){switch(a){case 1:return"冲压";case 2:return"焊装";case 3:return"树脂";case 4:return"涂装";case 5:return"总装";case 6:return"电池";case 7:return"汇总"}}},tableOns:{select:function(e,t){}},operationAttrs:{width:"100px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcBuDstr",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"carVersionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcBuDstr/query",method:"post",notCondition:!1},bEditUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcBuDstr/save",method:"post",close:!0},onManualEdit:this.refProjectManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},refProjectManualEdit:function(e,t){e&&(e.id=t.id,e.carVersionId=t.carVersionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},findByTableName:function(){this.serviceCharge.editAxios={hostUrl:this.global.lyBaseUrl,method:"get",url:"/sysTableinfo/findByTableNameFollowVersionId?tablename=TIcBuServiceCharge&versionId="+this.carVersionId},this.tableitemKey++},rowclick:function(e,t,a){var i=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.id}),this.$nextTick(function(){i.$refs.reftableitem.getList()})},rowclick2:function(e,t,a){this.carVersionId=e.id,this.handleClick(),this.onDongJie()},findafter:function(e,t){var a=this;e.length<=0||(this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e[0].id}),this.$nextTick(function(){a.$refs.reftableitem.getList()}))},findafter2:function(e,t){this.data=e,e.length>0?(this.carVersionId=e[0].id,this.$refs.reftableitem.$refs.table.setCurrentRow(e[0]),this.handleClick(),this.onDongJie()):(this.handleClick(),this.onDongJie())},chooseFactory:function(){var e=this;Object(s.a)({hostUrl:this.global.lyBaseUrl,method:"post",url:"/tIcDbFactory/query",data:{queryFilter:""}}).then(function(t){console.log(t),e.tableitem.factorys=t.rows}).catch(function(t){e.$message.error(t.message)})},chooseFactoryAdress:function(){for(var e=this.tableitem.versionForm.factoryName,t=0;t<this.tableitem.factorys.length;t++)e==this.tableitem.factorys[t].factoryName&&(this.tableitem.versionForm.factoryAddress=this.tableitem.factorys[t].factoryAddress,this.tableitem.versionForm.factoryType=this.tableitem.factorys[t].factoryType)},addMainShow:function(){this.tablemain.carForm.id="",this.tablemain.dialogVisible=!0,this.getPlatform(),this.getBrand(),this.getDbType(),this.getStage(),this.chooseCarType(0),this.compareCarType(0)},editMainShow:function(){var e=this.$refs.reftablamain.selected;e<=0?this.$message.warning("请选择要编辑的数据"):(this.editMainClick(e[0]),this.getPlatform(),this.getBrand(),this.getDbType(),this.getStage(),this.chooseCarType(e[0]),this.compareCarType(e[0]),this.tablemain.dialogVisible=!0)},editMainClick:function(e){console.log(e);var t=this.tablemain.carForm;this.$nextTick(function(){t.id=e.id,t.platformName=e.platform,t.brandName=e.brand,t.cartype=e.cartype,t.typeName=e.ctype,t.stageName=e.stage,t.hearing=e.hearing,t.sopdate=e.sopdate,t.contractdate=e.contractdate})},getPlatform:function(){var e=this;Object(s.a)({hostUrl:this.global.lyBaseUrl,url:"/tIcDbPlatform/query",method:"post",data:{}}).then(function(t){e.tablemain.platformNames=t.rows.map(function(e,t){return e})}).catch(function(t){e.$message.error(t.message)})},getBrand:function(){var e=this;Object(s.a)({hostUrl:this.global.lyBaseUrl,url:"/tIcDbBrand/query",method:"post",data:{}}).then(function(t){e.tablemain.brandNames=t.rows.map(function(e,t){return e})}).catch(function(t){e.$message.error(t.message)})},getDbType:function(){var e=this;Object(s.a)({hostUrl:this.global.lyBaseUrl,url:"/tIcDbType/query",method:"post",data:{}}).then(function(t){e.tablemain.typeNames=t.rows.map(function(e,t){return e})}).catch(function(t){e.$message.error(t.message)})},getStage:function(){var e=this;Object(s.a)({hostUrl:this.global.lyBaseUrl,url:"/tIcDbStage/query",method:"post",data:{}}).then(function(t){e.tablemain.stageNames=t.rows.map(function(e,t){return e})}).catch(function(t){e.$message.error(t.message)})},chooseCarType:function(e){var t=this;Object(s.a)({hostUrl:this.global.lyBaseUrl,url:"/tIcBuCarType/getCar",method:"get"}).then(function(a){if(console.log(a),t.tablemain.ctypes=a,0==e){t.tablemain.carForm.carType=a[0].ctype,t.tablemain.carForm.stage=a[0].stages[0].stage;var i=a[0].stages[0].versions;t.tablemain.carForm.versionId=i[0].versionId}else t.tablemain.carForm.carType=e.basecar,t.tablemain.carForm.stage=e.basestage,t.tablemain.carForm.versionId=e.baseCarVersionId;t.chooseStage()}).catch(function(e){t.$message.error(e.message)})},chooseStage:function(){var e=this.tablemain.carForm.carType;this.tablemain.stages=this.tablemain.ctypes.reduce(function(t,a,i,r){return a.ctype==e&&(t=a.stages),t},[]),this.chooseVersion()},chooseVersion:function(){var e=this.tablemain.carForm.stage;this.tablemain.editions=this.tablemain.stages.reduce(function(t,a,i,r){return a.stage==e&&(t=a.versions),t},[])},chooseStage2:function(){var e=this,t=this.tablemain.carForm.carType;this.tablemain.stages=this.tablemain.ctypes.reduce(function(a,i,r,s){return i.ctype==t&&(e.tablemain.carForm.stage=i.stages[0].stage,e.tablemain.carForm.versionId=i.stages[0].versions[0].versionId,a=i.stages),a},[]),this.chooseVersion2()},chooseVersion2:function(){var e=this,t=this.tablemain.carForm.stage;this.tablemain.editions=this.tablemain.stages.reduce(function(a,i,r,s){return i.stage==t&&(e.tablemain.carForm.versionId=i.versions[0].versionId,a=i.versions),a},[])},compareCarType:function(e){var t=this;Object(s.a)({hostUrl:this.global.lyBaseUrl,url:"/tIcBuCarType/getCar",method:"get"}).then(function(a){if(console.log(a),t.tablemain.dctypes=a,0==e){t.tablemain.carForm.dcarType=a[0].ctype,t.tablemain.carForm.dstage=a[0].stages[0].stage;var i=a[0].stages[0].versions;t.tablemain.carForm.dversionId=i[0].versionId}else t.tablemain.carForm.dcarType=e.compareType,t.tablemain.carForm.dstage=e.compareStage,t.tablemain.carForm.dversionId=e.compareCarVersionId;t.compareStage()}).catch(function(e){t.$message.error(e.message)})},compareStage:function(){var e=this.tablemain.carForm.dcarType;this.tablemain.dstages=this.tablemain.dctypes.reduce(function(t,a,i,r){return a.ctype==e&&(t=a.stages),t},[]),this.compareVersion()},compareVersion:function(){var e=this.tablemain.carForm.dstage;this.tablemain.deditions=this.tablemain.dstages.reduce(function(t,a,i,r){return a.stage==e&&(t=a.versions),t},[])},compareStage2:function(){var e=this,t=this.tablemain.carForm.dcarType;this.tablemain.dstages=this.tablemain.dctypes.reduce(function(a,i,r,s){return i.ctype==t&&(e.tablemain.carForm.dstage=i.stages[0].stage,e.tablemain.carForm.dversionId=i.stages[0].versions[0].versionId,a=i.stages),a},[]),this.compareVersion2()},compareVersion2:function(){var e=this,t=this.tablemain.carForm.dstage;this.tablemain.deditions=this.tablemain.dstages.reduce(function(a,i,r,s){return i.stage==t&&(e.tablemain.carForm.dversionId=i.versions[0].versionId,a=i.versions),a},[])},carTypeSubmit:function(){var e=this;this.$refs.carForm.validate(function(t){if(!t)return!1;e.loading=!0,Object(s.a)({hostUrl:e.global.lyBaseUrl,method:"post",url:"/tIcBuCarType/save",data:{id:e.tablemain.carForm.id,platform:e.tablemain.carForm.platformName,brand:e.tablemain.carForm.brandName,cartype:e.tablemain.carForm.cartype,ctype:e.tablemain.carForm.typeName,stage:e.tablemain.carForm.stageName,hearing:e.tablemain.carForm.hearing,sopdate:e.tablemain.carForm.sopdate,contractdate:e.tablemain.carForm.contractdate,basecar:e.tablemain.carForm.carType,basestage:e.tablemain.carForm.stage,baseCarVersionId:e.tablemain.carForm.versionId,compareType:e.tablemain.carForm.dcarType,compareStage:e.tablemain.carForm.dstage,compareCarVersionId:e.tablemain.carForm.dversionId}}).then(function(t){console.log(t),e.$message({type:"success",message:"保存成功！"}),e.loading=!1,e.$nextTick(function(){e.$refs.reftablamain.getList()}),e.tablemain.dialogVisible=!1,e.$refs.carForm.resetFields()}).catch(function(t){e.$message.error(t.message),e.loading=!1}).finally(function(t){e.loading=!1})})},addShow:function(){this.tableitem.versionForm.id="";var e=this.$refs.reftableitem.data.length+1;this.tableitem.versionForm.hearingTimes=e,this.tableitem.dialogVisible=!0,this.chooseFactory()},onSubmit:function(){var e=this;this.$refs.versionForm.validate(function(t){if(!t)return!1;e.loading=!0;var a=e.$refs.reftablamain.selected[0].id;Object(s.a)({hostUrl:e.global.lyBaseUrl,method:"post",url:"/tIcBuCarVersion/save",data:{id:e.tableitem.versionForm.id,carTypeId:a,factoryType:e.tableitem.versionForm.factoryType,version:e.tableitem.versionForm.version,factoryName:e.tableitem.versionForm.factoryName,factoryAddress:e.tableitem.versionForm.factoryAddress,hearingTimes:e.tableitem.versionForm.hearingTimes,memo:e.tableitem.versionForm.memo,approvalState:e.tableitem.versionForm.approvalState}}).then(function(t){console.log(t),e.$message({type:"success",message:"保存成功！"}),e.loading=!1,e.tableitem.customQuery[100]=r()({},e.tableitem.customQuery[100],{value100:a}),e.$nextTick(function(){e.$refs.reftableitem.getList()}),e.tableitem.dialogVisible=!1,e.$refs.versionForm.resetFields()}).catch(function(t){e.$message.error(t.message),e.loading=!1})})},editShow:function(){var e=this.$refs.reftableitem.selected;e<=0?this.$message.warning("请选择要编辑的数据"):(this.editClick(e[0]),this.chooseFactory(),this.tableitem.dialogVisible=!0)},editClick:function(e){console.log(e);var t=this.tableitem.versionForm;this.$nextTick(function(){t.id=e.id,t.carTypeId=e.carTypeId,t.factoryType=e.factoryType,t.version=e.version,t.approvalState=e.approvalState,t.factoryName=e.factoryName,t.factoryAddress=e.factoryAddress,t.hearingTimes=e.hearingTimes,t.memo=e.memo})},onDongJie:function(){this.$refs.projectValue.disabledEdit=!1,this.djbtn=!1,this.$refs.picBusiness.disabledEdit=!1,this.$refs.picJlat.disabledEdit=!1,this.$refs.picSv.disabledEdit=!1,this.$refs.labourPrice.disabledEdit=!1,this.$refs.rate.disabledEdit=!1,this.$refs.baseLabourPrice.disabledEdit=!1,this.$refs.materialDate.disabledEdit=!1,this.$refs.topDate.disabledEdit=!1,this.$refs.serviceCharge.disabledEdit=!1,this.$refs.dstr.disabledEdit=!1;var e="";"0"==(e=this.data.length>0?this.$refs.reftableitem.selected[0].confirm:-1)||"2"==e?(this.tableitem.disabled=!1,this.tableitem.isShow=!1):"1"==e?(this.tableitem.isShow=!0,this.tableitem.disabled=!1,this.$refs.projectValue.disabledEdit=!0,this.djbtn=!0,this.$refs.picBusiness.disabledEdit=!0,this.$refs.picJlat.disabledEdit=!0,this.$refs.picSv.disabledEdit=!0,this.$refs.labourPrice.disabledEdit=!0,this.$refs.rate.disabledEdit=!0,this.$refs.baseLabourPrice.disabledEdit=!0,this.$refs.materialDate.disabledEdit=!0,this.$refs.topDate.disabledEdit=!0,this.$refs.serviceCharge.disabledEdit=!0,this.$refs.dstr.disabledEdit=!0):this.tableitem.disabled=!0},dongjie:function(){var e=this,t=this.$refs.reftableitem.selected,a=new FormData;a.append("id",t[0].id),a.append("type",0);var i=new FormData;i.append("id",t[0].id),i.append("type",1),this.tableitem.isShow?this.$confirm("确认解冻这个版本的前提条件","确认解冻？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.a)({hostUrl:e.global.lyBaseUrl,method:"post",url:"/tIcBuCarVersion/freeze",data:a}).then(function(t){e.$message({type:"success",message:"已解冻!"}),e.tableitem.customQuery[100]=r()({},e.tableitem.customQuery[100],{value100:e.$refs.reftablamain.selected[0].id}),e.$nextTick(function(){e.$refs.reftableitem.getList()})}).catch(function(t){e.$message.error(t.message)})}).catch(function(){e.$message({type:"info",message:"已取消"})}):this.$confirm("确认冻结这个版本的前提条件","确认冻结？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.a)({hostUrl:e.global.lyBaseUrl,method:"post",url:"/tIcBuCarVersion/freeze",data:i}).then(function(t){e.$message({type:"success",message:"已冻结!"}),e.tableitem.customQuery[100]=r()({},e.tableitem.customQuery[100],{value100:e.$refs.reftablamain.selected[0].id}),e.$nextTick(function(){e.$refs.reftableitem.getList()})}).catch(function(t){e.$message.error(t.message)})}).catch(function(){e.$message({type:"info",message:"已取消"})})},queryYear:function(e){var t=this;Object(s.a)({hostUrl:this.global.lyBaseUrl,method:"post",url:"/tIcBuCarTypeYear/query",data:{pageBean:{page:0,pageSize:0,showTotal:!0,summary:[{fieldName:"rcYear",type:"sum"}]},params:{},querys:[{hasInitValue:!1,operation:"EQUAL",property:"carVersionId",relation:"AND",value:e}],selfDate:{},showTotal:[{property:"",showContainAllData:!0,totalType:"sum"}],sorter:[{direction:"ASC",property:"id"}]}}).then(function(e){t.tableYearData=e.rows}).catch(function(e){t.$message.error(e.message)})},addYear:function(){var e=this;if(console.log(this.carVersionId),""==this.rcYear)this.$message.error("请选择年份!");else{this.loading=!0;var t=this.rcYear.getFullYear();Object(s.a)({hostUrl:this.global.lyBaseUrl,method:"post",url:"/tIcBuCarTypeYear/save",data:{id:this.yearId,rcYear:t,carVersionId:this.carVersionId}}).then(function(t){e.$message({type:"success",message:"保存成功！"}),e.loading=!1,e.dialogVisible=!1,e.queryYear(e.carVersionId)}).catch(function(t){e.loading=!1,e.$message.error(t.message)})}},yearSave:function(e,t){var a=this,i=t.rcYear.getFullYear();Object(s.a)({hostUrl:this.global.lyBaseUrl,method:"post",url:"/tIcBuCarTypeYear/save",data:{id:t.id,rcYear:i,carVersionId:this.carVersionId}}).then(function(e){a.$message({type:"success",message:"保存成功！"}),a.queryYear(a.carVersionId)}).catch(function(e){a.$message.error(e.message)})},deleteYear:function(e,t){var a=this;this.$confirm("确定删除吗？","提示",{type:"warning",beforeClose:function(e,i,r){"confirm"==e?(i.confirmButtonLoading=!0,Object(s.a)({hostUrl:a.global.lyBaseUrl,method:"delete",url:"/tIcBuCarTypeYear/delete",data:[t.id]}).then(function(e){a.$message({type:"success",message:"删除成功！"}),r(),a.queryYear(a.carVersionId)}).catch(function(e){a.$message.error(e.message)}).finally(function(e){i.confirmButtonLoading=!1})):"cancel"==e&&r()}}).catch(function(){})},queryCarType:function(e){var t=this;Object(s.a)({hostUrl:this.global.lyBaseUrl,method:"post",url:"/tIcBuMilepost/query",data:{pageBean:{page:0,pageSize:0,showTotal:!0,summary:[]},params:{},querys:[{hasInitValue:!1,operation:"EQUAL",property:"carVersionId",relation:"AND",value:e}],selfDate:{},showTotal:[{property:"",showContainAllData:!0,totalType:"sum"}],sorter:[{direction:"ASC",property:"id"}]}}).then(function(e){t.tableCarTypeData=e.rows}).catch(function(e){t.$message.error(e.message)})},getNode:function(){var e=this;Object(s.a)({hostUrl:this.global.lyBaseUrl,method:"post",url:"/tIcDbStage/query",data:{}}).then(function(t){e.nodes=t.rows})},addMile:function(){var e=this;this.loading=!0,this.$refs.addCarTypeForm.validate(function(t){if(!t)return!1;var a=e.addCarTypeForm.node,i=e.addCarTypeForm.bdate,r=e.addCarTypeForm.edate;Object(s.a)({hostUrl:e.global.lyBaseUrl,method:"post",url:"/tIcBuMilepost/save",data:{id:e.addCarTypeForm.id,node:a,bdate:i,edate:r,iconType:e.addCarTypeForm.iconType,carVersionId:e.carVersionId}}).then(function(t){e.$message({type:"success",message:"保存成功！"}),e.loading=!1,e.dialogVisibleCar=!1,e.$refs.addCarTypeForm.resetFields(),e.queryCarType(e.carVersionId)}).catch(function(t){e.loading=!1,e.$message.error(t.message)})})},carTypeSave:function(e,t){var a=this.addCarTypeForm;this.$nextTick(function(){a.id=t.id,a.node=t.node,a.bdate=t.bdate,a.edate=t.edate,a.iconType=t.iconType}),this.dialogVisibleCar=!0},deleteCarType:function(e,t){var a=this;this.$confirm("确定删除吗？","提示",{type:"warning",beforeClose:function(e,i,r){"confirm"==e?(i.confirmButtonLoading=!0,Object(s.a)({hostUrl:a.global.lyBaseUrl,method:"delete",url:"/tIcBuMilepost/delete",data:[t.id]}).then(function(e){a.$message({type:"success",message:"删除成功！"}),r(),a.queryCarType(a.carVersionId)}).catch(function(e){a.$message.error(e.message)}).finally(function(e){i.confirmButtonLoading=!1})):"cancel"==e&&r()}}).catch(function(){})},handleSizeChange:function(e){this.size!==e&&(this.size=e,this.selectRole())},handleCurrentChange:function(e){this.page!==e&&(this.page=e,this.selectRole())},queryPeop:function(e){var t=this;Object(s.a)({hostUrl:this.global.lyBaseUrl,method:"post",url:"/tIcBuDataRole/query",data:{pageBean:{page:0,pageSize:0,showTotal:!0,summary:[]},params:{},querys:[{hasInitValue:!1,operation:"EQUAL",property:"carVersionId",relation:"AND",value:e}],selfDate:{},showTotal:[{property:"",showContainAllData:!0,totalType:"sum"}],sorter:[{direction:"ASC",property:"id"}]}}).then(function(e){t.tablePeopData=e.rows}).catch(function(e){t.$message.error(e.message)})},addRole:function(){var e=this;Object(s.a)({hostUrl:this.global.lyBaseUrl,method:"post",url:"/tIcBuDataRole/save",data:{carVersionId:this.$refs.reftableitem.selected[0].id,dataRole:1,grantId:"",grantUsername:"",id:"",email:""}}).then(function(t){e.queryPeop(e.carVersionId)}).catch(function(t){e.$message.error(t.message)})},selectRole:function(e,t,a,i){var r=this;if(this.roleRow=e,"授权人员"==t.label&&"授权人员"==t.label){var s=this.roleForm.username,l=this.roleForm.empname;this.dialogVisibleRole=!0,this.$api.expapi.getUserList({pagesize:this.size,pageindex:this.page,sort:"asc",sortfield:"user_name",orgid:123,oldorgid:123,username:s,empname:l,searchchild:1}).then(function(e){r.roleData=e.rows}).catch(function(e){r.$message.error(e.message)})}},searchRole:function(){var e=this,t=this.roleForm.username,a=this.roleForm.empname;this.dialogVisibleRole=!0,this.$api.expapi.getUserList({pagesize:this.size,pageindex:this.page,sort:"asc",sortfield:"user_name",orgid:123,oldorgid:123,username:t,empname:a,searchchild:1}).then(function(t){e.roleData=t.rows}).catch(function(t){e.$message.error(t.message)})},getRoleRow:function(e,t,a){this.grantUsername=e.emp_name,this.grantUserid=e.user_id,this.email=e.email},chooseRole:function(){this.roleLoading=!0;for(var e=this.roleRow.id,t=0;t<this.tablePeopData.length;t++)this.tablePeopData[t].id==e&&(this.tablePeopData[t].grantUsername=this.grantUsername,""==this.grantUsername?this.$message({type:"info",message:"请选择授权人员！"}):this.dialogVisibleRole=!1),this.roleLoading=!1},roleSave:function(e,t){var a=this;Object(s.a)({hostUrl:this.global.lyBaseUrl,method:"post",url:"/tIcBuDataRole/save",data:{carVersionId:this.$refs.reftableitem.selected[0].id,dataRole:t.dataRole,grantId:this.grantUserid,grantUsername:this.grantUsername,id:t.id,email:this.email}}).then(function(e){a.$message({type:"success",message:"保存成功！"}),a.queryPeop(a.carVersionId)}).catch(function(e){a.$message.error(e.message)})},deleteRole:function(e,t){var a=this;this.$confirm("确定删除吗？","提示",{type:"warning",beforeClose:function(e,i,r){"confirm"==e?(i.confirmButtonLoading=!0,Object(s.a)({hostUrl:a.global.lyBaseUrl,method:"delete",url:"/tIcBuDataRole/delete",data:[t.id]}).then(function(e){a.$message({type:"success",message:"删除成功！"}),r(),a.queryPeop(a.carVersionId)}).catch(function(e){a.$message.error(e.message)}).finally(function(e){i.confirmButtonLoading=!1})):"cancel"==e&&r()}}).catch(function(){})},close:function(){this.tableitem.dialogVisible=!1,this.$refs.versionForm.resetFields()},closeMain:function(){this.tablemain.dialogVisible=!1,this.$refs.carForm.resetFields()},queryFile:function(e){var t=this;Object(s.a)({hostUrl:this.global.lyBaseUrl,method:"post",url:"/tIcBuFileData/query",data:{pageBean:{page:0,pageSize:0,showTotal:!0,summary:[]},params:{},querys:[{hasInitValue:!1,operation:"EQUAL",property:"carVersionId",relation:"AND",value:e}],selfDate:{},showTotal:[{property:"",showContainAllData:!0,totalType:"sum"}],sorter:[{direction:"ASC",property:"id"}]}}).then(function(e){t.tableFile=e.rows}).catch(function(e){t.$message.error(e.message)})},addFile:function(){var e=this;Object(s.a)({hostUrl:this.global.lyBaseUrl,method:"post",url:"/tIcBuFileData/save",data:{sqPicture:"",zbPicture:"",scPicture:"",sjFile:"",gsFile:"",dscHttp:"",carVersionId:this.$refs.reftableitem.selected[0].id,id:"",memo:""}}).then(function(t){e.queryFile(e.carVersionId)}).catch(function(t){e.$message.error(t.message)})},deleteFile:function(e,t){var a=this;this.$confirm("确定删除吗？","提示",{type:"warning",beforeClose:function(e,i,r){"confirm"==e?(i.confirmButtonLoading=!0,Object(s.a)({hostUrl:a.global.lyBaseUrl,method:"delete",url:"/tIcBuFileData/delete",data:[t.id]}).then(function(e){a.$message({type:"success",message:"删除成功！"}),r(),a.queryFile(a.carVersionId)}).catch(function(e){a.$message.error(e.message)}).finally(function(e){i.confirmButtonLoading=!1})):"cancel"==e&&r()}}).catch(function(){})},picturePreview:function(e,t,a,i){this.row=e,this.column=t;var r="";"sqPicture"==t.property&&""!=e.sqPicture&&null!=e.sqPicture?(r=e.sqPicture,this.titleName=e.sqPicture+"的信息",this.dialogImageUrl=r,this.filedialogVisible=!0,this.fileDisabled=!0):"zbPicture"==t.property&&""!=e.zbPicture&&null!=e.zbPicture?(r=e.zbPicture,this.titleName=e.zbPicture+"的信息",this.dialogImageUrl=r,this.filedialogVisible=!0,this.fileDisabled=!0):"scPicture"==t.property&&""!=e.scPicture&&null!=e.scPicture?(r=e.scPicture,this.titleName=e.scPicture+"的信息",this.dialogImageUrl=r,this.filedialogVisible=!0,this.fileDisabled=!0):"gsFile"==t.property&&""!=e.gsFile&&null!=e.gsFile?(r=e.gsFile,this.titleName=e.gsFile+"的信息",this.dialogImageUrl=r,this.filedialogVisible=!0,this.fileDisabled=!0):"sjFile"==t.property&&""!=e.sjFile&&null!=e.sjFile?(r=e.sjFile,this.titleName=e.sjFile+"的信息",this.dialogImageUrl=r,this.filedialogVisible=!0,this.fileDisabled=!0):(this.filedialogVisible=!1,this.fileDisabled=!1)},deleteOnePic:function(){var e=this,t=this.column,a="";"sqPicture"==t.property?a=1:"zbPicture"==t.property&&(a=2),"scPicture"==t.property&&(a=3),"gsFile"==t.property&&(a=4),"sjFile"==t.property&&(a=5),this.$confirm("确定删除吗？","提示",{type:"warning",beforeClose:function(t,i,r){"confirm"==t?(i.confirmButtonLoading=!0,Object(s.a)({hostUrl:e.global.lyBaseUrl,method:"get",url:"/tIcBuFileData/deleteOne?id="+e.row.id+"&type="+a}).then(function(t){e.$message({type:"success",message:"删除成功！"}),e.filedialogVisible=!1,r(),e.queryFile(e.carVersionId)}).catch(function(t){e.$message.error(t.message),r()}).finally(function(e){i.confirmButtonLoading=!1})):"cancel"==t&&r()}}).catch(function(){})},downloadOnePic:function(){var e=this,t=new FormData;"sqPicture"==this.column.property?t.append("path",this.row.sqPicture):"zbPicture"==this.column.property?t.append("path",this.row.zbPicture):"scPicture"==this.column.property?t.append("path",this.row.scPicture):"gsFile"==this.column.property?t.append("path",this.row.gsFile):"sjFile"==this.column.property&&t.append("path",this.row.sjFile),Object(s.a)({hostUrl:this.global.lyBaseUrl,method:"post",url:"/tIcBuFileData/download",data:t}).then(function(t){e.loading=!0;var a=new Blob([t.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var i=document.createElement("a");i.download=decodeURIComponent(t.filename),i.style.display="none",i.href=URL.createObjectURL(a),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}else navigator.msSaveBlob(a,decodeURIComponent(t.filename))}).catch(function(t){e.$message.error(t.message)}).finally(function(t){e.loading=!1})},sqhandleChange:function(e){var t=this,a=this.row,i=this.column,r=new FormData;r.append("file",e.file),r.append("versionId",this.$refs.reftableitem.selected[0].id),r.append("id",a.id),r.append("ip",this.global.lyBaseUrl),"sqPicture"==i.property?r.append("type",1):"zbPicture"==i.property?r.append("type",2):"scPicture"==i.property?r.append("type",3):"gsFile"==i.property?r.append("type",4):"sjFile"==i.property&&r.append("type",5),Object(s.a)({hostUrl:this.global.lyBaseUrl,url:"/tIcBuFileData/upload",method:"post",data:r}).then(function(e){console.log(e),t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.queryFile(t.carVersionId),t.fileDisabled=!0})}).catch(function(e){t.$message.error(e.message)})},saveDSC:function(e){var t=this;Object(s.a)({hostUrl:this.global.lyBaseUrl,method:"post",url:"/tIcBuFileData/save",data:{dscHttp:e,carVersionId:this.$refs.reftableitem.selected[0].id,id:this.row.id}}).then(function(e){t.$message({message:"导入成功",type:"success"}),t.queryFile(t.carVersionId)}).catch(function(e){t.$message.error(e.message)})},handleClick:function(){var e=this,t="";t=this.data.length>0?this.$refs.reftableitem.selected[0].id:-1,"first"==this.tabName?(this.projectValue.customQuery[100]=r()({},this.projectValue.customQuery[100],{value100:t}),this.$nextTick(function(){e.$refs.projectValue.getList()})):"sec"==this.tabName?this.queryYear(t):"three"==this.tabName?(this.queryCarType(t),this.getNode()):"four"==this.tabName?this.queryPeop(t):"five"==this.tabName?this.queryFile(t):"six"==this.tabName?(this.picBusiness.customQuery[100]=r()({},this.picBusiness.customQuery[100],{value100:t}),this.$nextTick(function(){e.$refs.picBusiness.getList()})):"seven"==this.tabName?(this.picJlat.customQuery[100]=r()({},this.picJlat.customQuery[100],{value100:t}),this.$nextTick(function(){e.$refs.picJlat.getList()})):"eight"==this.tabName?(this.picSv.customQuery[100]=r()({},this.picSv.customQuery[100],{value100:t}),this.$nextTick(function(){e.$refs.picSv.getList()})):"nine"==this.tabName?(this.labourPrice.customQuery[100]=r()({},this.labourPrice.customQuery[100],{value100:t}),this.rate.customQuery[100]=r()({},this.rate.customQuery[100],{value100:t}),this.baseLabourPrice.customQuery[100]=r()({},this.baseLabourPrice.customQuery[100],{value100:t}),this.materialDate.customQuery[100]=r()({},this.materialDate.customQuery[100],{value100:t}),this.topDate.customQuery[100]=r()({},this.topDate.customQuery[100],{value100:t}),this.$nextTick(function(){e.$refs.labourPrice.getList(),e.$refs.rate.getList(),e.$refs.baseLabourPrice.getList(),e.$refs.materialDate.getList(),e.$refs.topDate.getList()})):"ten"==this.tabName?(this.serviceCharge.customQuery[100]=r()({},this.serviceCharge.customQuery[100],{value100:t}),this.$nextTick(function(){e.findByTableName()}),setTimeout(function(){e.onDongJie()},100)):"eleven"==this.tabName&&(this.dstr.customQuery[100]=r()({},this.dstr.customQuery[100],{value100:t}),this.$nextTick(function(){e.$refs.dstr.getList()}))}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",[i("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[i("template",{slot:"xyjcontainer"},[i("span",[e._v("车型基本信息")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"10px",padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.addMainShow}},[e._v(e._s(e.$t("action.add")))]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.editMainShow}},[e._v(e._s(e.$t("action.edit")))])],1)],2)],1),e._v(" "),[i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"carForm",staticStyle:{"text-align":"left"},attrs:{title:"车型基本信息",visible:e.tablemain.dialogVisible,width:"70%","close-on-click-modal":!1},on:{"update:visible":function(t){e.$set(e.tablemain,"dialogVisible",t)},close:e.closeMain}},[i("div",{staticStyle:{"text-align":"center"}},[i("el-form",{ref:"carForm",attrs:{rules:e.tablemain.carRules,model:e.tablemain.carForm,"label-width":"140px"}},[i("el-form-item",{attrs:{label:"平台",prop:"platformName"}},[i("el-select",{attrs:{placeholder:"请选择平台",clearable:""},model:{value:e.tablemain.carForm.platformName,callback:function(t){e.$set(e.tablemain.carForm,"platformName",t)},expression:"tablemain.carForm.platformName"}},e._l(e.tablemain.platformNames,function(e){return i("el-option",{key:e.id,attrs:{label:e.platformName,value:e.platformName}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"品牌",prop:"brandName"}},[i("el-select",{attrs:{placeholder:"请选择品牌",clearable:""},model:{value:e.tablemain.carForm.brandName,callback:function(t){e.$set(e.tablemain.carForm,"brandName",t)},expression:"tablemain.carForm.brandName"}},e._l(e.tablemain.brandNames,function(e){return i("el-option",{key:e.id,attrs:{label:e.brandName,value:e.brandName}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"车型",prop:"cartype"}},[i("el-input",{attrs:{placeholder:"请选择车型",clearable:""},model:{value:e.tablemain.carForm.cartype,callback:function(t){e.$set(e.tablemain.carForm,"cartype",t)},expression:"tablemain.carForm.cartype"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"类型",prop:"typeName"}},[i("el-select",{attrs:{placeholder:"请选择类型",clearable:""},model:{value:e.tablemain.carForm.typeName,callback:function(t){e.$set(e.tablemain.carForm,"typeName",t)},expression:"tablemain.carForm.typeName"}},e._l(e.tablemain.typeNames,function(e){return i("el-option",{key:e.id,attrs:{label:e.typeName,value:e.typeName}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"阶段",prop:"stageName"}},[i("el-select",{attrs:{placeholder:"请选择阶段",clearable:""},model:{value:e.tablemain.carForm.stageName,callback:function(t){e.$set(e.tablemain.carForm,"stageName",t)},expression:"tablemain.carForm.stageName"}},e._l(e.tablemain.stageNames,function(e){return i("el-option",{key:e.id,attrs:{label:e.stageName,value:e.stageName}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"听证次数",prop:"hearing"}},[i("el-input",{attrs:{disabled:"",clearable:""},model:{value:e.tablemain.carForm.hearing,callback:function(t){e.$set(e.tablemain.carForm,"hearing",t)},expression:"tablemain.carForm.hearing"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"SOP时点",prop:"sopdate"}},[i("el-date-picker",{attrs:{clearable:"","value-format":"yyyy-MM-dd",type:"date",placeholder:"请选择SOP时点"},model:{value:e.tablemain.carForm.sopdate,callback:function(t){e.$set(e.tablemain.carForm,"sopdate",t)},expression:"tablemain.carForm.sopdate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"合同日期",prop:"contractdate"}},[i("el-date-picker",{attrs:{clearable:"","value-format":"yyyy-MM-dd",type:"date",placeholder:"请选择合同日期"},model:{value:e.tablemain.carForm.contractdate,callback:function(t){e.$set(e.tablemain.carForm,"contractdate",t)},expression:"tablemain.carForm.contractdate"}})],1),e._v(" "),i("el-form-item"),e._v(" "),i("el-form-item",{attrs:{prop:"carType",label:"基点车型"}},[i("el-select",{attrs:{clearable:"",placeholder:"选择车型"},on:{change:e.chooseStage2},model:{value:e.tablemain.carForm.carType,callback:function(t){e.$set(e.tablemain.carForm,"carType",t)},expression:"tablemain.carForm.carType"}},e._l(e.tablemain.ctypes,function(e){return i("el-option",{key:e.ctype,attrs:{value:e.ctype,label:e.ctype}})}))],1),e._v(" "),i("el-form-item",{attrs:{prop:"stage",label:"基点车阶段"}},[i("el-select",{attrs:{clearable:"",placeholder:"选择阶段"},on:{change:e.chooseVersion2},model:{value:e.tablemain.carForm.stage,callback:function(t){e.$set(e.tablemain.carForm,"stage",t)},expression:"tablemain.carForm.stage"}},e._l(e.tablemain.stages,function(e){return i("el-option",{key:e.stage,attrs:{value:e.stage,label:e.stage}})}))],1),e._v(" "),i("el-form-item",{attrs:{prop:"versionId",label:"基点车版本信息"}},[i("el-select",{attrs:{clearable:"",placeholder:"选择版本"},model:{value:e.tablemain.carForm.versionId,callback:function(t){e.$set(e.tablemain.carForm,"versionId",t)},expression:"tablemain.carForm.versionId"}},e._l(e.tablemain.editions,function(e){return i("el-option",{key:e.versionId,attrs:{value:e.versionId,label:e.version+"/"+e.factoryName}})}))],1),e._v(" "),i("el-form-item",{attrs:{prop:"dcarType",label:"对比车型"}},[i("el-select",{attrs:{clearable:"",placeholder:"选择车型"},on:{change:e.compareStage2},model:{value:e.tablemain.carForm.dcarType,callback:function(t){e.$set(e.tablemain.carForm,"dcarType",t)},expression:"tablemain.carForm.dcarType"}},e._l(e.tablemain.dctypes,function(e){return i("el-option",{key:e.ctype,attrs:{value:e.ctype,label:e.ctype}})}))],1),e._v(" "),i("el-form-item",{attrs:{prop:"dstage",label:"对比车型阶段"}},[i("el-select",{attrs:{clearable:"",placeholder:"选择阶段"},on:{change:e.compareVersion2},model:{value:e.tablemain.carForm.dstage,callback:function(t){e.$set(e.tablemain.carForm,"dstage",t)},expression:"tablemain.carForm.dstage"}},e._l(e.tablemain.dstages,function(e){return i("el-option",{key:e.stage,attrs:{value:e.stage,label:e.stage}})}))],1),e._v(" "),i("el-form-item",{attrs:{prop:"dversionId",label:"对比车版本信息"}},[i("el-select",{attrs:{clearable:"",placeholder:"选择版本"},model:{value:e.tablemain.carForm.dversionId,callback:function(t){e.$set(e.tablemain.carForm,"dversionId",t)},expression:"tablemain.carForm.dversionId"}},e._l(e.tablemain.deditions,function(e){return i("el-option",{key:e.versionId,attrs:{value:e.versionId,label:e.version+"/"+e.factoryName}})}))],1)],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticStyle:{padding:"7px"},attrs:{size:"mini"},on:{click:e.closeMain}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),i("el-button",{staticStyle:{padding:"7px"},attrs:{size:"mini",type:"primary",loading:e.loading},on:{click:e.carTypeSubmit}},[e._v(e._s(e.$t("action.comfirm")))])],1)])],e._v(" "),i("div",[i("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"},on:{update:e.findafter2}},"xyj-table",e.tableitem,!1),[i("template",{slot:"xyjcontainer"},[i("span",[e._v("版本信息")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"10px",padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.addShow}},[e._v(e._s(e.$t("action.add")))]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",size:"mini",disabled:e.tableitem.disabled},on:{click:e.dongjie}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.tableitem.isShow,expression:"!tableitem.isShow"}]},[e._v(e._s(e.$t("action.frozen")))]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.tableitem.isShow,expression:"tableitem.isShow"}]},[e._v(e._s(e.$t("action.thaw")))])]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.editShow}},[e._v(e._s(e.$t("action.edit")))])],1)],2)],1),e._v(" "),[i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"versionForm",staticStyle:{"text-align":"left"},attrs:{title:"版本信息",visible:e.tableitem.dialogVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.$set(e.tableitem,"dialogVisible",t)},close:e.close}},[i("div",{staticStyle:{"text-align":"center"}},[i("el-form",{ref:"versionForm",attrs:{rules:e.tableitem.verRules,model:e.tableitem.versionForm,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"版本号",prop:"version"}},[i("el-input",{attrs:{clearable:""},model:{value:e.tableitem.versionForm.version,callback:function(t){e.$set(e.tableitem.versionForm,"version",t)},expression:"tableitem.versionForm.version"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"工厂名称",prop:"factoryName"}},[i("el-select",{attrs:{clearable:"",placeholder:"请选择工厂名称"},on:{change:e.chooseFactoryAdress},model:{value:e.tableitem.versionForm.factoryName,callback:function(t){e.$set(e.tableitem.versionForm,"factoryName",t)},expression:"tableitem.versionForm.factoryName"}},e._l(e.tableitem.factorys,function(e){return i("el-option",{key:e.id,attrs:{label:e.factoryName,value:e.factoryName}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"工厂地址",prop:"factoryAddress"}},[i("el-input",{attrs:{clearable:""},model:{value:e.tableitem.versionForm.factoryAddress,callback:function(t){e.$set(e.tableitem.versionForm,"factoryAddress",t)},expression:"tableitem.versionForm.factoryAddress"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"听证次数",prop:"hearingTimes"}},[i("el-select",{attrs:{clearable:"",placeholder:"请选择听证次数"},model:{value:e.tableitem.versionForm.hearingTimes,callback:function(t){e.$set(e.tableitem.versionForm,"hearingTimes",t)},expression:"tableitem.versionForm.hearingTimes"}},e._l(e.tableitem.times,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"memo"}},[i("el-input",{attrs:{clearable:""},model:{value:e.tableitem.versionForm.memo,callback:function(t){e.$set(e.tableitem.versionForm,"memo",t)},expression:"tableitem.versionForm.memo"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"是否需要审批",prop:"approvalState"}},[i("el-radio-group",{model:{value:e.tableitem.versionForm.approvalState,callback:function(t){e.$set(e.tableitem.versionForm,"approvalState",t)},expression:"tableitem.versionForm.approvalState"}},[i("el-radio",{attrs:{label:0}},[e._v("需要审批")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v("不需要审批")])],1)],1)],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticStyle:{padding:"7px"},attrs:{size:"mini"},on:{click:e.close}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),i("el-button",{staticStyle:{padding:"7px"},attrs:{size:"mini",type:"primary",loading:e.loading},on:{click:e.onSubmit}},[e._v(e._s(e.$t("action.comfirm")))])],1)])],e._v(" "),i("div",{staticStyle:{"margin-top":"50px"}},[i("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[i("el-tab-pane",{attrs:{label:"1工程成本指导值",name:"first"}},[[i("xyj-table",e._b({ref:"projectValue",attrs:{id:"3"}},"xyj-table",e.projectValue,!1))]],2),e._v(" "),i("el-tab-pane",{attrs:{label:"2车型大日程年份",name:"sec"}},[[i("div",{staticStyle:{"text-align":"left","margin-bottom":"10px"}},[i("el-button",{staticStyle:{padding:"7px"},attrs:{disabled:e.djbtn,type:"primary",size:"mini"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(e._s(e.$t("action.add")))])],1),e._v(" "),i("div",[i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"新增",visible:e.dialogVisible,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",[i("el-date-picker",{attrs:{type:"year","default-value":"2020",placeholder:"选择年"},model:{value:e.rcYear,callback:function(t){e.rcYear=t},expression:"rcYear"}})],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticStyle:{padding:"7px"},attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),i("el-button",{staticStyle:{padding:"7px"},attrs:{size:"mini",type:"primary",loading:e.loading},on:{click:e.addYear}},[e._v(e._s(e.$t("action.comfirm")))])],1)])],1),e._v(" "),i("el-table",{staticStyle:{width:"40%",float:"left",height:"500px"},attrs:{data:e.tableYearData,border:""}},[i("el-table-column",{attrs:{fixed:"left",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"7px"},attrs:{disabled:e.djbtn,size:"mini"},on:{click:function(a){e.yearSave(t.$index,t.row)}}},[e._v(e._s(e.$t("action.save")))]),e._v(" "),i("el-button",{staticStyle:{padding:"7px"},attrs:{disabled:e.djbtn,type:"danger",size:"mini"},on:{click:function(a){e.deleteYear(t.$index,t.row)}}},[e._v(e._s(e.$t("action.delete")))])]}}])}),e._v(" "),i("el-table-column",{attrs:{type:"index",width:"70px",label:"序号",sortable:"custom"}}),e._v(" "),i("el-table-column",{attrs:{label:"车型大日程年份",prop:"rcYear",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-date-picker",{attrs:{type:"year",placeholder:"选择年"},model:{value:t.row.rcYear,callback:function(a){e.$set(t.row,"rcYear",a)},expression:"scope.row.rcYear"}})]}}])})],1)]],2),e._v(" "),i("el-tab-pane",{attrs:{label:"3车型里程碑",name:"three"}},[[i("div",{staticStyle:{"text-align":"left","margin-bottom":"10px"}},[i("el-button",{staticStyle:{padding:"7px"},attrs:{disabled:e.djbtn,type:"primary",size:"mini"},on:{click:function(t){e.dialogVisibleCar=!0,e.addCarTypeForm.id=""}}},[e._v(e._s(e.$t("action.add")))])],1),e._v(" "),i("div",[i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"车型里程牌",visible:e.dialogVisibleCar,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisibleCar=t},close:function(t){e.dialogVisibleCar=!1,e.$refs.addCarTypeForm.resetFields()}}},[i("div",[i("el-form",{ref:"addCarTypeForm",attrs:{rules:e.addRules,model:e.addCarTypeForm,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"节点",prop:"node"}},[i("el-select",{staticStyle:{width:"70%"},attrs:{clearable:""},model:{value:e.addCarTypeForm.node,callback:function(t){e.$set(e.addCarTypeForm,"node",t)},expression:"addCarTypeForm.node"}},e._l(e.nodes,function(e){return i("el-option",{key:e.id,attrs:{value:e.stageName,label:e.stageName}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"开始日期",prop:"bdate"}},[i("el-date-picker",{staticStyle:{width:"70%"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addCarTypeForm.bdate,callback:function(t){e.$set(e.addCarTypeForm,"bdate",t)},expression:"addCarTypeForm.bdate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"结束日期",prop:"edate"}},[i("el-date-picker",{staticStyle:{width:"70%"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addCarTypeForm.edate,callback:function(t){e.$set(e.addCarTypeForm,"edate",t)},expression:"addCarTypeForm.edate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"图形",prop:"iconType"}},[i("el-radio-group",{model:{value:e.addCarTypeForm.iconType,callback:function(t){e.$set(e.addCarTypeForm,"iconType",t)},expression:"addCarTypeForm.iconType"}},[i("el-radio",{attrs:{label:1}},[i("img",{attrs:{src:a("aU6b")}})]),e._v(" "),i("el-radio",{attrs:{label:2}},[i("img",{attrs:{src:a("QbQI")}})]),e._v(" "),i("el-radio",{attrs:{label:3}},[i("img",{attrs:{src:a("YzAn")}})])],1)],1)],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticStyle:{padding:"7px"},attrs:{size:"mini"},on:{click:function(t){e.dialogVisibleCar=!1,e.$refs.addCarTypeForm.resetFields()}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),i("el-button",{staticStyle:{padding:"7px"},attrs:{size:"mini",type:"primary",loading:e.loading},on:{click:e.addMile}},[e._v(e._s(e.$t("action.comfirm")))])],1)])],1),e._v(" "),i("el-table",{staticStyle:{width:"800px","text-align":"center",height:"500px"},attrs:{data:e.tableCarTypeData,border:""}},[i("el-table-column",{attrs:{fixed:"left",label:"操作",width:"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"7px"},attrs:{disabled:e.djbtn,size:"mini"},on:{click:function(a){e.carTypeSave(t.$index,t.row)}}},[e._v(e._s(e.$t("action.edit")))]),e._v(" "),i("el-button",{staticStyle:{padding:"7px"},attrs:{disabled:e.djbtn,type:"danger",size:"mini"},on:{click:function(a){e.deleteCarType(t.$index,t.row)}}},[e._v(e._s(e.$t("action.delete")))])]}}])}),e._v(" "),i("el-table-column",{attrs:{type:"index",width:"70px",label:"序号",sortable:"custom"}}),e._v(" "),i("el-table-column",{attrs:{prop:"node",label:"车型里程碑节点","min-width":"150px",sortable:"custom"}}),e._v(" "),i("el-table-column",{attrs:{prop:"bdate",label:"开始日期","min-width":"160px",sortable:"custom"}}),e._v(" "),i("el-table-column",{attrs:{prop:"edate",label:"结束日期","min-width":"160px",sortable:"custom"}}),e._v(" "),i("el-table-column",{attrs:{prop:"iconType",label:"图形","min-width":"100px",sortable:"custom",formatter:function(e,t,a){return 1==a?"五角星":2==a?"矩形":3==a?"不规则图形":void 0}}})],1)]],2),e._v(" "),i("el-tab-pane",{attrs:{label:"4人员体制/数据权限",name:"four"}},[[i("div",{staticStyle:{"text-align":"left","margin-bottom":"10px"}},[i("el-button",{staticStyle:{padding:"7px"},attrs:{disabled:e.djbtn,type:"primary",size:"mini"},on:{click:e.addRole}},[e._v(e._s(e.$t("action.add")))])],1),e._v(" "),i("div",[i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"roleForm",attrs:{title:"人员选择",visible:e.dialogVisibleRole,"close-on-click-modal":!1,width:"70%"},on:{"update:visible":function(t){e.dialogVisibleRole=t}}},[i("div",[i("el-form",{ref:"roleForm",attrs:{model:e.roleForm,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"用户名：",prop:"username"}},[i("el-input",{attrs:{clearable:""},model:{value:e.roleForm.username,callback:function(t){e.$set(e.roleForm,"username",t)},expression:"roleForm.username"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"员工姓名：",prop:"empname"}},[i("el-input",{attrs:{clearable:""},model:{value:e.roleForm.empname,callback:function(t){e.$set(e.roleForm,"empname",t)},expression:"roleForm.empname"}})],1),e._v(" "),i("el-form-item",[i("span",{staticStyle:{float:"left"}},[i("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.searchRole}},[e._v(e._s(e.$t("action.search")))])],1)])],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleData,border:"","highlight-current-row":""},on:{"row-click":e.getRoleRow}},[i("el-table-column",{attrs:{align:"center",label:"序号",type:"index",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.$index+(e.page-1)*e.size+1)+" ")])]}}])}),e._v(" "),e._l(e.columns,function(t){return i("el-table-column",{key:t.label,attrs:{align:"center",sortable:"",prop:t.prop,label:t.label,"min-width":t.minWidth,"show-overflow-tooltip":e.showOverflowTooltip}})})],2),e._v(" "),i("el-pagination",{staticStyle:{"text-align":"right",padding:"10px 0"},attrs:{"current-page":e.page,"page-sizes":e.paginationSizes,"page-size":e.size,total:e.total,layout:e.paginationLayout},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticStyle:{padding:"7px"},attrs:{size:"mini"},on:{click:function(t){e.dialogVisibleRole=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),i("el-button",{staticStyle:{padding:"7px"},attrs:{loading:e.roleLoading,size:"mini",type:"primary"},on:{click:e.chooseRole}},[e._v(e._s(e.$t("action.comfirm")))])],1)])],1),e._v(" "),i("el-table",{staticStyle:{width:"40%",float:"left",height:"500px"},attrs:{data:e.tablePeopData,border:""},on:{"cell-click":e.selectRole}},[i("el-table-column",{attrs:{fixed:"left",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"7px"},attrs:{disabled:e.djbtn,size:"mini"},on:{click:function(a){e.roleSave(t.$index,t.row)}}},[e._v(e._s(e.$t("action.submit")))]),e._v(" "),i("el-button",{staticStyle:{padding:"7px"},attrs:{disabled:e.djbtn,type:"danger",size:"mini"},on:{click:function(a){e.deleteRole(t.$index,t.row)}}},[e._v(e._s(e.$t("action.delete")))])]}}])}),e._v(" "),i("el-table-column",{attrs:{type:"index",width:"70px",label:"序号",sortable:"custom"}}),e._v(" "),i("el-table-column",{attrs:{label:"数据角色",prop:"dataRole",sortable:"custom","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-select",{staticStyle:{width:"140px"},model:{value:t.row.dataRole,callback:function(a){e.$set(t.row,"dataRole",a)},expression:"scope.row.dataRole"}},e._l(e.dataRoles,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"授权人员",prop:"grantUsername",sortable:"custom","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.grantUsername)+"\n            ")]}}])})],1)]],2),e._v(" "),i("el-tab-pane",{attrs:{label:"5文件资料",name:"five"}},[[i("div",{staticStyle:{"text-align":"left","margin-bottom":"10px"}},[i("el-button",{staticStyle:{padding:"7px"},attrs:{disabled:e.djbtn,type:"primary",size:"mini"},on:{click:e.addFile}},[e._v(e._s(e.$t("action.add")))])],1),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"文件信息",visible:e.filedialogVisible},on:{"update:visible":function(t){e.filedialogVisible=t}}},[i("img",{staticStyle:{width:"500px",height:"400px"},attrs:{src:e.dialogImageUrl,alt:""}}),e._v(" "),i("div",[e._v(e._s(e.titleName))]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticStyle:{padding:"7px"},attrs:{disabled:e.djbtn,size:"mini",type:"danger"},on:{click:e.deleteOnePic}},[e._v(e._s(e.$t("action.delete")))]),e._v(" "),i("el-button",{staticStyle:{padding:"7px"},attrs:{loading:e.loading,size:"mini",disabled:e.djbtn,type:"primary"},on:{click:e.downloadOnePic}},[e._v(e._s(e.$t("action.download")))])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%",float:"left",height:"500px"},attrs:{data:e.tableFile,border:""},on:{"cell-click":e.picturePreview}},[i("el-table-column",{attrs:{fixed:"left",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"7px"},attrs:{disabled:e.djbtn,type:"danger",size:"mini"},on:{click:function(a){e.deleteFile(t.$index,t.row)}}},[e._v(e._s(e.$t("action.delete")))])]}}])}),e._v(" "),i("el-table-column",{attrs:{type:"index",width:"70px",label:"序号",sortable:"custom"}}),e._v(" "),i("el-table-column",{attrs:{label:"商企台数及Mix图片",prop:"sqPicture",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-upload",{staticClass:"upload-demo",attrs:{disabled:e.fileDisabled,action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"file-list":e.fileList,"http-request":e.sqhandleChange}},[i("el-input",{attrs:{placeholder:"请选择"},model:{value:t.row.sqPicture,callback:function(a){e.$set(t.row,"sqPicture",a)},expression:"scope.row.sqPicture"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"周边台数图片",prop:"zbPicture",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-upload",{staticClass:"upload-demo",attrs:{disabled:e.fileDisabled,action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"file-list":e.fileList,"http-request":e.sqhandleChange}},[i("el-input",{attrs:{placeholder:"请选择"},model:{value:t.row.zbPicture,callback:function(a){e.$set(t.row,"zbPicture",a)},expression:"scope.row.zbPicture"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"生产能力图片",prop:"scPicture",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-upload",{staticClass:"upload-demo",attrs:{disabled:e.fileDisabled,action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"file-list":e.fileList,"http-request":e.sqhandleChange}},[i("el-input",{attrs:{placeholder:"请选择"},model:{value:t.row.scPicture,callback:function(a){e.$set(t.row,"scPicture",a)},expression:"scope.row.scPicture"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"部品工顺文件",prop:"gsFile",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-upload",{staticClass:"upload-demo",attrs:{disabled:e.fileDisabled,action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"file-list":e.fileList,"http-request":e.sqhandleChange}},[i("el-input",{attrs:{placeholder:"请选择"},model:{value:t.row.gsFile,callback:function(a){e.$set(t.row,"gsFile",a)},expression:"scope.row.gsFile"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"设计仕样书文件",prop:"sjFile",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-upload",{staticClass:"upload-demo",attrs:{disabled:e.fileDisabled,action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"file-list":e.fileList,"http-request":e.sqhandleChange}},[i("el-input",{attrs:{placeholder:"请选择"},model:{value:t.row.sjFile,callback:function(a){e.$set(t.row,"sjFile",a)},expression:"scope.row.sjFile"}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"DCS网址",prop:"dscHttp",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input",{attrs:{placeholder:"请填写DCS网址"},on:{change:e.saveDSC},model:{value:t.row.dscHttp,callback:function(a){e.$set(t.row,"dscHttp",a)},expression:"scope.row.dscHttp"}})]}}])})],1)]],2),e._v(" "),i("el-tab-pane",{attrs:{label:"6PIC",name:"six"}},[[i("xyj-table",e._b({ref:"picBusiness",attrs:{id:"8"}},"xyj-table",e.picBusiness,!1))]],2),e._v(" "),i("el-tab-pane",{attrs:{label:"7JLAT标准",name:"seven"}},[[i("xyj-table",e._b({ref:"picJlat",attrs:{id:"9"}},"xyj-table",e.picJlat,!1))]],2),e._v(" "),i("el-tab-pane",{attrs:{label:"8S/V标准",name:"eight"}},[[i("xyj-table",e._b({ref:"picSv",attrs:{id:"10"}},"xyj-table",e.picSv,!1))]],2),e._v(" "),i("el-tab-pane",{attrs:{label:"9投资预算科",name:"nine"}},[[i("div",{staticStyle:{"text-align":"left"}},[i("b",[e._v("新车直劳单价:")])]),e._v(" "),i("xyj-table",e._b({ref:"labourPrice",attrs:{id:"11"}},"xyj-table",e.labourPrice,!1)),e._v(" "),i("div",{staticStyle:{"text-align":"left","margin-top":"15px"}},[i("b",[e._v("汇率:")])]),e._v(" "),i("xyj-table",e._b({ref:"rate",attrs:{id:"12"}},"xyj-table",e.rate,!1)),e._v(" "),i("div",{staticStyle:{"text-align":"left","margin-top":"15px"}},[i("b",[e._v("基点车直劳单价:")])]),e._v(" "),i("xyj-table",e._b({ref:"baseLabourPrice",attrs:{id:"13"}},"xyj-table",e.baseLabourPrice,!1)),e._v(" "),i("div",{staticStyle:{"text-align":"left","margin-top":"15px"}},[i("b",[e._v("材料市况:")])]),e._v(" "),i("xyj-table",e._b({ref:"materialDate",attrs:{id:"14"}},"xyj-table",e.materialDate,!1)),e._v(" "),i("div",{staticStyle:{"text-align":"left","margin-top":"15px"}},[i("b",[e._v("Top数量:")])]),e._v(" "),i("xyj-table",e._b({ref:"topDate",attrs:{id:"15"}},"xyj-table",e.topDate,!1))]],2),e._v(" "),i("el-tab-pane",{attrs:{label:"10劳务费单价",name:"ten"}},[[i("xyj-table",e._b({key:e.tableitemKey,ref:"serviceCharge",attrs:{id:"16"}},"xyj-table",e.serviceCharge,!1))]],2),e._v(" "),i("el-tab-pane",{attrs:{label:"11DSTR",name:"eleven"}},[[i("xyj-table",e._b({ref:"dstr",attrs:{id:"17"}},"xyj-table",e.dstr,!1))]],2)],1)],1)],2)},staticRenderFns:[]};var o=a("VU/8")(l,n,!1,function(e){a("r07N")},"data-v-38ab3056",null);t.default=o.exports},bUMU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("AUIh");var i={name:"StandardDictionary",data:function(){return{loading:!1,userInfo:"",editForm:{freePrice:"",selfMotionDays:"",payOrderRevmiu:"",cancelGiveTime:"",editorDays:"",phone:""},editFormRules:{freePrice:[{required:!0,message:"请输入免密额度",trigger:"blur"}],selfMotionDays:[{required:!0,message:"请输入自动确认天数",trigger:"blur"}],payOrderRevmiu:[{required:!0,message:"请输入支付订单撤销分钟数",trigger:"blur"}],cancelGiveTime:[{required:!0,message:"请输入转赠自动退回时间",trigger:"blur"}],editorDays:[{required:!0,message:"请输入评论可编辑天数",trigger:"blur"}],phone:[{required:!0,message:"请输入客服电话",trigger:"blur"}]},pageRequest:{page:1,pageSize:10,showTotal:!0}}},methods:{resetMoney:function(e){var t=e.target.value;e.target.value=t.match(/^\d*(\.?\d{0,2})/g)[0]||null,this.editForm[e.target.getAttribute("data-flag")]=e.target.value},resetNum:function(e){var t=e.target.value;e.target.value=t.match(/^[1-9]\d*/g)[0]||null,this.editForm[e.target.getAttribute("data-flag")]=e.target.value},confirmHandler:function(e){var t=this,a={lastUpdateBy:t.userInfo};t.$refs[e].validate(function(e){console.log(e),e&&(a.id=t.editForm.id,a.freePrice=t.editForm.freePrice,a.selfMotionDays=t.editForm.selfMotionDays,a.payOrderRevmiu=t.editForm.payOrderRevmiu,a.cancelGiveTime=t.editForm.cancelGiveTime,a.editorDays=t.editForm.editorDays,a.phone=t.editForm.phone,t.$api.common.xyjPostyw({url:"/sysPayset/save",data:a}).then(function(e){e&&(console.log("success"),t.$message({message:"修改成功！",type:"success",duration:2e3}))}))})},getMainList:function(){var e=this;e.$api.common.xyjQueryPost({url:"/sysPayset/query",data:{pageBean:{},params:{},querys:[],sorter:[]}}).then(function(t){t&&(e.editForm=t.rows[0])})}},mounted:function(){this.userInfo=sessionStorage.getItem("user"),this.getMainList()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"sx"},[e._v("会员设置")])]),e._v(" "),a("div",{staticClass:"headright"})])]),e._v(" "),a("div",{staticClass:"setting-form-box"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"editForm",attrs:{size:"small",model:e.editForm,rules:e.editFormRules,"label-width":"200px"}},[a("el-form-item",{attrs:{prop:"freePrice",label:"免密额度"}},[a("el-row",[a("el-input",{attrs:{"data-flag":"freePrice",placeholder:"请输入免密额度"},nativeOn:{input:function(t){return e.resetMoney(t)}},model:{value:e.editForm.freePrice,callback:function(t){e.$set(e.editForm,"freePrice",t)},expression:"editForm.freePrice"}}),e._v(" "),a("span",{staticClass:"uint"},[e._v("元")]),e._v(" "),a("span",{staticClass:"label-tips"},[e._v("会员的免密支付额度")])],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"selfMotionDays",label:"自动确认天数"}},[a("el-row",[a("el-input",{attrs:{"data-flag":"selfMotionDays",placeholder:"请输入自动确认天数"},nativeOn:{input:function(t){return e.resetNum(t)}},model:{value:e.editForm.selfMotionDays,callback:function(t){e.$set(e.editForm,"selfMotionDays",t)},expression:"editForm.selfMotionDays"}}),e._v(" "),a("span",{staticClass:"uint"},[e._v("天")]),e._v(" "),a("span",{staticClass:"label-tips"},[e._v("当没有使用免密支付时会员需要对支付订单密码确认，如果会员没有在设定天数内密码确认，系统将自动确认")])],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"payOrderRevmiu",label:"手续费率"}},[a("el-row",[a("el-input",{attrs:{"data-flag":"payOrderRevmiu",placeholder:"请输入手续费率"},nativeOn:{input:function(t){return e.resetNum(t)}},model:{value:e.editForm.serviceCost,callback:function(t){e.$set(e.editForm,"serviceCost",t)},expression:"editForm.serviceCost"}}),e._v(" "),a("span",{staticClass:"uint"},[e._v("%")]),e._v(" "),a("span",{staticClass:"label-tips"},[e._v("余额转卡手续费率（每100元）")])],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"payOrderRevmiu",label:"支付订单撤销分钟数"}},[a("el-row",[a("el-input",{attrs:{"data-flag":"payOrderRevmiu",placeholder:"请输入支付订单撤销分钟数"},nativeOn:{input:function(t){return e.resetNum(t)}},model:{value:e.editForm.payOrderRevmiu,callback:function(t){e.$set(e.editForm,"payOrderRevmiu",t)},expression:"editForm.payOrderRevmiu"}}),e._v(" "),a("span",{staticClass:"uint"},[e._v("分钟")]),e._v(" "),a("span",{staticClass:"label-tips"},[e._v("支付订单撤销等待时间")])],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"cancelGiveTime",label:"转赠自动退回时间"}},[a("el-row",[a("el-input",{attrs:{"data-flag":"cancelGiveTime",placeholder:"请输入转赠自动退回时间"},nativeOn:{input:function(t){return e.resetNum(t)}},model:{value:e.editForm.cancelGiveTime,callback:function(t){e.$set(e.editForm,"cancelGiveTime",t)},expression:"editForm.cancelGiveTime"}}),e._v(" "),a("span",{staticClass:"uint"},[e._v("分钟")]),e._v(" "),a("span",{staticClass:"label-tips"},[e._v("转赠自动退回等待时间")])],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"editorDays",label:"评论可编辑天数"}},[a("el-row",[a("el-input",{attrs:{"data-flag":"editorDays",placeholder:"请输入评论可编辑天数"},nativeOn:{input:function(t){return e.resetNum(t)}},model:{value:e.editForm.editorDays,callback:function(t){e.$set(e.editForm,"editorDays",t)},expression:"editForm.editorDays"}}),e._v(" "),a("span",{staticClass:"uint"},[e._v("天")]),e._v(" "),a("span",{staticClass:"label-tips"},[e._v("在评论发出后几天内可编辑")])],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"phone",label:"客服电话"}},[a("el-row",[a("el-input",{attrs:{placeholder:"请输入客服电话"},model:{value:e.editForm.phone,callback:function(t){e.$set(e.editForm,"phone",t)},expression:"editForm.phone"}}),e._v(" "),a("span",{staticClass:"uint"})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.confirmHandler("editForm")}}},[e._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,r,!1,function(e){a("9lo3")},"data-v-34a45eb2",null);t.default=s.exports},bfzu:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("/4e5"),l=a("wbNz"),n=a("BQHT"),o=a("AUIh"),c={components:{KtTable:s.default,KtButton:l.default,TableTreeColumn:n.default},data:function(){return{size:"small",filters:{name:""},columns:[{prop:"id",label:"ID",minWidth:50},{prop:"name",label:"角色名",minWidth:120},{prop:"remark",label:"备注",minWidth:120},{prop:"createBy",label:"创建人",minWidth:120},{prop:"createTime",label:"创建时间",minWidth:120,formatter:this.dateFormat}],pageRequest:{pageNum:1,pageSize:10},pageResult:{},operation:!1,dialogVisible:!1,editLoading:!1,dataFormRules:{name:[{required:!0,message:"请输入角色名",trigger:"blur"}]},dataForm:{id:0,name:"",remark:""},selectRole:{},menuData:[],menuSelections:[],menuLoading:!1,authLoading:!1,checkAll:!1,currentRoleMenus:[],defaultProps:{children:"children",label:"name"}}},methods:{findPage:function(e){var t=this;null!==e&&(this.pageRequest=e.pageRequest);this.pageRequest.columnFilters={name:{name:"name",value:this.filters.name}},this.pageRequest.querys=[{property:"id",value:-1,operation:"EQUAL",relation:"AND"}],this.$api.role.findPage(this.pageRequest).then(function(e){t.pageResult=e.data,t.findTreeData()}).then(null!=e?e.callback:"")},handleDelete:function(e){this.$api.role.batchDelete(e.params).then(e.callback)},handleAdd:function(){this.dialogVisible=!0,this.operation=!0,this.dataForm={id:0,name:"",remark:""}},handleEdit:function(e){this.dialogVisible=!0,this.operation=!1,this.dataForm=r()({},e.row)},submitForm:function(){var e=this;this.$refs.dataForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var t=r()({},e.dataForm);e.$api.role.save(t).then(function(t){e.editLoading=!1,200==t.code?(e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1,e.$refs.dataForm.resetFields()):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.findPage(null)})})})},findTreeData:function(){var e=this;this.menuLoading=!0,this.$api.menu.findMenuTree().then(function(t){e.menuData=t.data,e.menuLoading=!1})},handleRoleSelectChange:function(e){var t=this;null!=e&&null!=e.val&&(this.selectRole=e.val,this.$api.role.findRoleMenus({roleId:e.val.id}).then(function(e){t.currentRoleMenus=e.data,t.$refs.menuTree.setCheckedNodes(e.data)}))},handleMenuCheckChange:function(e,t,a){var i=this;if(t){e.parentId;null!=e.children&&e.children.forEach(function(e){i.$refs.menuTree.setChecked(e.id,!0,!0)})}else null!=e.children&&e.children.forEach(function(e){i.$refs.menuTree.setChecked(e.id,!1,!1)})},resetSelection:function(){this.checkAll=!1,this.$refs.menuTree.setCheckedNodes(this.currentRoleMenus)},handleCheckAll:function(){if(this.checkAll){var e=[];this.checkAllMenu(this.menuData,e),this.$refs.menuTree.setCheckedNodes(e)}else this.$refs.menuTree.setCheckedNodes([])},checkAllMenu:function(e,t){var a=this;e.forEach(function(e){t.push(e),e.children&&a.checkAllMenu(e.children,t)})},submitAuthForm:function(){var e=this,t=this.selectRole.id;if("admin"!=this.selectRole.name){this.authLoading=!0;for(var a=this.$refs.menuTree.getCheckedNodes(!1,!0),i=[],r=0,s=a.length;r<s;r++){var l={roleId:t,menuId:a[r].id};i.push(l)}this.$api.role.saveRoleMenus(i).then(function(t){200==t.code?e.$message({message:"操作成功",type:"success"}):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.authLoading=!1})}else this.$message({message:"超级管理员拥有所有菜单权限，不允许修改！",type:"error"})},renderContent:function(e,t){t.node;var a=t.data;t.store;return e("div",{class:"column-container",style:"width:100%;display:flex;justify-content:space-between;"},[e("span",{style:"display:inline-block;width:21%;margin-right:5%;text-align:left"},[a.name]),e("span",{style:"margin-right:5%;text-align:left"},[e("el-tag",{attrs:{type:0===a.type?"":1===a.type?"success":"info",size:"small"}},[0===a.type?"目录":1===a.type?"菜单":"按钮"])]),e("span",{style:"text-algin:center;"},[" ",e("i",{class:a.icon})]),e("span",{style:"text-algin:center;"},[a.parentName?a.parentName:"顶级菜单"])])},dateFormat:function(e,t,a,i){return Object(o.a)(e[t.property])}},mounted:function(){}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"角色名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:role:view",type:"primary"},on:{click:function(t){e.findPage(null)}}})],1),e._v(" "),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:role:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),e._v(" "),a("kt-table",{attrs:{id:"ktable",permsEdit:"sys:role:edit",permsDelete:"sys:role:delete",highlightCurrentRow:!0,stripe:!1,data:e.pageResult,columns:e.columns,showBatchDelete:!1},on:{handleCurrentChange:e.handleRoleSelectChange,findPage:e.findPage,handleEdit:e.handleEdit,handleDelete:e.handleDelete}}),e._v(" "),a("el-dialog",{attrs:{title:e.operation?"新增":"编辑",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"80px",rules:e.dataFormRules,size:e.size}},[e._e(),e._v(" "),a("el-form-item",{attrs:{label:"角色名",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注 ",prop:"remark"}},[a("el-input",{attrs:{"auto-complete":"off",type:"textarea"},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,"remark",t)},expression:"dataForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.size},nativeOn:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{attrs:{size:e.size,type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v(e._s(e.$t("action.submit")))])],1)],1),e._v(" "),a("div",{staticClass:"menu-container",attrs:{"v-if":!0}},[a("div",{staticClass:"menu-header"},[a("span",[a("B",[e._v("角色菜单授权")])],1)]),e._v(" "),a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.menuLoading,expression:"menuLoading"}],ref:"menuTree",staticStyle:{width:"100%","pading-top":"20px"},attrs:{data:e.menuData,size:"mini","show-checkbox":"","node-key":"id",props:e.defaultProps,"render-content":e.renderContent,"element-loading-text":"拼命加载中","check-strictly":!0},on:{"check-change":e.handleMenuCheckChange}}),e._v(" "),a("div",{staticStyle:{float:"left","padding-left":"24px","padding-top":"12px","padding-bottom":"4px"}},[a("el-checkbox",{attrs:{disabled:null==this.selectRole.id},on:{change:e.handleCheckAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[a("b",[e._v("全选")])])],1),e._v(" "),a("div",{staticStyle:{float:"right","padding-right":"15px","padding-top":"4px","padding-bottom":"4px"}},[a("kt-button",{attrs:{label:e.$t("action.reset"),perms:"sys:role:edit",type:"primary",disabled:null==this.selectRole.id},on:{click:e.resetSelection}}),e._v(" "),a("kt-button",{attrs:{label:e.$t("action.submit"),perms:"sys:role:edit",type:"primary",disabled:null==this.selectRole.id,loading:e.authLoading},on:{click:e.submitAuthForm}})],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(c,d,!1,function(e){a("jBMv")},"data-v-3680a09d",null);t.default=m.exports},"c/Tr":function(e,t,a){e.exports={default:a("5zde"),__esModule:!0}},cI1M:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("//Fk"),r=a.n(i),s={data:function(){return{imageUrl:""}},methods:{beforeAvatarUpload:function(e){var t=this;if(e.type.indexOf("image")<0)return this.$alert({message:"图片格式不正确",btn:!1}),!1;e.size;return new r.a(function(t,a){var i=window.URL||window.webkitURL,r=new Image;r.onload=function(){750==r.width&&400==r.height?t():a()},r.src=i.createObjectURL(e)}).then(function(){return e},function(){return t.$alert({message:"上传的图片大小必须是等于750*400!"}),r.a.reject()})},handleAvatarSuccess:function(e,t){200==e.state?(this.imageUrl=URL.createObjectURL(t.raw),this.fileUrl=e.data):this.$alert({message:"上传失败",btn:!1})},handleAvatarError:function(e,t){this.$alert({message:"选择图片失败",btn:!1})}}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":this.handleAvatarSuccess,"before-upload":this.beforeAvatarUpload}},[this.imageUrl?t("img",{staticClass:"avatar",attrs:{src:this.imageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)},staticRenderFns:[]};var n=a("VU/8")(s,l,!1,function(e){a("kr8L")},null,null);t.default=n.exports},cWUL:function(e,t){},cZLy:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("uzVr"),r=a.n(i);for(var s in i)"default"!==s&&function(e){a.d(t,e,function(){return i[e]})}(s);var l=a("3wOp");var n=function(e){a("CDeG")},o=a("VU/8")(r.a,l.a,!1,n,null,null);t.default=o.exports},chCm:function(e,t){},ctV7:function(e,t){},"d+Pf":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("AUIh");var i={name:"YlkPage",data:function(){return{loading:!1,pageRequest:{page:1,pageSize:10,showTotal:!0},options:"",form:{gas_id:"",date:"",date1:"",gasName:""},form2:{gas_id:"",date:"",date2:"",gasName:"",isHistory:""},rules:{date:[{required:!0,message:"请选择开始日期",trigger:"change"}],date2:[{required:!0,message:"请选择结束日期",trigger:"change"}],gas_id:[{required:!0,message:"请选择油站",trigger:"change"}]},jsEndDate:"",query:[],tableData:{rows:[]},columns:[{prop:"gasName",label:"油站名称",width:"180",align:"center"},{prop:"allSalemoney",label:"销售总金额",width:"140",align:"center"},{prop:"allProfitmoney",label:"油站当日收益（元）",width:"190",align:"center"},{prop:"allYemoney",label:"余额（总额）",width:"160",align:"center"},{prop:"allWxmoery",label:"微信（总额）",width:"160",align:"center"},{prop:"allAlimoery",label:"支付宝（总额）",width:"160",align:"center"},{prop:"allCashmoney",label:"现金（总额）",width:"160",align:"center"},{prop:"allScmoney",label:"刷卡（总额）",width:"160",align:"center"},{prop:"_92ilnum",label:"汽油92（总升）",width:"160",align:"center"},{prop:"_95ilnum",label:"汽油95（总升）",width:"160",align:"center"},{prop:"_00ilnum",label:"柴油0（总升）",width:"160",align:"center"},{prop:"_98ilnum",label:"柴油-10#（总升）",width:"180",align:"center"}]}},computed:{gasId:function(){return this.form.gas_id}},watch:{gasId:function(e){var t=this;t.options.map(function(a,i){a.id==e&&(t.form.gasName=a.name)})}},created:function(){this.getSelect()},mounted:function(){this.findPage()},methods:{getSummaries:function(e){var t=e.columns,a=e.data,i=[];return t.forEach(function(e,t){if(0!==t){var r=a.map(function(t){return Number(t[e.property])});t>3&&t<11?(i[t]=r.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),i[t]=i[t].toFixed(2)+" 元"):i[t]=""}else i[t]="结算"}),i},getSelect:function(){var e=this;e.$api.common.xyjPost({url:"/partGasinfo/query",data:{}}).then(function(t){console.log(t.data),e.options=t.data.rows})},handleSelectionChange:function(e){this.multipleSelection=e,this.$message({type:"warning",message:this.multipleSelection})},refreshPageRequest:function(e){this.pageRequest.page=e,this.findPage()},refreshPageSizeRequest:function(e){this.pageRequest.pageSize=e,this.findPage()},formPass:function(){var e=this;this.$refs.searchForm.validate(function(t){if(!t)return!1;e.searchquery()})},searchquery:function(){var e=[];this.form.gas_id&&e.push({hasInitValue:!1,operation:"EQUAL",property:"gas_id",relation:"AND",value:this.form.gas_id}),this.form.date&&e.push({hasInitValue:!1,operation:"EQUAL",property:"nowyear",relation:"AND",value:this.form.date}),this.query=e,this.findPage()},findPage:function(){var e=this;e.loading=!0,e.form2.date=e.form.date,e.form2.gas_id=e.form.gas_id,e.form2.gasName=e.form.gasName,console.log(e.form2),e.$api.common.xyjQueryPost({url:"/appOrderJsDays/getsellapporderWeeks",data:{pageBean:{},params:{},querys:e.query,selfDate:{},sorter:[]}}).then(function(t){e.loading=!1,console.log("res",t),e.tableData=t})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"sys-coupon-bag"},[a("el-container",[a("el-header",[a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-search"}),a("span",{staticClass:"sx"},[e._v("筛选查询")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-row"),e._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"mini"},on:{click:e.formPass}},[e._v("查询")])],1)])]),e._v(" "),a("el-main",[a("el-row",{staticClass:"searchForm"},[a("el-form",{ref:"searchForm",attrs:{size:"small",model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"油站",prop:"gas_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.gas_id,callback:function(t){e.$set(e.form,"gas_id",t)},expression:"form.gas_id"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"年份",prop:"date"}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{align:"right",type:"year","value-format":"yyyy",placeholder:"选择年"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)])],1)],1),e._v(" "),a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-tickets"}),a("span",{staticClass:"sx"},[e._v("会员列表")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-button",{staticClass:"fa fa-refresh",attrs:{size:"mini",type:"primary"},on:{click:e.findPage}},[e._v("\n              刷新\n            ")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.tableData.rows,size:"mini","show-summary":"","summary-method":e.getSummaries,"show-overflow-tooltip":"true",border:""}},[a("el-table-column",{attrs:{fixed:"left",type:"index",label:"序号","min-width":"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"left",prop:"nowyear",label:"年","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"left",prop:"weeks",label:"周","min-width":"100",align:"center"}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{sortable:"",prop:e.prop,label:e.label,formatter:e.formatter,"min-width":e.width,align:e.align}})})],2),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageRequest.page,"page-sizes":[10,20,30,40,50],"page-size":e.pageRequest.pageSize,layout:"sizes, total, prev, pager, next",total:e.tableData.total},on:{"current-change":e.refreshPageRequest,"size-change":e.refreshPageSizeRequest}})],1)],1)],1)],1)])},staticRenderFns:[]};var s=a("VU/8")(i,r,!1,function(e){a("XYry")},null,null);t.default=s.exports},d2np:function(e,t){},dIAm:function(e,t){},dbHl:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuPaintingMaterialDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingMaterialDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,isExpand:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuPaintingMaterialDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingMaterialDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingMaterialDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingMaterialDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingMaterialDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuPaintingMaterialDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuPaintingMaterialDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingMaterialDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].materiaId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingMaterialDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuPaintingMaterialDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingMaterialDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuPaintingMaterialDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuPaintingMaterialDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuPaintingMaterialDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuPaintingMaterialDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",disabled:e.isDisabled,label:e.$t("action.chooseVehicleType")},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("rdBX")},"data-v-352891c2",null);t.default=f.exports},dw9a:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s={name:"ForecastMain",data:function(){return{tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick},operationAttrs:{width:"200px"},formatters:{state:function(e,t,a){switch(a){case 0:return"编辑中";case 1:return"审批中";case 2:return"完成";default:return a}}},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCar/getForecastMain",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"EQUAL",value0:0,andor0:"AND"}}}}},methods:{rowclick:function(e,t,a){var i=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList()})},findafter:function(e,t){var a=this;e.length<=0||(this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e[0].versionId}),this.$nextTick(function(){a.$refs.reftableitem.getList()}))}}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",[t("xyj-table",this._b({ref:"reftablamain",attrs:{id:"1"},on:{update:this.findafter}},"xyj-table",this.tablemain,!1))],1)])},staticRenderFns:[]};var n=a("VU/8")(s,l,!1,function(e){a("BuCy")},"data-v-915b79ca",null);t.default=n.exports},"eCB+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),r=a.n(i),s={name:"StampingApproval",components:{ApprovalDialog:a("XwFy").a},data:function(){return{textarea:""}},methods:{clickApproval:function(){var e=this,t=this.$route.path,a=this.$workConfig.getItem(t)?this.$workConfig.getItem(t).workid:"";a.length<=0?this.$message.warning("没有找到审批流模板，请联系系统管理员"):this.$api.expapi.stephandler({isstart:!0,wfid:a,nodeid:"",formname:"",pending_type:0}).then(function(t){if("1"===t.result){t.rows.wfid=a;e.$refs.action.open(t.rows,{carversionId:"1",versio:"v1.0",cartyp:"G88A",stage:"阶段",platform:"平台",actoryName:"工厂名称",sopdate:"SOP日期",ncontractdate:"合同日期",basecar:"基点车",basestage:"节点车阶段",tablename:"TIcBuStampingLabour"}),e.textarea=r()(t)}else{var i=ErrorInfo.ERRORINFO[t.msg];e.$message.error(i)}}).catch(function(t){e.$message.error(t.message)})},getuserpermissiontree:function(){var e=this;this.$api.expapi.getuserpermissiontree({}).then(function(t){e.textarea=r()(t)}).catch(function(t){e.$message.error(t.message)})},pending:function(){var e=this;this.$api.expapi.pending({pagesize:10,pageindex:1,sort:"desc",sortfield:"processStartTime",qmode:0,cquery:"",pname:"",ptype:"",pstarter:"",starttime:"",endtime:"",p_kind_guid:"",tag_id:""}).then(function(t){e.textarea=r()(t)}).catch(function(t){e.$message.error(t.message)})},launch:function(){var e=this;this.$api.expapi.launch({pagesize:10,pageindex:1,sort:"desc",sortfield:"LAST_UPDATED_TIME",qmode:0,cquery:"",processtypename:"",processstarttime:"",processendtime:"",processstatus:"",businessno:"",isqueryhistory:0}).then(function(t){e.textarea=r()(t)}).catch(function(t){e.$message.error(t.message)})},attention:function(){var e=this;this.$api.expapi.launch({pagesize:10,pageindex:1,sort:"desc",sortfield:"LAST_UPDATED_TIME",strisqueryhistory:0,strprocessstatus:"",strbusinessno:"",strprocessname:"",strprocesstypeName:"",strprocessstarter:"",strprocessstarttime:"",strprocessendtime:"",qmode:0,cquery:"",strattention:1}).then(function(t){e.textarea=r()(t)}).catch(function(t){e.$message.error(t.message)})},already:function(){var e=this;this.$api.expapi.launch({pagesize:10,pageindex:1,sort:"desc",sortfield:"LAST_UPDATED_TIME",qmode:0,cquery:"",processname:"",processstarter:"",processtypename:"",processstarterdepartment:"",processstarttime:"",processendtime:"",processstatus:"",businessno:"",attention:"",process_guid:"",isqueryhistory:0,isquerypendshare:0,issimulate:"",process_kind_guid:"",process_module_guid:"",tagid:"alreadyHandled",pendingautorname:""}).then(function(t){e.textarea=r()(t)}).catch(function(t){e.$message.error(t.message)})},draft:function(){var e=this;this.$api.expapi.launch({pagesize:10,pageindex:1,sort:"desc",sortfield:"CREATE_TIME",qmode:0,cquery:"",strprocesstypename:"",strprocessname:"",strprocessstarttime:"",strprocessendtime:""}).then(function(t){e.textarea=r()(t)}).catch(function(t){e.$message.error(t.message)})},decode:function(){this.textarea=decodeURIComponent(this.textarea)},handleWFAction:function(){var e=this,t=encodeURIComponent(r()({wfid:"485df65a-1142-4c6e-a085-14e28730318b",actiontype:"0",currstepid:"a893990c53014929860c053323d17ba4",handler_text:"同意",business_no:"1111"}));this.$api.expapi.handleWFAction({subJson:t}).then(function(t){e.textarea=r()(t)}).catch(function(t){e.$message.error(t.message)})},getItme:function(){var e=this.$route.path,t=this.$workConfig.getItem(e);this.$message.info(t.workid)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:e.clickApproval}},[e._v("发起审批")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleWFAction}},[e._v("执行工作流")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.getItme}},[e._v("待审列表")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.getuserpermissiontree}},[e._v("获取审批流树")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.pending}},[e._v("我的待办")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.launch}},[e._v("我发起的")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.already}},[e._v("我审阅的")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.attention}},[e._v("我关注的")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.draft}},[e._v("草稿")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.decode}},[e._v("解码")])],1)],1),e._v(" "),a("div",[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",rows:"30","show-word-limit":""},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}})],1),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var n=a("VU/8")(s,l,!1,function(e){a("HPnc")},"data-v-56bc36fa",null);t.default=n.exports},eHXK:function(e,t){},eKLd:function(e,t){},eLfP:function(e,t){},ekj0:function(e,t){},eoFw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"TIcBuAssembleInvest",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:"",progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleInvest/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuAssembleInvest",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleInvest/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleInvest/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleInvest/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleInvest/delete",method:"delete"},extraSelectData:{devicetyep:function(){return[{label:"主线设备",value:"主线设备"},{label:"内饰附带设备",value:"内饰附带设备"},{label:"底盘附带设备",value:"底盘附带设备"},{label:"电装设备",value:"电装设备"},{label:"工治具",value:"工治具"},{label:"物流",value:"物流"},{label:"PUG",value:"PUG"},{label:"其他",value:"其他"}]},classify:function(){return[{label:"新车",value:"新车"},{label:"共通",value:"共通"}]}},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),i.getinfo(e.versionId),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})})},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),this.getinfo(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(){var e=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){e.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssembleInvest/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleInvest/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssembleInvest/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,e.decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getMaterialsInfo?versionId="+e}).then(function(e){t.info=[{name:"新车汇率"},{name:"基点车汇率"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].investId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"investId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("iXQL")},"data-v-79293e64",null);t.default=f.exports},erd9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"TIcBuAssembleLabour",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,info:"",progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleLabour/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuAssembleLabour",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleLabour/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleLabour/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssembleLabour/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleLabour/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},update:function(){this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameFollowVersionId?tablename=tIcBuAssembleLabour&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"},this.tableitemKey++},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.update(),i.getinfo(e.versionId),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})})},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),this.getinfo(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(){var e=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){e.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssembleLabour/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].labourId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssembleLabour/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssembleLabour/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getLabourInfo?versionId="+e+"&type=5"}).then(function(e){t.info=[{name:"直劳单价"},{name:"DSTR"},{name:"基点车直劳单价"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].labourId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"labourId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("9DZP")},"data-v-4190a7a0",null);t.default=f.exports},"f/BR":function(e,t){},fBQ2:function(e,t,a){"use strict";var i=a("evD5"),r=a("X8DO");e.exports=function(e,t,a){t in e?i.f(e,t,r(0,a)):e[t]=a}},fJKY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{tableData3:[{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-08",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-06",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-07",name:"王小地",address:"上海市普陀区金沙江路 1518 弄"}],multipleSelection:[]}},methods:{toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},all:function(e){console.log(e)},user:function(e){}},mounted:function(){this.user()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("span",[e._v("设备字典")]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData3,"tooltip-effect":"dark"},on:{"cell-click":e.user,"select-all":e.all,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"日期",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址","show-overflow-tooltip":""}})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-button",{on:{click:function(t){e.toggleSelection([e.tableData3[0],e.tableData3[2]])}}},[e._v("切换第二、第三行的选中状态")]),e._v(" "),a("el-button",{on:{click:function(t){e.toggleSelection()}}},[e._v("取消选择")])],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,r,!1,function(e){a("N244")},"data-v-b3999d4e",null);t.default=s.exports},fUAC:function(e,t){},fZOM:function(e,t,a){var i=a("kM2E"),r=a("mbce")(!1);i(i.S,"Object",{values:function(e){return r(e)}})},ffkl:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"TIcBuPaintingInvest",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingInvest/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,isExpand:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuPaintingInvest",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingInvest/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingInvest/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingInvest/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingInvest/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})}),this.getinfo(e.versionId)},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}),this.getinfo(e[0].versionId))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingInvest/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingInvest/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingInvest/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getMaterialsInfo?versionId="+e}).then(function(e){t.info=[{name:"新车汇率"},{name:"基点查汇"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{disabled:e.isDisabled,type:"primary",label:e.$t("action.chooseVehicleType")},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("ms4Q")},"data-v-1e733d38",null);t.default=f.exports},g9CB:function(e,t,a){var i={"./ApplicationDictionary/BrandDictionary":"m7kY","./ApplicationDictionary/BrandDictionary.vue":"m7kY","./ApplicationDictionary/CompanyDictionary":"07rk","./ApplicationDictionary/CompanyDictionary.vue":"07rk","./ApplicationDictionary/EquipmentDictionary":"fJKY","./ApplicationDictionary/EquipmentDictionary.vue":"fJKY","./ApplicationDictionary/GasStationTag":"wNfd","./ApplicationDictionary/GasStationTag.vue":"wNfd","./ApplicationDictionary/StandardDictionary":"ZwJZ","./ApplicationDictionary/StandardDictionary.vue":"ZwJZ","./Backup/Backup":"5Iox","./Backup/Backup.vue":"5Iox","./Core/KtButton":"wbNz","./Core/KtButton.vue":"wbNz","./Core/KtTable":"/4e5","./Core/KtTable.vue":"/4e5","./Core/MessagePanel":"VaSu","./Core/MessagePanel.vue":"VaSu","./Core/NoticePanel":"6XgB","./Core/NoticePanel.vue":"6XgB","./Core/PersonalPanel":"vlPt","./Core/PersonalPanel.vue":"vlPt","./Core/TableColumnFilterDialog":"EN35","./Core/TableColumnFilterDialog.vue":"EN35","./Core/TableTreeColumn":"BQHT","./Core/TableTreeColumn.vue":"BQHT","./CwManagement/CenterStatistic":"kdhO","./CwManagement/CenterStatistic.vue":"kdhO","./CwManagement/CenterStatisticBetween":"9sii","./CwManagement/CenterStatisticBetween.vue":"9sii","./CwManagement/DaySalesStatistics":"AVYP","./CwManagement/DaySalesStatistics.vue":"AVYP","./CwManagement/DayStatistic":"vuze","./CwManagement/DayStatistic.vue":"vuze","./CwManagement/MonthsSalesStatistics":"k3T2","./CwManagement/MonthsSalesStatistics.vue":"k3T2","./CwManagement/WeekSalesStatistics":"d+Pf","./CwManagement/WeekSalesStatistics.vue":"d+Pf","./Error/404":"vr1u","./Error/404.vue":"vr1u","./GasStationSystem/DailyBusiness/GasStationDlayInfo":"pRm9","./GasStationSystem/DailyBusiness/GasStationDlayInfo.vue":"pRm9","./GasStationSystem/DailyBusiness/OilPriceSetting":"yBve","./GasStationSystem/DailyBusiness/OilPriceSetting.vue":"yBve","./Generator/Generator":"wuuA","./Generator/Generator.vue":"wuuA","./HeadBar/HeadBar":"4bIh","./HeadBar/HeadBar.vue":"4bIh","./Home":"j7e0","./Home.vue":"j7e0","./IFrame/IFrame":"NGlO","./IFrame/IFrame.vue":"NGlO","./Intro/Intro":"SiGl","./Intro/Intro.vue":"SiGl","./Login":"lmfZ","./Login.vue":"lmfZ","./MainContent/MainContent":"u37B","./MainContent/MainContent.vue":"u37B","./Member/AppUserStatus":"1Q7v","./Member/AppUserStatus.vue":"1Q7v","./Member/AppUserStatusHis":"OTGQ","./Member/AppUserStatusHis.vue":"OTGQ","./Member/FindBuyOrder":"o85e","./Member/FindBuyOrder.vue":"o85e","./Member/FindPage":"p0ki","./Member/FindPage.vue":"p0ki","./Member/FindPayToCancel":"Z/mt","./Member/FindPayToCancel.vue":"Z/mt","./Member/MemberList":"so3D","./Member/MemberList.vue":"so3D","./Member/MethodsStatistical":"yse4","./Member/MethodsStatistical.vue":"yse4","./Member/Setting":"bUMU","./Member/Setting.vue":"bUMU","./Member/SmsPushRecord":"nZqn","./Member/SmsPushRecord.vue":"nZqn","./Member/ToBeConfirmed":"O/9E","./Member/ToBeConfirmed.vue":"O/9E","./Member/Upload":"cI1M","./Member/Upload.vue":"cI1M","./NavBar/NavBar":"w7g/","./NavBar/NavBar.vue":"w7g/","./NewCar/Budget/Assemble/TIcBuAssemble":"Q9V0","./NewCar/Budget/Assemble/TIcBuAssemble.vue":"Q9V0","./NewCar/Budget/Assemble/TIcBuAssembleInvest":"eoFw","./NewCar/Budget/Assemble/TIcBuAssembleInvest.vue":"eoFw","./NewCar/Budget/Assemble/TIcBuAssembleInvestDI":"A4MV","./NewCar/Budget/Assemble/TIcBuAssembleInvestDI.vue":"A4MV","./NewCar/Budget/Assemble/TIcBuAssembleInvestZDI":"YETs","./NewCar/Budget/Assemble/TIcBuAssembleInvestZDI.vue":"YETs","./NewCar/Budget/Assemble/TIcBuAssembleLabour":"erd9","./NewCar/Budget/Assemble/TIcBuAssembleLabour.vue":"erd9","./NewCar/Budget/Assemble/TIcBuAssembleLabourlDI":"2ytj","./NewCar/Budget/Assemble/TIcBuAssembleLabourlDI.vue":"2ytj","./NewCar/Budget/Assemble/TIcBuAssembleMaterial":"Nx3o","./NewCar/Budget/Assemble/TIcBuAssembleMaterial.vue":"Nx3o","./NewCar/Budget/Assemble/TIcBuAssembleMaterialDI":"Xsg9","./NewCar/Budget/Assemble/TIcBuAssembleMaterialDI.vue":"Xsg9","./NewCar/Budget/Assemble/TIcBuAssemblePic":"jiAh","./NewCar/Budget/Assemble/TIcBuAssemblePic.vue":"jiAh","./NewCar/Budget/Assemble/TIcBuAssemblePicDI":"gmfD","./NewCar/Budget/Assemble/TIcBuAssemblePicDI.vue":"gmfD","./NewCar/Budget/Assemble/TIcBuAssemblePicFunds":"nQR5","./NewCar/Budget/Assemble/TIcBuAssemblePicFunds.vue":"nQR5","./NewCar/Budget/Assemble/TIcBuAssemblePicZDI":"3EcB","./NewCar/Budget/Assemble/TIcBuAssemblePicZDI.vue":"3EcB","./NewCar/Budget/Battery/TIcBuBattery":"/Rxi","./NewCar/Budget/Battery/TIcBuBattery.vue":"/Rxi","./NewCar/Budget/Battery/TIcBuBatteryInvest":"teXH","./NewCar/Budget/Battery/TIcBuBatteryInvest.vue":"teXH","./NewCar/Budget/Battery/TIcBuBatteryInvestDI":"DeLq","./NewCar/Budget/Battery/TIcBuBatteryInvestDI.vue":"DeLq","./NewCar/Budget/Battery/TIcBuBatteryInvestZDI":"pIth","./NewCar/Budget/Battery/TIcBuBatteryInvestZDI.vue":"pIth","./NewCar/Budget/Battery/TIcBuBatteryLabour":"EMjc","./NewCar/Budget/Battery/TIcBuBatteryLabour.vue":"EMjc","./NewCar/Budget/Battery/TIcBuBatteryLabourlDI":"Iz6T","./NewCar/Budget/Battery/TIcBuBatteryLabourlDI.vue":"Iz6T","./NewCar/Budget/Battery/TIcBuBatteryMaterial":"6eCB","./NewCar/Budget/Battery/TIcBuBatteryMaterial.vue":"6eCB","./NewCar/Budget/Battery/TIcBuBatteryMaterialDI":"uoGy","./NewCar/Budget/Battery/TIcBuBatteryMaterialDI.vue":"uoGy","./NewCar/Budget/Battery/TIcBuBatteryPic":"nRqV","./NewCar/Budget/Battery/TIcBuBatteryPic.vue":"nRqV","./NewCar/Budget/Battery/TIcBuBatteryPicDI":"4wnU","./NewCar/Budget/Battery/TIcBuBatteryPicDI.vue":"4wnU","./NewCar/Budget/Battery/TIcBuBatteryPicFunds":"Ss0p","./NewCar/Budget/Battery/TIcBuBatteryPicFunds.vue":"Ss0p","./NewCar/Budget/Battery/TIcBuBatteryPicZDI":"pKAm","./NewCar/Budget/Battery/TIcBuBatteryPicZDI.vue":"pKAm","./NewCar/Budget/Painting/TIcBuPainting":"oxDA","./NewCar/Budget/Painting/TIcBuPainting.vue":"oxDA","./NewCar/Budget/Painting/TIcBuPaintingInvest":"ffkl","./NewCar/Budget/Painting/TIcBuPaintingInvest.vue":"ffkl","./NewCar/Budget/Painting/TIcBuPaintingInvestDI":"/o3i","./NewCar/Budget/Painting/TIcBuPaintingInvestDI.vue":"/o3i","./NewCar/Budget/Painting/TIcBuPaintingInvestZDI":"os3D","./NewCar/Budget/Painting/TIcBuPaintingInvestZDI.vue":"os3D","./NewCar/Budget/Painting/TIcBuPaintingLabour":"zD33","./NewCar/Budget/Painting/TIcBuPaintingLabour.vue":"zD33","./NewCar/Budget/Painting/TIcBuPaintingLabourlDI":"JYOD","./NewCar/Budget/Painting/TIcBuPaintingLabourlDI.vue":"JYOD","./NewCar/Budget/Painting/TIcBuPaintingMaterial":"9lgc","./NewCar/Budget/Painting/TIcBuPaintingMaterial.vue":"9lgc","./NewCar/Budget/Painting/TIcBuPaintingMaterialDI":"dbHl","./NewCar/Budget/Painting/TIcBuPaintingMaterialDI.vue":"dbHl","./NewCar/Budget/Painting/TIcBuPaintingPic":"6w8g","./NewCar/Budget/Painting/TIcBuPaintingPic.vue":"6w8g","./NewCar/Budget/Painting/TIcBuPaintingPicDI":"2IVI","./NewCar/Budget/Painting/TIcBuPaintingPicDI.vue":"2IVI","./NewCar/Budget/Painting/TIcBuPaintingPicFunds":"9Yi5","./NewCar/Budget/Painting/TIcBuPaintingPicFunds.vue":"9Yi5","./NewCar/Budget/Painting/TIcBuPaintingPicZDI":"CdzR","./NewCar/Budget/Painting/TIcBuPaintingPicZDI.vue":"CdzR","./NewCar/Budget/Resin/TIcBuResin":"44j5","./NewCar/Budget/Resin/TIcBuResin.vue":"44j5","./NewCar/Budget/Resin/TIcBuResinInvest":"mt2M","./NewCar/Budget/Resin/TIcBuResinInvest.vue":"mt2M","./NewCar/Budget/Resin/TIcBuResinInvestDI":"V5wI","./NewCar/Budget/Resin/TIcBuResinInvestDI.vue":"V5wI","./NewCar/Budget/Resin/TIcBuResinInvestZDI":"IOVJ","./NewCar/Budget/Resin/TIcBuResinInvestZDI.vue":"IOVJ","./NewCar/Budget/Resin/TIcBuResinLabour":"9RDS","./NewCar/Budget/Resin/TIcBuResinLabour.vue":"9RDS","./NewCar/Budget/Resin/TIcBuResinLabourlDI":"W/B4","./NewCar/Budget/Resin/TIcBuResinLabourlDI.vue":"W/B4","./NewCar/Budget/Resin/TIcBuResinMaterial":"uy2x","./NewCar/Budget/Resin/TIcBuResinMaterial.vue":"uy2x","./NewCar/Budget/Resin/TIcBuResinMaterialDI":"2763","./NewCar/Budget/Resin/TIcBuResinMaterialDI.vue":"2763","./NewCar/Budget/Resin/TIcBuResinPic":"0g07","./NewCar/Budget/Resin/TIcBuResinPic.vue":"0g07","./NewCar/Budget/Resin/TIcBuResinPicDI":"uHIP","./NewCar/Budget/Resin/TIcBuResinPicDI.vue":"uHIP","./NewCar/Budget/Resin/TIcBuResinPicFunds":"K8HG","./NewCar/Budget/Resin/TIcBuResinPicFunds.vue":"K8HG","./NewCar/Budget/Resin/TIcBuResinPicZDI":"uqws","./NewCar/Budget/Resin/TIcBuResinPicZDI.vue":"uqws","./NewCar/Budget/Resin/TIcBuWeldingInvestDI":"8nKs","./NewCar/Budget/Resin/TIcBuWeldingInvestDI.vue":"8nKs","./NewCar/Budget/Stamping/Stamping":"rkLl","./NewCar/Budget/Stamping/Stamping.vue":"rkLl","./NewCar/Budget/Stamping/StampingInvest":"YPTT","./NewCar/Budget/Stamping/StampingInvest.vue":"YPTT","./NewCar/Budget/Stamping/StampingInvestDI":"Vgup","./NewCar/Budget/Stamping/StampingInvestDI.vue":"Vgup","./NewCar/Budget/Stamping/StampingInvestZDI":"qE4d","./NewCar/Budget/Stamping/StampingInvestZDI.vue":"qE4d","./NewCar/Budget/Stamping/StampingLabour":"qaGO","./NewCar/Budget/Stamping/StampingLabour.vue":"qaGO","./NewCar/Budget/Stamping/StampingLabourlDI":"mQlM","./NewCar/Budget/Stamping/StampingLabourlDI.vue":"mQlM","./NewCar/Budget/Stamping/StampingMaterial":"C+na","./NewCar/Budget/Stamping/StampingMaterial.vue":"C+na","./NewCar/Budget/Stamping/StampingMaterialDI":"SjE2","./NewCar/Budget/Stamping/StampingMaterialDI.vue":"SjE2","./NewCar/Budget/Stamping/StampingPic":"ZkMO","./NewCar/Budget/Stamping/StampingPic.vue":"ZkMO","./NewCar/Budget/Stamping/StampingPicDI":"Esqk","./NewCar/Budget/Stamping/StampingPicDI.vue":"Esqk","./NewCar/Budget/Stamping/StampingPicFunds":"50BH","./NewCar/Budget/Stamping/StampingPicFunds.vue":"50BH","./NewCar/Budget/Stamping/StampingPicZDI":"qLoF","./NewCar/Budget/Stamping/StampingPicZDI.vue":"qLoF","./NewCar/Budget/Stamping/StampingS":"cZLy","./NewCar/Budget/Stamping/StampingS.vue":"cZLy","./NewCar/Budget/StampingApproval":"eCB+","./NewCar/Budget/StampingApproval.vue":"eCB+","./NewCar/Budget/Welding/Welding":"IMnS","./NewCar/Budget/Welding/Welding.vue":"IMnS","./NewCar/Budget/Welding/WeldingInvest":"30oC","./NewCar/Budget/Welding/WeldingInvest.vue":"30oC","./NewCar/Budget/Welding/WeldingInvestDI":"yXjv","./NewCar/Budget/Welding/WeldingInvestDI.vue":"yXjv","./NewCar/Budget/Welding/WeldingInvestZDI":"b6ri","./NewCar/Budget/Welding/WeldingInvestZDI.vue":"b6ri","./NewCar/Budget/Welding/WeldingLabour":"ikHd","./NewCar/Budget/Welding/WeldingLabour.vue":"ikHd","./NewCar/Budget/Welding/WeldingLabourlDI":"Krnv","./NewCar/Budget/Welding/WeldingLabourlDI.vue":"Krnv","./NewCar/Budget/Welding/WeldingMaterial":"R4P/","./NewCar/Budget/Welding/WeldingMaterial.vue":"R4P/","./NewCar/Budget/Welding/WeldingMaterialDI":"QlNj","./NewCar/Budget/Welding/WeldingMaterialDI.vue":"QlNj","./NewCar/Budget/Welding/WeldingPic":"vt9m","./NewCar/Budget/Welding/WeldingPic.vue":"vt9m","./NewCar/Budget/Welding/WeldingPicDI":"H0fP","./NewCar/Budget/Welding/WeldingPicDI.vue":"H0fP","./NewCar/Budget/Welding/WeldingPicFunds":"9+zb","./NewCar/Budget/Welding/WeldingPicFunds.vue":"9+zb","./NewCar/Budget/Welding/WeldingPicZDI":"rPqH","./NewCar/Budget/Welding/WeldingPicZDI.vue":"rPqH","./NewCar/Budget/Workflow/ProcessConfiguration":"6GiL","./NewCar/Budget/Workflow/ProcessConfiguration.vue":"6GiL","./NewCar/CarType/ApprovalList":"BtyH","./NewCar/CarType/ApprovalList.vue":"BtyH","./NewCar/CarType/CarTypeStageCompare":"yBzE","./NewCar/CarType/CarTypeStageCompare.vue":"yBzE","./NewCar/CarType/EngineeringSummary":"4IhR","./NewCar/CarType/EngineeringSummary.vue":"4IhR","./NewCar/CarType/ForecastMain":"dw9a","./NewCar/CarType/ForecastMain.vue":"dw9a","./NewCar/CarType/TypicalMain":"13PT","./NewCar/CarType/TypicalMain.vue":"13PT","./NewCar/Precondition/Brand":"aDJU","./NewCar/Precondition/Brand.vue":"aDJU","./NewCar/Precondition/CarType":"oGgH","./NewCar/Precondition/CarType.vue":"oGgH","./NewCar/Precondition/Factory":"KclI","./NewCar/Precondition/Factory.vue":"KclI","./NewCar/Precondition/Forecast":"1KBz","./NewCar/Precondition/Forecast.vue":"1KBz","./NewCar/Precondition/Platform":"We3H","./NewCar/Precondition/Platform.vue":"We3H","./NewCar/Precondition/Stage":"gA2/","./NewCar/Precondition/Stage.vue":"gA2/","./NewCar/Precondition/TIcBuCarType":"bU0e","./NewCar/Precondition/TIcBuCarType.vue":"bU0e","./NewCar/WorkFlow/AllTasks":"NecF","./NewCar/WorkFlow/AllTasks.vue":"NecF","./NewCar/WorkFlow/MyTasks":"L/27","./NewCar/WorkFlow/MyTasks.vue":"L/27","./NewCar/workConfig":"rwgC","./NewCar/workConfig.js":"rwgC","./Sys/Dept":"sWj1","./Sys/Dept.vue":"sWj1","./Sys/Dict":"sj2w","./Sys/Dict.vue":"sj2w","./Sys/ExcelTemplate":"nvX0","./Sys/ExcelTemplate.vue":"nvX0","./Sys/Log":"qnVm","./Sys/Log.vue":"qnVm","./Sys/Menu":"Is6l","./Sys/Menu.vue":"Is6l","./Sys/Pay":"NBKY","./Sys/Pay.vue":"NBKY","./Sys/PayRecordController":"5OEe","./Sys/PayRecordController.vue":"5OEe","./Sys/Role":"bfzu","./Sys/Role.vue":"bfzu","./Sys/Txmessage":"1S5d","./Sys/Txmessage.vue":"1S5d","./Sys/User":"VKGr","./Sys/User.vue":"VKGr","./Sys/VersionManagement":"0uU0","./Sys/VersionManagement.vue":"0uU0","./TableSet/TableSet":"jAyP","./TableSet/TableSet.vue":"jAyP","./Test/TestTable":"m71v","./Test/TestTable.vue":"m71v","./mpLogin":"kSa1","./mpLogin.vue":"kSa1"};function r(e){return a(s(e))}function s(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id="g9CB"},"gA2/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("xyj-table",this._b({ref:"otable",attrs:{id:"1"}},"xyj-table",this.tableConfig,!1))],1)},staticRenderFns:[]};var r=a("VU/8")({name:"Stage",mounted:function(){this.$refs.otable.hasPagination=!1},data:function(){return{tableConfig:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcDbStage",sorter:[{direction:"ASC",property:"id"}],bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcDbStage/query",method:"post",notCondition:!0},bNewUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcDbStage/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcDbStage/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyBaseUrl,url:"/tIcDbStage/delete",method:"delete"},onManualEdit:function(e,t){e&&(e.id=t.id)}}}}},i,!1,function(e){a("rO/U")},"data-v-b22ae4a8",null);t.default=r.exports},gQsH:function(e,t){},gRE1:function(e,t,a){e.exports={default:a("TmV0"),__esModule:!0}},gmA7:function(e,t){},gmfD:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuAssemblePicDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssemblePicDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuAssemblePicDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssemblePicDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssemblePicDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssemblePicDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssemblePicDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuAssemblePicDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuAssemblePicDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(){var e=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){e.$refs.reftableitem.getList(),e.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssemblePicDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].picId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssemblePicDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuAssemblePicDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssemblePicDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuAssemblePicDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuAssemblePicDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuAssemblePicDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].picId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"picId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuAssemblePicDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("SVO6")},"data-v-db961dae",null);t.default=f.exports},hcWO:function(e,t){},hh6j:function(e,t){},hnOB:function(e,t,a){"use strict";t.a=function(e,t,a){var i=this;Object(s.a)({hostUrl:o.lyBudgetUrl,url:"/"+e+"/getMaterialTdData?versionId="+t,method:"get"}).then(function(e){if(e.length>0){var t=e,i=e.map(function(t,a){var i={};i.name=t.name,i.type="bar",i.stack="总量",i.barWidth=30,i.label={normal:{show:!0,position:"top"}};var r=new Array(e.length);return r.fill("-"),i.data=r,i.data[a]=Math.abs(t.money),i});c(a,t,i)}else{c(a,[],[])}}).catch(function(e){i.$message.error(e.message)})};var i=a("mvHQ"),r=a.n(i),s=a("TE7m"),l=a("XLwt"),n=a.n(l),o=a("BfUi");function c(e,t,a){var i=n.a.init(document.getElementById(e)),s={title:{text:"推移图"},tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:function(e){var t="";return e[0].data.items?e[0].data.items.forEach(function(e){t+='<div style="text-align:left">'+e.name+":"+e.money+"</div>"}):t="<div>"+e[0].data.name+":"+e[0].data.money+"</div>",t}},grid:{top:"27%",left:"2%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{show:!0,padding:20,feature:{mark:{show:!0},restore:{show:!0},saveAsImage:{show:!0}}},xAxis:{type:"category",splitLine:{show:!1},axisLabel:{interval:0},data:t.map(function(e){return e.name})},yAxis:{type:"value",min:0},series:[{name:"",type:"bar",stack:"总量",itemStyle:{normal:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"},emphasis:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"}},data:function(){for(var e=JSON.parse(r()(t)),a=[],i=0,s=t.length;i<s;i++)a[i]=0===i?t[i].money:a[i-1]+t[i].money;return a.unshift(0),a.pop(),a.length>0&&(t.length>0&&(t[a.length-3].money>t[a.length-5].money?a[a.length-4]=t[a.length-5].money:a[a.length-4]=t[a.length-3].money),t.length>0&&(t[a.length-1].money>t[a.length-5].money?a[a.length-2]=t[a.length-5].money:a[a.length-2]=t[a.length-1].money),a[a.length-1]=0,a[a.length-3]=0,a[a.length-5]=0),e=e.map(function(t,i){return t.money<0&&i<e.length-5&&(a[i]=a[i]-Math.abs(t.money)),t.value=a[i],t})}()}].concat(a)};i.setOption(s,!0)}},hrdT:function(e,t){},i5Xj:function(e,t){},iXQL:function(e,t){},ikHd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"WeldingLabour",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingLabour/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuWeldingLabour",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingLabour/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingLabour/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingLabour/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingLabour/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})}),this.getinfo(e.versionId)},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),this.getinfo(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingLabour/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].labourId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingLabour/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingLabour/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getLabourInfo?versionId="+e+"&type=2"}).then(function(e){t.info=[{name:"直劳单价"},{name:"DSTR"},{name:"基点车直劳单价"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].labourId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"labourId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("mqyf")},"data-v-fd023668",null);t.default=f.exports},jAyP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("5bOz"),r=a("BfUi"),s=a("TE7m"),l=a("/ADh"),n={name:"TableSet",components:{XyjTable:i.a},data:function(){return{editForm:{},addDialogLoading:!1,addDialogVisible:!1,addDialogMany:!1,addDialogManyLoading:!1,rule:l.a,gridData:[],selectData:null,manylable:"",allEntityLoading:!1,tableConfig:{hasDelete:!0,hasNew:!1,hasView:!0,hasEdit:!0,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"200px"},hostUrl:r.lyBaseUrl,tableName:"SysTableinfo",sorter:[{direction:"ASC",property:"tablename"},{direction:"ASC",property:"arrange"}],bQuery:{hostUrl:r.lyBaseUrl,url:"sysTableinfo/query",method:"post",notCondition:!0},bNewUrl:{hostUrl:r.lyBaseUrl,url:"sysTableinfo/save",method:"post",close:!0},bEditUrl:{hostUrl:r.lyBaseUrl,url:"sysTableinfo/save",method:"post",close:!0},bDeleteUrl:{hostUrl:r.lyBaseUrl,url:"/sysTableinfo/delete",method:"post"},extraSelectData:{rule:function(){return[{label:"验证QQ号",value:"QQ"},{label:"非必填QQ号",value:"notQQ"},{label:"验证手机号",value:"phone"},{label:"非必填手机号",value:"notPhone"},{label:"两位小数",value:"checkMoney"},{label:"非必填两位小数",value:"notCheckMoney"},{label:"身份证",value:"checkId"},{label:"非必填身份证",value:"notCheckId"},{label:"整数",value:"checkInt"},{label:"非必填整数",value:"notCheckInt"},{label:"数字",value:"checkNum"},{label:"非必填数字",value:"notcheckNum"},{label:"输入框必填项",value:"checkMustFill"},{label:"选择框必填项",value:"checkSelectValue"},{label:"复选框必选项",value:"checkSelectArray"}]},align:function(){return[{label:"左对齐",value:"left"},{label:"右对齐",value:"right"},{label:"居中",value:"center"}]},fieldtype:function(){return[{label:"文本框",value:"input"},{label:"下拉框",value:"select"},{label:"单选组",value:"radio-group"},{label:"复选组",value:"checkbox-group"},{label:"多文本",value:"textarea"},{label:"单日期",value:"single-date"},{label:"开关",value:"switch"},{label:"上传文件",value:"upload"}]},headeralign:function(){return[{label:"左对齐",value:"left"},{label:"右对齐",value:"right"},{label:"居中",value:"center"}]},sumtype:function(){return[{label:"文本",value:"text"},{label:"求和",value:"sum"},{label:"平均值",value:"avg"},{label:"记录数",value:"count"}]}}}}},methods:{getRowDatas:function(e){this.selectData=e},addData:function(){var e=this;null!==this.selectData?(this.addDialogLoading=!0,Object(s.a)({hostUrl:r.lyBaseUrl,url:"/sysTableinfo/saveEntityClass",method:"POST",params:{servceId:this.selectData.httpUrl,classFullName:this.selectData.entityName}}).then(function(t){e.addDialogVisible=!1,e.$refs.otable.getList({0:{field0:"tablename",gx0:"EQUAL",value0:e.selectData.className,andor0:"AND"}})}).catch(function(t){e.$message.error(t.message)}).finally(function(t){e.addDialogLoading=!1})):this.$message.info("请选实体类信息")},addManyHeader:function(){var e=this;this.$refs.fromMany.validate(function(t){if(!t)return!1;var a=e.$refs.otable.selected;a.length<=1?e.$message.warning("最少选择两行数据，才能创建多级表头"):(e.addDialogManyLoading=!0,Object(s.a)({hostUrl:r.lyBaseUrl,url:"/sysTableinfo/createHeader",method:"POST",params:{label:e.manylable},data:a}).then(function(t){e.addDialogMany=!1,e.$refs.otable.getList()}).catch(function(t){e.$message.error(t.message)}).finally(function(t){e.addDialogManyLoading=!1}))})},selectEnClick:function(){var e=this;this.addDialogVisible=!0,Object(s.a)({hostUrl:r.lyBaseUrl,url:"/EureKaUtiles/getAllEntityClass",method:"GET"}).then(function(t){e.gridData=t}).catch(function(e){})},moreClick:function(){var e=this.$refs.otable.selected;e.length>1?e.some(function(t){if(t.tablename!==e[0].tablename)return!0})?this.$message.warning("多级表头不能跨表头选择"):this.addDialogMany=!0:this.$message.warning("最少选择两行数据，才能创建多级表头")},entityClick:function(){var e=this;this.$confirm("全部实体类初始化,会花费很长时间请耐心等待","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.allEntityLoading=!0,Object(s.a)({hostUrl:r.lyBaseUrl,timeout:12e5,url:"/sysTableinfo/saveAllEntityClass",method:"POST"}).then(function(t){e.$refs.otable.getList(),e.$message.info("实体类初始化完成")}).catch(function(t){e.$message.error(t.message)}).finally(function(t){e.allEntityLoading=!1})}).catch(function(){e.allEntityLoading=!1})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"otable",attrs:{id:"1"}},"xyj-table",e.tableConfig,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.selectEnClick}},[e._v(e._s(e.$t("action.selectEntityClasses")))]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.moreClick}},[e._v(e._s(e.$t("action.newMultilevelHeader")))]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",loading:e.allEntityLoading},on:{click:e.entityClick}},[e._v(e._s(e.$t("action.allEntityClassInitialize")))])],1)],2)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择实体类",visible:e.addDialogVisible},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("el-table",{ref:"classinfo",attrs:{data:e.gridData,height:"400",size:"mini","highlight-current-row":""},on:{"current-change":e.getRowDatas}},[a("el-table-column",{attrs:{property:"serviceId",label:"微服务ID",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{property:"httpUrl",label:"微服务网址"}}),e._v(" "),a("el-table-column",{attrs:{property:"entityName",label:"包类名"}}),e._v(" "),a("el-table-column",{attrs:{property:"className",label:"类名",width:"200"}})],1),e._v(" "),a("div",[a("el-button",{staticStyle:{padding:"7px"},attrs:{size:"mini"},on:{click:function(t){e.addDialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{size:"mini",type:"primary",loading:e.addDialogLoading},on:{click:e.addData}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增多级表头",visible:e.addDialogMany,width:"30%"},on:{"update:visible":function(t){e.addDialogMany=t}}},[a("el-form",{ref:"fromMany",attrs:{"label-width":"100px","label-position":"right",model:e.editForm}},[a("el-row",[a("el-form-item",{attrs:{label:"表头标题:",prop:"checkMustFill"}},[a("el-input",{attrs:{placeholder:"请输入多级表头标题",clearable:"",size:"medium",maxlength:"18"},model:{value:e.manylable,callback:function(t){e.manylable=t},expression:"manylable"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{padding:"7px"},attrs:{size:"mini"},on:{click:function(t){e.addDialogMany=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini",loading:e.addDialogManyLoading},on:{click:e.addManyHeader}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(n,o,!1,function(e){a("D/uo")},"data-v-1657012f",null);t.default=c.exports},jBMv:function(e,t){},jiAh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vmr0"),c=a("TE7m"),d=a("ZqJ4"),m={name:"TIcBuAssemblePic",components:{ChooseCarType:n.a,EditPicTable:o.a},data:function(){var e=this;return{qmodify:d.a.QMODIFY,approvaling:d.a.APPROVALING,reject:d.a.REJECT,complete:d.a.COMPLETE,ticketcancel:d.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,editdisabled:!1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssemblePic/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:d.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssemblePic/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!1,hasView:!1,hasEdit:!1,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(t,a){0==e.editdisabled&&(t.length>1?e.editdisabled=!0:e.editdisabled=!1)},"select-all":function(t){0==e.editdisabled&&(e.editdisabled=0!=t)}},extraSelectData:{class1:function(){return[{label:"劳务费",value:"劳务费"},{label:"JLAT",value:"JLAT"},{label:"海外出差",value:"海外出差"},{label:"国内出差",value:"国内出差"}]}},operationAttrs:{width:"100px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuAssemblePic",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssemblePic/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssemblePic/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssemblePic/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssemblePic/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,extraCheng:{class1:this.showClass2}}}},methods:{showClass2:function(e,t){this.$refs.reftableitem.$refs.dialogForm.value.class2="";"劳务费"==t?this.$refs.reftableitem.$refs.dialogForm.setOptions("class2",[{label:"直劳",value:"直劳"},{label:"准直",value:"准直"},{label:"间接",value:"间接"}]):"JLAT"!=t&&"海外出差"!=t&&"国内出差"!=t||this.$refs.reftableitem.$refs.dialogForm.setOptions("class2",[{label:"人月",value:"人月"},{label:"渡航回数",value:"渡航回数"}])},reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId,e.picId=t.picId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId,e.picId=this.$refs.reftableitem.data[0].picId},findByTableName:function(){this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,method:"get",url:"/sysTableinfo/findByTableNameByCarYears?tablename=TIcBuAssemblePic&versionId="+this.$refs.reftablamain.selected[0].versionId},this.tableitemKey++},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.findByTableName(),d.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.editdisabled=e,i.tableitem.disabledNew=e})})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.findByTableName()})}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),d.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.editdisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(){var e=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){e.$refs.reftableitem.getList()})},findafter2:function(e,t){e.length<=0||this.$refs.reftableitem.$refs.table.setCurrentRow(e[0])},add:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.getTableColumns;this.$refs.editpicshow.show("add",t,e,{},"/tIcBuAssemblePic/save")},edit:function(){var e=this.$refs.reftableitem.selected[0];if(""!=e&&void 0!=e){var t=e,a=this.$refs.reftablamain.selected[0].versionId,i=this.$refs.reftableitem.getTableColumns;this.$refs.editpicshow.show("edit",i,a,t,"/tIcBuAssemblePic/save")}else this.$message({type:"info",message:"请选择要编辑的数据！"})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssemblePic/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].picId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssemblePic/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssemblePic/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},submission:function(){var e=this;d.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].picId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"picId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"},on:{update:e.findafter2}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.add"),disabled:e.isDisabled},on:{click:e.add}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.editdisabled},on:{click:e.edit}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("edit-pic-table",{ref:"editpicshow",on:{update:e.findByTableName}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var p=a("VU/8")(m,u,!1,function(e){a("m4bx")},"data-v-39e17c2b",null);t.default=p.exports},k0yw:function(e,t){},k3T2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("AUIh");var i={name:"YlkPage",data:function(){return{loading:!1,pageRequest:{page:1,pageSize:10,showTotal:!0},options:"",form:{gas_id:"",date:"",date1:"",gasName:""},form2:{gas_id:"",date:"",date2:"",gasName:"",isHistory:""},rules:{date:[{required:!0,message:"请选择开始日期",trigger:"change"}],date2:[{required:!0,message:"请选择结束日期",trigger:"change"}],gas_id:[{required:!0,message:"请选择油站",trigger:"change"}]},jsEndDate:"",query:[],tableData:{rows:[]},columns:[{prop:"gasName",label:"油站名称",width:"160",align:"center"},{prop:"allSalemoney",label:"销售总金额",width:"140",align:"center"},{prop:"allProfitmoney",label:"油站当日收益（元）",width:"190",align:"center"},{prop:"allYemoney",label:"余额（总额）",width:"160",align:"center"},{prop:"allWxmoery",label:"微信（总额）",width:"160",align:"center"},{prop:"allAlimoery",label:"支付宝（总额）",width:"160",align:"center"},{prop:"allCashmoney",label:"现金（总额）",width:"160",align:"center"},{prop:"allScmoney",label:"刷卡（总额）",width:"160",align:"center"},{prop:"_92ilnum",label:"汽油92（总升）",width:"160",align:"center"},{prop:"_95ilnum",label:"汽油95（总升）",width:"160",align:"center"},{prop:"_00ilnum",label:"柴油0（总升）",width:"160",align:"center"},{prop:"_98ilnum",label:"柴油-10#（总升）",width:"180",align:"center"}]}},computed:{gasId:function(){return this.form.gas_id}},watch:{gasId:function(e){var t=this;t.options.map(function(a,i){a.id==e&&(t.form.gasName=a.name)})}},created:function(){this.getSelect()},mounted:function(){this.findPage()},methods:{getSummaries:function(e){var t=e.columns,a=e.data,i=[];return t.forEach(function(e,t){if(0!==t){var r=a.map(function(t){return Number(t[e.property])});t>3&&t<11?(i[t]=r.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),i[t]=i[t].toFixed(2)+" 元"):i[t]=""}else i[t]="结算"}),i},getSelect:function(){var e=this;e.$api.common.xyjPost({url:"/partGasinfo/query",data:{}}).then(function(t){console.log(t.data),e.options=t.data.rows})},handleSelectionChange:function(e){this.multipleSelection=e,this.$message({type:"warning",message:this.multipleSelection})},refreshPageRequest:function(e){this.pageRequest.page=e,this.findPage()},refreshPageSizeRequest:function(e){this.pageRequest.pageSize=e,this.findPage()},formPass:function(){var e=this;this.$refs.searchForm.validate(function(t){if(!t)return!1;e.searchquery()})},searchquery:function(){var e=[];this.form.gas_id&&e.push({hasInitValue:!1,operation:"EQUAL",property:"gas_id",relation:"AND",value:this.form.gas_id}),this.form.date&&e.push({hasInitValue:!1,operation:"EQUAL",property:"nowyear",relation:"AND",value:this.form.date}),this.query=e,this.findPage()},findPage:function(){var e=this;e.loading=!0,e.form2.date=e.form.date,e.form2.gas_id=e.form.gas_id,e.form2.gasName=e.form.gasName,console.log(e.form2),e.$api.common.xyjQueryPost({url:"/appOrderJsDays/getsellapporderMonths",data:{pageBean:{},params:{},querys:e.query,selfDate:{},sorter:[]}}).then(function(t){e.loading=!1,console.log("res",t),e.tableData=t})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"sys-coupon-bag"},[a("el-container",[a("el-header",[a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-search"}),a("span",{staticClass:"sx"},[e._v("筛选查询")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-row"),e._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"mini"},on:{click:e.formPass}},[e._v("查询")])],1)])]),e._v(" "),a("el-main",[a("el-row",{staticClass:"searchForm"},[a("el-form",{ref:"searchForm",attrs:{size:"small",model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"油站",prop:"gas_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.gas_id,callback:function(t){e.$set(e.form,"gas_id",t)},expression:"form.gas_id"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"年份",prop:"date"}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{align:"right",type:"year","value-format":"yyyy",placeholder:"选择年"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)])],1)],1),e._v(" "),a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-tickets"}),a("span",{staticClass:"sx"},[e._v("会员列表")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-button",{staticClass:"fa fa-refresh",attrs:{size:"mini",type:"primary"},on:{click:e.findPage}},[e._v("\n              刷新\n            ")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.tableData.rows,size:"mini","show-summary":"","summary-method":e.getSummaries,"show-overflow-tooltip":"true",border:""}},[a("el-table-column",{attrs:{fixed:"left",type:"index",label:"序号","min-width":"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"left",prop:"nowyear",label:"年","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"left",prop:"months",label:"月","min-width":"100",align:"center"}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{sortable:"",prop:e.prop,label:e.label,formatter:e.formatter,"min-width":e.width,align:e.align}})})],2),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageRequest.page,"page-sizes":[10,20,30,40,50],"page-size":e.pageRequest.pageSize,layout:"sizes, total, prev, pager, next",total:e.tableData.total},on:{"current-change":e.refreshPageRequest,"size-change":e.refreshPageSizeRequest}})],1)],1)],1)],1)])},staticRenderFns:[]};var s=a("VU/8")(i,r,!1,function(e){a("1D4K")},null,null);t.default=s.exports},kDph:function(e,t){},kWiv:function(e,t){},kdhO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("AUIh"),r={name:"YlkPage",data:function(){return{loading:!1,pageRequest:{page:1,pageSize:10,showTotal:!0},options:"",form:{gas_id:"",date:"",gasName:""},form2:{gas_id:"",date:"",date2:"",gasName:""},rules:{date:[{required:!0,message:"请选择开始日期",trigger:"change"}],date2:[{required:!0,message:"请选择结束日期",trigger:"change"}],gas_id:[{required:!0,message:"请选择油站",trigger:"change"}]},query:[],tableData:{rows:[]},columns:[{prop:"gasName",label:"油站名称",width:"160",align:"center"},{prop:"allSalemoney",label:"销售总金额",width:"140",align:"center"},{prop:"allProfitmoney",label:"油站当日收益（元）",width:"180",align:"center"},{prop:"allYemoney",label:"余额（总额）",width:"140",align:"center"},{prop:"allWxmoery",label:"微信（总额）",width:"140",align:"center"},{prop:"allAlimoery",label:"支付宝（总额）",width:"140",align:"center"},{prop:"allCashmoney",label:"现金（总额）",width:"140",align:"center"},{prop:"allScmoney",label:"刷卡（总额）",width:"140",align:"center"},{prop:"_92ilnum",label:"汽油92（总升）",width:"160",align:"center"},{prop:"_95ilnum",label:"汽油95（总升）",width:"160",align:"center"},{prop:"_00ilnum",label:"柴油0（总升）",width:"160",align:"center"},{prop:"_98ilnum",label:"柴油-10#（总升）",width:"160",align:"center"},{prop:"createTime",label:"操作时间",width:"160",align:"center",formatter:function(e,t,a,r){return Object(i.a)(e[t.property])}},{prop:"createBy",label:"结算人",width:"150",align:"center"}]}},props:["detailsId"],watch:{detailsId:function(e){console.log(e),e&&(this.form.gas_id=e,this.searchquery())}},created:function(){},mounted:function(){this.searchquery()},methods:{showParent:function(){this.$emit("showParent",{})},formatter:function(e,t,a,i){return a.toString().substring(0,10)},getSummaries:function(e){var t=e.columns,a=e.data,i=[];return t.forEach(function(e,t){if(0!==t){var r=a.map(function(t){return Number(t[e.property])});t>2&&t<10?(i[t]=r.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),i[t]=i[t].toFixed(2)+" 元"):i[t]=""}else i[t]="结算"}),i},handleSelectionChange:function(e){this.multipleSelection=e,this.$message({type:"warning",message:this.multipleSelection})},refreshPageRequest:function(e){this.pageRequest.page=e,this.findPage()},refreshPageSizeRequest:function(e){this.pageRequest.pageSize=e,this.findPage()},searchquery:function(){var e=[];this.form.gas_id&&e.push({hasInitValue:!1,operation:"EQUAL",property:"js_id",relation:"AND",value:this.form.gas_id}),this.form.date&&e.push({hasInitValue:!1,operation:"BETWEEN",property:"js_day_date",relation:"AND",value:this.form.date}),this.query=e,this.findPage()},findPage:function(){var e=this;e.$api.common.xyjQueryPost({url:"/appOrderJsDays/query",data:{pageBean:e.pageRequest,params:{},querys:e.query,selfDate:{},sorter:[]}}).then(function(t){e.loading=!1,console.log("res",t),e.tableData=t.data})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"sys-coupon-bag"},[a("el-container",[a("el-header",[a("div",{staticClass:"details-top"},[a("el-button",{staticClass:"el-icon-back",attrs:{size:"mini",type:"primary"},on:{click:e.showParent}},[e._v("\n            返回\n          ")]),e._v(" "),a("span",[e._v("结算详情")]),e._v(" "),a("div")],1)]),e._v(" "),a("el-main",[a("div",{staticClass:"header m-top"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-search"}),a("span",{staticClass:"sx"},[e._v("筛选查询")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-row"),e._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"mini"},on:{click:e.searchquery}},[e._v("查询")])],1)]),e._v(" "),a("el-row",{staticClass:"searchForm"},[a("el-form",{ref:"searchForm",attrs:{size:"small",model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"结算日期",prop:"date"}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)])],1)],1),e._v(" "),a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-tickets"}),a("span",{staticClass:"sx"},[e._v("会员列表")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-button",{staticClass:"fa fa-refresh",attrs:{size:"mini",type:"primary"},on:{click:e.findPage}},[e._v("\n              刷新\n            ")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.tableData.rows,size:"mini","show-summary":"","summary-method":e.getSummaries,"show-overflow-tooltip":"true",border:""}},[a("el-table-column",{attrs:{fixed:"left",type:"index",label:"序号","min-width":"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"left",formatter:e.formatter,prop:"theday",label:"结算日","min-width":"150",align:"center"}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{sortable:"",prop:e.prop,label:e.label,formatter:e.formatter,"min-width":e.width,align:e.align}})})],2),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageRequest.page,"page-sizes":[10,20,30,40,50],"page-size":e.pageRequest.pageSize,layout:"sizes, total, prev, pager, next",total:e.tableData.total},on:{"current-change":e.refreshPageRequest,"size-change":e.refreshPageSizeRequest}})],1)],1)],1)],1)])},staticRenderFns:[]};var l=a("VU/8")(r,s,!1,function(e){a("t8yQ")},"data-v-1bf14a12",null);t.default=l.exports},kr8L:function(e,t){},ksef:function(e,t){},lB67:function(e,t){},lPpo:function(e,t){},lmfZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),r=a.n(i),s=a("NYxO"),l=a("lbHh"),n=a.n(l),o=a("dMNq"),c=a("wr9A"),d={name:"Login",components:{ThemePicker:o.a,LangSelector:c.a},data:function(){return{loading:!1,loginForm:{account:"",password:""},fieldRules:{account:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!0}},methods:{login:function(){var e=this;this.loading=!0;var t={account:this.loginForm.account,password:this.loginForm.password};this.$api.login.login(t).then(function(a){null!=a.msg?e.$message({message:a.msg,type:"error"}):(n.a.set("token",a.data.token),sessionStorage.setItem("user",t.account),e.$store.commit("menuRouteLoaded",!1),e.$router.push("/")),e.loading=!1}).catch(function(t){e.$message({message:t.message,type:"error"})})},reset:function(){this.$refs.loginForm.resetFields()},onThemeChange:function(e){this.$store.commit("setThemeColor",e)}},mounted:function(){},computed:r()({},Object(s.b)({themeColor:function(e){return e.app.themeColor}}))},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"loginForm",staticClass:"demo-ruleForm login-container",attrs:{model:e.loginForm,rules:e.fieldRules,"label-position":"left","label-width":"0px"}},[a("span",{staticClass:"tool-bar"},[a("theme-picker",{staticClass:"theme-picker",staticStyle:{float:"right"},attrs:{default:e.themeColor},on:{onThemeChange:e.onThemeChange}})],1),e._v(" "),a("h2",{staticClass:"title",staticStyle:{"padding-left":"22px"}},[e._v("数据中心登录")]),e._v(" "),a("el-form-item",{attrs:{prop:"account"}},[a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.loginForm.account,callback:function(t){e.$set(e.loginForm,"account",t)},expression:"loginForm.account"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-button",{staticStyle:{width:"48%"},attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.reset(t)}}},[e._v("重 置")]),e._v(" "),a("el-button",{staticStyle:{width:"48%"},attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("登 录")])],1)],1)},staticRenderFns:[]};var u=a("VU/8")(d,m,!1,function(e){a("MNhb")},"data-v-2f898f20",null);t.default=u.exports},m1ne:function(e,t){},m4bx:function(e,t){},m71v:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("//Fk"),r=a.n(i),s={name:"testTable",components:{XyjTable:a("5bOz").a},data:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return{tableConfig:{url:"",hasDelete:!0,hasNew:!0,hasView:!0,hasEdit:!0,single:!1,headerButtons:[{text:"批量导出",disabled:function(e){return 0===e.length},atClick:function(e){var t=e.map(function(e){return e.id});alert(t)}},{text:"导出",show:function(e){return 0===e.length},atClick:function(e){var t=e.map(function(e){return e.id});alert(t)}}],tableAttrs:{rowClick:function(e){this.$message.info(e.toString())}},onNew:function(e,t){return new r.a(function(e,t){e({clear:!0,close:!1,successMessage:"成功了，你很厉害"})})},onAfterSuccessNew:function(e,t){this.$message.info("onAfterSuccessNew")},onAfterFailNew:function(e,t){this.$message.info(e)},canDelete:function(e){if("1111"===e.code)return!0},onDelete:function(e){return new r.a(function(e,t){data.aaa="1234",isNew?(console.info(data),e({sdata:data,sisNew:"resolve"})):(console.info(data),t({rdata:data,rNew:"reject",message:"操作错误了"}))})},onAfterSuccessDelete:function(e){this.$message.info("onAfterSuccessDelete")},onAfterFailDelete:function(e,t){this.$message.info("onAfterFailDelete")}}}}),methods:{clickRow:function(e){this.$message.info(e)},error:function(e){this.$message.error(e)},reset:function(){},customQuery:function(e){}}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("xyj-table",this._b({attrs:{id:"1"},on:{error:this.error,"row-click":this.clickRow,reset:this.reset,"update:customQuery":this.customQuery}},"xyj-table",this.tableConfig,!1),[t("div",{attrs:{slot:"form"},slot:"form"},[t("el-input",{attrs:{placeholder:"请输入内容"}},[t("template",{slot:"prepend"},[this._v("Http://")])],2)],1)])],1)},staticRenderFns:[]};var n=a("VU/8")(s,l,!1,function(e){a("FeuD")},"data-v-309433e6",null);t.default=n.exports},m7kY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("//Fk"),r=a.n(i),s=a("BfUi"),l={name:"csOrder",data:function(){return{dialogEdit:!1,operation:!1,isColor:!1,sonColor:!1,lableName:"品牌:",downType:"0",title:"新增品牌",uploadData:"",prevdelId:"",nextdelId:"",oneId:"",total:0,id:"",total1:1,parentList:[],sonList:[],params:{},pageBean:{page:1,pageSize:7,showTotal:!0},pageBean1:{page:1,pageSize:7,showTotal:!0},editForm:{flag:"",imgsrc:""},editFormRules:{flag:[{required:!0,message:"内容不能为空",trigger:"blur"}],imgsrc:[{required:!0,message:"必须上传LOGO图",trigger:"change"}]}}},methods:{submitForm:function(e,t){if(!this.editForm.imgsrc)return this.$message({message:"必须上传LOGO图片!",type:"error",duration:2e3}),!1;var a=this;a.$refs[t].validate(function(t){t&&(a.params=0==e?{id:a.id,logo:a.editForm.imgsrc,name:a.editForm.flag,nlevel:0,parentId:0,sortnum:0}:{id:a.id,logo:a.editForm.imgsrc,name:a.editForm.flag,nlevel:1,parentId:a.prevdelId,sortnum:0},a.$api.common.xyjActivePost({url:"/sysCarBrand/save",data:a.params}).then(function(e){200==e.code?(a.oneId=e.data,a.dialogEdit=!1,""!=a.id?(a.id="",a.$message({message:"编辑成功",type:"success",duration:1e3})):a.$message({message:"添加成功",type:"success",duration:1e3}),a.findPage(),a.editForm.flag="",a.editForm.imgsrc="",a.isColor=!1,a.sonColor=!1):a.$message({message:"操作失败, "+e.shortMessage,type:"error",duration:800})}))})},edit:function(e){this.dialogEdit=!0,this.operation=!0,this.lableName="品牌:",this.title="编辑品牌",this.downType="0",this.id=this.parentList[e].id,this.editForm.flag=this.parentList[e].name,this.editForm.imgsrc=this.parentList[e].logo},sonedit:function(e){if(!this.prevdelId)return this.$message({message:"请先选择品牌!",type:"error",duration:1e3}),!1;this.dialogEdit=!0,this.operation=!0,this.lableName="品牌系列:",this.title="编辑品牌系列",this.downType="1",this.id=this.sonList[e].id,this.editForm.flag=this.sonList[e].name,this.editForm.imgsrc=this.sonList[e].logo},add:function(){this.id="",this.dialogEdit=!0,this.operation=!0,this.lableName="品牌:",this.title="新增品牌",this.downType="0",this.editForm.flag="",this.editForm.imgsrc=""},sonAdd:function(){if(!this.prevdelId)return this.$message({message:"请先选择品牌!",type:"error",duration:1e3}),!1;this.dialogEdit=!0,this.operation=!0,this.lableName="品牌系列:",this.title="新增品牌系列",this.downType="1",this.editForm.flag="",this.editForm.imgsrc="",this.id=""},handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw)},handlerAvatarError:function(e){this.$alert(e)},uploadOpen:function(e){console.log(e);var t=this,a=new FormData;a.append("file",e.file),t.$api.LM.instance.post(s.default.uploadImgUrl+"/FileUploadController/uploadFile",a).then(function(e){t.editForm.imgsrc=e})},beforeAvatarUpload:function(e){var t=this;return e.type.indexOf("image")<0?(this.$alert({message:"图片格式不正确",btn:!1}),!1):e.size/1024/1024<2?new r.a(function(t,a){var i=window.URL||window.webkitURL,r=new Image;r.onload=function(){44==r.width&&44==r.height?t():a()},r.src=i.createObjectURL(e)}).then(function(){return e},function(){return t.$alert("上传的图片大小必须是等于44*44!"),r.a.reject()}):(this.$alert({message:"图片大小不能超过2M。",btn:!1}),!1)},xzPage:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.page=this.parentList1.page},currentPageChage:function(e){this.sonList.pageSize=e,this.findPage()},cellClick:function(e){this.isColor=e,this.prevdelId=this.parentList[e].id,this.cellfindPage(e)},sonClick:function(e){this.sonColor=e,this.nextdelId=this.sonList[e].id},findPage:function(){var e=this;return new r.a(function(t,a){e.$api.common.xyjClonePost({url:"/sysCarBrand/query",data:{pageBean:e.pageBean,querys:[{hasInitValue:!1,operation:"EQUAL",property:"nlevel",relation:"AND",value:"0"}]}}).then(function(a){200==a.code?(e.total=a.data.total,e.parentList=a.data.rows,e.parentId=e.parentList[0].id,e.isColor=0,e.sonColor=!1,e.findPage1(),t()):e.$message({message:"操作失败, "+a.shortMessage,type:"error",duration:800})})})},findPage1:function(){var e=this;this.$api.common.xyjClonePost({url:"/sysCarBrand/query",data:{pageBean:this.pageBean,querys:[{hasInitValue:!1,operation:"EQUAL",property:"parentId",relation:"AND",value:this.parentList[0].id}]}}).then(function(t){200==t.code?(e.total1=t.data.total,e.sonList=t.data.rows):e.$message({message:"操作失败, "+t.shortMessage,type:"error",duration:800})})},cellfindPage:function(e){var t=this;this.$api.common.xyjClonePost({url:"/sysCarBrand/query",data:{pageBean:this.pageBean,querys:[{hasInitValue:!1,operation:"EQUAL",property:"parentId",relation:"AND",value:this.parentList[e].id}]}}).then(function(e){200==e.code?(t.total1=e.data.total,t.sonList=e.data.rows):t.$message({message:"操作失败, "+e.shortMessage,type:"error",duration:800})})},del:function(){var e=this;if(!this.prevdelId)return this.$message({message:"请点击选择品牌",type:"error",duration:800}),!1;this.$confirm("确认删除？").then(function(t){e.$api.common.xyjActivePost({url:"/sysCarBrand/delete",data:[{id:e.prevdelId}]}).then(function(t){200==t.code?(e.$message({message:"删除成功",type:"success",duration:1e3}),e.prevdelId="",e.isColor=!1,e.sonColor=!1,e.findPage()):e.$message({message:"操作失败, "+t.shortMessage,type:"error",duration:800})})}).catch(function(e){})},sonDel:function(){var e=this;if(!this.nextdelId)return this.$message({message:"请点击选择品牌",type:"error",duration:800}),!1;this.$confirm("确认删除？").then(function(t){e.$api.common.xyjActivePost({url:"/sysCarBrand/delete",data:[{id:e.nextdelId}]}).then(function(t){200==t.code?(e.$message({message:"删除成功",type:"success",duration:1e3}),e.nextdelId="",e.sonColor=!1,e.findPage()):e.$message({message:"操作失败, "+t.shortMessage,type:"error",duration:800})})}).catch(function(e){})},resetForm:function(e){this.dialogEdit=!1,this.$refs.editForm.resetFields()},refreshPageRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pageBean.page=e,this.findPage()},refreshPageSizeRequest:function(e){this.sonlist.pageSize=e,this.findPage()}},mounted:function(){this.findPage()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticStyle:{height:"38px"}},[a("div",{staticClass:"header"},[a("div",{staticStyle:{"margin-left":"10px"}},[a("span",{staticClass:"el-icon-setting"}),a("span",{staticClass:"sx"},[e._v("汽车品牌管理")])]),e._v(" "),a("div",{staticClass:"headright"})])]),e._v(" "),a("el-main",[a("transition",{attrs:{name:"el-fade-in"}},[a("el-dialog",{staticClass:"dialog-oil-price-edit",staticStyle:{width:"50%",margin:"auto"},attrs:{title:e.title,visible:e.dialogEdit},on:{"update:visible":function(t){e.dialogEdit=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"120px"}},[a("el-form-item",{staticStyle:{width:"90%"},attrs:{label:e.lableName,prop:"flag"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.editForm.flag,callback:function(t){e.$set(e.editForm,"flag",t)},expression:"editForm.flag"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"添加图片:"}},[a("el-upload",{staticClass:"dialog-lunbo-uploader",attrs:{action:"123",accept:"image/*","show-file-list":!1,"http-request":e.uploadOpen,"on-success":e.handleAvatarSuccess,"on-error":e.handlerAvatarError,"before-upload":e.beforeAvatarUpload}},[e.editForm.imgsrc?a("img",{staticClass:"avatar",attrs:{src:e.editForm.imgsrc}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("div",{staticClass:"dialog-upload-tips"},[e._v("\n\t\t\t                           \t 为防止图片变形，请上传图片大小为44*44\n\t\t\t                        ")])])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetForm("editForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm(e.downType,"editForm")}}},[e._v("确 定")])],1)],1)],1),e._v(" "),a("div",{staticClass:"box"},[a("div",{staticClass:"card-left"},[a("el-card",{staticClass:"box-card",staticStyle:{position:"relative","min-height":"500px"}},[e._l(e.parentList,function(t,i){return a("div",{key:i,staticClass:"text item",class:{color:e.isColor===i},on:{click:function(t){e.cellClick(i)},dblclick:function(t){e.edit(i)}}},[a("img",{attrs:{src:t.logo}}),e._v("  "+e._s(t.name)+"\n\t\t\t\t\t\t  ")])}),e._v(" "),a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("品牌")])]),e._v(" "),a("div",{staticClass:"btn"},[a("el-button",{staticClass:"el-icon-circle-plus-outline",attrs:{type:"primary",size:"mini"},on:{click:e.add}},[e._v("新增")]),e._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{type:"primary",size:"mini"},on:{click:e.del}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"fy"},[a("el-pagination",{attrs:{background:"","current-page":e.pageBean.page,"page-size":e.pageBean.pageSize,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.refreshPageRequest,"size-change":e.refreshPageSizeRequest}})],1)],2)],1),e._v(" "),a("div",{staticClass:"card-left"},[a("el-card",{staticClass:"box-card",staticStyle:{position:"relative","min-height":"500px"}},[e._l(e.sonList,function(t,i){return a("div",{key:i,staticClass:"text item",class:{color:e.sonColor===i},on:{click:function(t){e.sonClick(i)},dblclick:function(t){e.sonedit(i)}}},[a("img",{attrs:{src:t.logo}}),e._v("  "+e._s(t.name)+"\n\t\t\t\t\t\t  ")])}),e._v(" "),a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("品牌系列")])]),e._v(" "),a("div",{staticClass:"btn"},[a("el-button",{staticClass:"el-icon-circle-plus-outline",attrs:{type:"primary",size:"mini"},on:{click:e.sonAdd}},[e._v("新增")]),e._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{type:"primary",size:"mini"},on:{click:e.sonDel}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"fy"},[a("el-pagination",{attrs:{background:"","current-page":e.pageBean1.page,"page-size":e.pageBean1.pageSize,layout:" total, prev, pager, next",total:e.total1},on:{"current-change":e.currentPageChage,"size-change":e.xzPage}})],1)],2)],1)])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(l,n,!1,function(e){a("Dp0i")},"data-v-16b6c9ec",null);t.default=o.exports},mEik:function(e,t){},mQlM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"StampingLabourlDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},text:[],fileList:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingLabourlDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuStampingLabourlDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingLabourlDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingLabourlDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingLabourlDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingLabourlDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuStampingLabourlDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuStampingLabourlDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingLabourlDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].labourlId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingLabourlDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuStampingLabourlDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingLabourlDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuStampingLabourlDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuStampingLabourlDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuStampingLabourlDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].labourlId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"labourlId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuStampingLabourlDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("gQsH")},"data-v-9cde834e",null);t.default=f.exports},mbce:function(e,t,a){var i=a("lktj"),r=a("TcQ7"),s=a("NpIQ").f;e.exports=function(e){return function(t){for(var a,l=r(t),n=i(l),o=n.length,c=0,d=[];o>c;)s.call(l,a=n[c++])&&d.push(e?[a,l[a]]:l[a]);return d}}},mqyf:function(e,t){},ms4Q:function(e,t){},mt2M:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"TIcBuResinInvest",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinInvest/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{"expand-change":function(t,a){a.length?(e.$refs.reftableitem.expands=[],t&&e.$refs.reftableitem.expands.push(t.id)):e.$refs.reftableitem.expands=[]},"cell-click":function(t,a,i,r){e.$refs.reftableitem.$refs.table.toggleRowExpansion(t)}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuResinInvest",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinInvest/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinInvest/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinInvest/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinInvest/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})}),this.getinfo(e.versionId)},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),this.getinfo(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinInvest/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinInvest/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinInvest/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getMaterialsInfo?versionId="+e}).then(function(e){t.info=[{name:"日元汇率"},{name:"基点车汇率"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px",position:"relative"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("xpQ4")},"data-v-1c315ce8",null);t.default=f.exports},nQR5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"TIcBuAssemblePicFunds",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:"",progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssemblePicFunds/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuAssemblePicFunds",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssemblePicFunds/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssemblePicFunds/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuAssemblePicFunds/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssemblePicFunds/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),i.getinfo(e.versionId),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})})},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),this.getinfo(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssemblePicFunds/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].fundsId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuAssemblePicFunds/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuAssemblePicFunds/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getMaterialsInfo?versionId="+e}).then(function(e){t.info=[{name:"新车汇率"},{name:"基点车汇率"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].fundsId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"fundsId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("mEik")},"data-v-d753d6ea",null);t.default=f.exports},nRqV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vmr0"),c=a("TE7m"),d=a("ZqJ4"),m={name:"TIcBuBatteryPic",components:{ChooseCarType:n.a,EditPicTable:o.a},data:function(){var e=this;return{qmodify:d.a.QMODIFY,approvaling:d.a.APPROVALING,reject:d.a.REJECT,complete:d.a.COMPLETE,ticketcancel:d.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,editdisabled:!1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryPic/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:d.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryPic/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!1,hasView:!1,hasEdit:!1,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(t,a){0==e.editdisabled&&(t.length>1?e.editdisabled=!0:e.editdisabled=!1)},"select-all":function(t){0==e.editdisabled&&(e.editdisabled=0!=t)}},extraSelectData:{class1:function(){return[{label:"劳务费",value:"劳务费"},{label:"JLAT",value:"JLAT"},{label:"海外出差",value:"海外出差"},{label:"国内出差",value:"国内出差"}]}},operationAttrs:{width:"100px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuBatteryPic",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryPic/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryPic/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryPic/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryPic/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,extraCheng:{class1:this.showClass2}}}},methods:{showClass2:function(e,t){this.$refs.reftableitem.$refs.dialogForm.value.class2="";"劳务费"==t?this.$refs.reftableitem.$refs.dialogForm.setOptions("class2",[{label:"直劳",value:"直劳"},{label:"准直",value:"准直"},{label:"间接",value:"间接"}]):"JLAT"!=t&&"海外出差"!=t&&"国内出差"!=t||this.$refs.reftableitem.$refs.dialogForm.setOptions("class2",[{label:"人月",value:"人月"},{label:"渡航回数",value:"渡航回数"}])},reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId,e.picNo=t.picNo)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId,e.picNo=this.$refs.reftableitem.data[0].picNo},findByTableName:function(){this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,method:"get",url:"/sysTableinfo/findByTableNameByCarYears?tablename=tIcBuBatteryPic&versionId="+this.$refs.reftablamain.selected[0].versionId},this.tableitemKey++},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.findByTableName(),d.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.editdisabled=e,i.tableitem.disabledNew=e})})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.findByTableName()})}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),d.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.editdisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},findafter2:function(e,t){e.length<=0||this.$refs.reftableitem.$refs.table.setCurrentRow(e[0])},add:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.getTableColumns;this.$refs.editpicshow.show("add",t,e,{},"/tIcBuBatteryPic/save")},edit:function(){var e=this.$refs.reftableitem.selected[0];if(""!=e&&void 0!=e){var t=e,a=this.$refs.reftablamain.selected[0].versionId,i=this.$refs.reftableitem.getTableColumns;this.$refs.editpicshow.show("edit",i,a,t,"/tIcBuBatteryPic/save")}else this.$message({type:"info",message:"请选择要编辑的数据！"})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryPic/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].picNo,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryPic/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryPic/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},submission:function(){var e=this;d.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].picNo;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"picNo"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"},on:{update:e.findafter2}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.add"),disabled:e.isDisabled},on:{click:e.add}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.editdisabled},on:{click:e.edit}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("edit-pic-table",{ref:"editpicshow",on:{update:e.findByTableName}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var p=a("VU/8")(m,u,!1,function(e){a("Gzdy")},"data-v-40adbef8",null);t.default=p.exports},nZqn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("AUIh"),r={name:"SmsPushRecord",data:function(){return{loading:!1,form:{nickname:"",phone:"",setdate:""},pageRequest:{page:1,pageSize:10,showTotal:!0},columns:[{label:"推送时间",prop:"setdate",width:"140",formatter:function(e,t,a,r){return Object(i.a)(e[t.property])}},{label:"手机账号",prop:"phone",width:"100"},{label:"姓名",prop:"nickname",width:"100"},{label:"推送事件",prop:"type",width:"140"},{label:"推送内容",prop:"memo",width:"510"}],tableData:{rows:[]}}},mounted:function(){this.findPage()},methods:{refreshPageRequest:function(e){this.pageRequest.page=e,this.findPage()},refreshPageSizeRequest:function(e){this.pageRequest.pageSize=e,this.findPage()},searchquery:function(){var e=[];this.form.phone&&e.push({hasInitValue:!1,operation:"EQUAL",property:"phone",relation:"AND",value:this.form.phone}),this.form.nickname&&e.push({hasInitValue:!1,operation:"EQUAL",property:"nickname",relation:"AND",value:this.form.nickname}),this.form.setdate&&e.push({hasInitValue:!1,operation:"BETWEEN",property:"setdate",relation:"AND",value:this.form.setdate}),this.query=e,this.findPage()},findPage:function(){var e=this;e.$api.common.xyjPost({url:"/AppUserSms/query",data:{pageBean:e.pageRequest,querys:e.query}}).then(function(t){console.log(t),e.tableData=t.data})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",[a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-search"}),a("span",{staticClass:"sx"},[e._v("筛选查询")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-row"),e._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"mini"},on:{click:e.searchquery}},[e._v("查询")])],1)])]),e._v(" "),a("el-main",[a("el-row",{staticClass:"searchForm"},[a("el-form",{attrs:{size:"small","label-width":"120px"}},[a("el-form-item",{attrs:{label:"手机账号"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入手机账号"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入会员姓名"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"推送日期"}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.setdate,callback:function(t){e.$set(e.form,"setdate",t)},expression:"form.setdate"}})],1)])],1)],1),e._v(" "),a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-tickets"}),a("span",{staticClass:"sx"},[e._v("短信推送历史数据")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-button",{staticClass:"fa fa-refresh",attrs:{size:"mini",type:"primary"},on:{click:e.findPage}},[e._v("\n            刷新\n          ")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.tableData.rows,size:"mini","show-overflow-tooltip":"false",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"50",align:"center"}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{sortable:"",prop:e.prop,label:e.label,formatter:e.formatter,"min-width":e.width,align:"center"}})})],2),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageRequest.page,"page-sizes":[10,20,30,40,50],"page-size":e.pageRequest.pageSize,layout:"sizes, total, prev, pager, next",total:e.tableData.total},on:{"current-change":e.refreshPageRequest,"size-change":e.refreshPageSizeRequest}})],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(r,s,!1,function(e){a("17+9")},"data-v-b6ceb1ca",null);t.default=l.exports},niAL:function(e,t){},nvX0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("TE7m"),l={name:"ExcelTemplate",mounted:function(){this.handleClick()},data:function(){return{tabName:"first",dialogVisible:!1,title:"",form:{file:"",memo:""},templateNo:"",rules:{file:{required:!0,message:"请选择上传的文件",trigger:"blur"}},tIcDbTemplate:{hasOperation:!1,hasDelete:!1,hasNew:!0,hasView:!1,hasEdit:!1,formatters:{projectType:function(e,t,a){switch(a){case 1:return"冲压";case 2:return"焊装";case 3:return"树脂";case 4:return"涂装";case 5:return"总装";case 6:return"电池";case 7:return"车型";default:return a}},materialType:function(e,t,a){switch(a){case 1:return"直材清单";case 2:return"直劳清单";case 3:return"投资清单";case 4:return"PIC劳务清单";case 5:return"PIC经费清单";case 6:return" 直材推移图";case 7:return"直劳推移图";case 8:return"投资推移图";case 9:return"投资推移图(0基点)";case 10:return"PIC推移图";case 11:return"PIC推移图(0基点)";default:return a}}},tableAttrs:{width:"800px"},tableOns:{"row-click":this.rowClick},operationAttrs:{width:"100px"},hostUrl:this.global.lyBaseUrl,tableName:"tIcDbTemplate",sorter:[{direction:"ASC",property:"materialType"},{direction:"ASC",property:"yearType"}],paginationSize:30,customQuery:{100:{field100:"projectType",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcDbTemplate/query",method:"post",notCondition:!1}}}},methods:{rowClick:function(e,t,a){this.form.memo=e.memo,this.templateNo=e.templateNo},fileUpload:function(e){this.form.file=e.file},reoperation1:function(){this.$refs.tIcDbTemplate1.selected<=0?(this.dialogVisible=!1,this.$message({type:"info",message:"请选择数据进行重新操作！"})):(this.dialogVisible=!0,this.title="车型预算模板")},reoperation2:function(){this.$refs.tIcDbTemplate2.selected<=0?(this.dialogVisible=!1,this.$message({type:"info",message:"请选择数据进行重新操作！"})):(this.dialogVisible=!0,this.title="冲压预算模板")},reoperation3:function(){this.$refs.tIcDbTemplate3.selected<=0?(this.dialogVisible=!1,this.$message({type:"info",message:"请选择数据进行重新操作！"})):(this.dialogVisible=!0,this.title="车体预算模板")},reoperation4:function(){this.$refs.tIcDbTemplate4.selected<=0?(this.dialogVisible=!1,this.$message({type:"info",message:"请选择数据进行重新操作！"})):(this.dialogVisible=!0,this.title="涂装预算模板")},reoperation5:function(){this.$refs.tIcDbTemplate5.selected<=0?(this.dialogVisible=!1,this.$message({type:"info",message:"请选择数据进行重新操作！"})):(this.dialogVisible=!0,this.title="树脂预算模板")},reoperation6:function(){this.$refs.tIcDbTemplate6.selected<=0?(this.dialogVisible=!1,this.$message({type:"info",message:"请选择数据进行重新操作！"})):(this.dialogVisible=!0,this.title="总装预算模板")},reoperation7:function(){this.$refs.tIcDbTemplate7.selected<=0?(this.dialogVisible=!1,this.$message({type:"info",message:"请选择数据进行重新操作！"})):(this.dialogVisible=!0,this.title="电池预算模板")},download:function(){var e=this;if(""==this.templateNo)this.dialogVisible=!1,this.$message({type:"info",message:"请选择数据进行模板下载！"});else{var t=new FormData;t.append("templateNo",this.templateNo),Object(s.a)({hostUrl:this.global.lyBaseUrl,url:"tIcDbTemplate/downloaddExcel",method:"post",data:t}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})}},handleClick:function(){var e=this;"first"==this.tabName?(this.tIcDbTemplate.customQuery[100]=r()({},this.tIcDbTemplate.customQuery[100],{value100:7}),this.$nextTick(function(){e.$refs.tIcDbTemplate1.getList()})):"sec"==this.tabName?(this.tIcDbTemplate.customQuery[100]=r()({},this.tIcDbTemplate.customQuery[100],{value100:1}),this.$nextTick(function(){e.$refs.tIcDbTemplate2.getList()})):"three"==this.tabName?(this.tIcDbTemplate.customQuery[100]=r()({},this.tIcDbTemplate.customQuery[100],{value100:2}),this.$nextTick(function(){e.$refs.tIcDbTemplate3.getList()})):"four"==this.tabName?(this.tIcDbTemplate.customQuery[100]=r()({},this.tIcDbTemplate.customQuery[100],{value100:4}),this.$nextTick(function(){e.$refs.tIcDbTemplate4.getList()})):"five"==this.tabName?(this.tIcDbTemplate.customQuery[100]=r()({},this.tIcDbTemplate.customQuery[100],{value100:3}),this.$nextTick(function(){e.$refs.tIcDbTemplate5.getList()})):"six"==this.tabName?(this.tIcDbTemplate.customQuery[100]=r()({},this.tIcDbTemplate.customQuery[100],{value100:5}),this.$nextTick(function(){e.$refs.tIcDbTemplate6.getList()})):"seven"==this.tabName&&(this.tIcDbTemplate.customQuery[100]=r()({},this.tIcDbTemplate.customQuery[100],{value100:6}),this.$nextTick(function(){e.$refs.tIcDbTemplate7.getList()}))},submit:function(){var e=this,t=new FormData;t.append("file",this.form.file),t.append("templateNo",this.templateNo),t.append("memo",this.form.memo),Object(s.a)({hostUrl:this.global.lyBaseUrl,method:"post",url:"/tIcDbTemplate/uploadTemplate",data:t}).then(function(t){console.log(t),e.$message({type:"success",message:"操作成功！"}),e.dialogVisible=!1,e.handleClick()}).catch(function(t){e.$message.error(t.message)})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[a("el-tab-pane",{attrs:{label:"车型预算模板",name:"first"}},[[a("xyj-table",e._b({ref:"tIcDbTemplate1",attrs:{id:"1"}},"xyj-table",e.tIcDbTemplate,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.reoperation1}},[e._v(e._s(e.$t("action.Reoperation")))]),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.download}},[e._v(e._s(e.$t("action.downloadTemplate")))])],1)],2)]],2),e._v(" "),a("el-tab-pane",{attrs:{label:"冲压预算模板",name:"sec"}},[[a("xyj-table",e._b({ref:"tIcDbTemplate2",attrs:{id:"2"}},"xyj-table",e.tIcDbTemplate,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.reoperation2}},[e._v(e._s(e.$t("action.Reoperation")))]),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.download}},[e._v(e._s(e.$t("action.downloadTemplate")))])],1)],2)]],2),e._v(" "),a("el-tab-pane",{attrs:{label:"车体预算模板",name:"three"}},[[a("xyj-table",e._b({ref:"tIcDbTemplate3",attrs:{id:"3"}},"xyj-table",e.tIcDbTemplate,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.reoperation3}},[e._v(e._s(e.$t("action.Reoperation")))]),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.download}},[e._v(e._s(e.$t("action.downloadTemplate")))])],1)],2)]],2),e._v(" "),a("el-tab-pane",{attrs:{label:"涂装预算模板",name:"four"}},[[a("xyj-table",e._b({ref:"tIcDbTemplate4",attrs:{id:"4"}},"xyj-table",e.tIcDbTemplate,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.reoperation4}},[e._v(e._s(e.$t("action.Reoperation")))]),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.download}},[e._v(e._s(e.$t("action.downloadTemplate")))])],1)],2)]],2),e._v(" "),a("el-tab-pane",{attrs:{label:"树脂预算模板",name:"five"}},[[a("xyj-table",e._b({ref:"tIcDbTemplate5",attrs:{id:"5"}},"xyj-table",e.tIcDbTemplate,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.reoperation5}},[e._v(e._s(e.$t("action.Reoperation")))]),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.download}},[e._v(e._s(e.$t("action.downloadTemplate")))])],1)],2)]],2),e._v(" "),a("el-tab-pane",{attrs:{label:"总装预算模板",name:"six"}},[[a("xyj-table",e._b({ref:"tIcDbTemplate6",attrs:{id:"6"}},"xyj-table",e.tIcDbTemplate,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.reoperation6}},[e._v(e._s(e.$t("action.Reoperation")))]),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.download}},[e._v(e._s(e.$t("action.downloadTemplate")))])],1)],2)]],2),e._v(" "),a("el-tab-pane",{attrs:{label:"电池预算模板",name:"seven"}},[[a("xyj-table",e._b({ref:"tIcDbTemplate7",attrs:{id:"7"}},"xyj-table",e.tIcDbTemplate,!1),[a("template",{slot:"xyjcontainer"},[a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.reoperation7}},[e._v(e._s(e.$t("action.Reoperation")))]),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"},on:{click:e.download}},[e._v(e._s(e.$t("action.downloadTemplate")))])],1)],2)]],2)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form}},[a("el-form-item",{attrs:{prop:"file"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"https://jsonplaceholder.typicode.com/posts/",limit:1,"http-request":e.fileUpload}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])])])]}}])}),e._v(" "),a("el-form-item",{attrs:{prop:"memo"}},[a("el-input",{attrs:{clearable:"",placeholder:"备注："},model:{value:e.form.memo,callback:function(t){e.$set(e.form,"memo",t)},expression:"form.memo"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{padding:"7px"},attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{size:"mini",type:"primary"},on:{click:e.submit}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(l,n,!1,function(e){a("0D0i")},"data-v-57ae72d3",null);t.default=o.exports},"o0/S":function(e,t){},o85e:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"FindPayToCancel",data:function(){return{column:[{prop:"precode",label:"支付票号",minwidth:"180",align:"center",formatter:""},{prop:"productCode",label:"系统账号",minwidth:"180",align:"center",formatter:""},{prop:"commonName",label:"手机账号",minwidth:"100",align:"center",formatter:""},{prop:"commonName",label:"姓名",minwidth:"180",align:"center",formatter:""},{prop:"commonName",label:"购买类型",minwidth:"120",align:"center",formatter:function(){}},{prop:"commonName",label:"实付金额(元)",minwidth:"100",align:"center",formatter:""},{prop:"commonName",label:"充值金额(元)",minwidth:"100",align:"center",formatter:""},{prop:"agentType",label:"油标号",minwidth:"100",align:"center",formatter:""},{prop:"agentType",label:"支付方式",minwidth:"100",align:"center",formatter:function(){}},{prop:"agentType",label:"支付单号",minwidth:"100",align:"center",formatter:""},{prop:"agentType",label:"购买日期",minwidth:"180",align:"center",formatter:""},{prop:"agentType",label:"购买时间",minwidth:"180",align:"center",formatter:""}],restaurants:[],labelPosition:"right",loading2:!0,total:0,operation:!0,dialogTableVisible:!1,tableData3:[],yzoption:[],checked:!1,loading:!1,phone:"",zfphName:"",yzname:"",zfDate:"",addzsm:"0",search:[],pageRequest:{page:1,pageSize:10,showTotal:!0}}},methods:{youzname:function(){var e=this;if(0!=this.gongoption.length)this.gongoption.filter(function(t){t.supplierName==e.gongname&&(e.gongid=t.id,console.log(e.gongid))})},refreshPageRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pageRequest.page=e,this.findPage()},refreshPageSizeRequest:function(e){this.tableData3.pageSize=e,this.findPage()},searchquery:function(){this.phone&&this.search.push({property:"productNum",value:this.phone,operation:"LIKE",relation:"AND"}),this.zfphName&&this.search.push({property:"productNum",value:this.zfphName,operation:"LIKE",relation:"AND"}),this.zfDate&&this.search.push({property:"productNum",value:this.zfDate,operation:"LIKE",relation:"AND"}),this.findPage(this.search)},findPage:function(e){var t=this;this.loading=!0,this.$api.common.xyjPost({url:"/scm/scmZsjProduct/v1/list",data:{pageBean:this.pageRequest,params:{},querys:e,sorter:[]}}).then(function(e){e?(t.tableData3=e.rows,t.total=e.total,t.loading2=!1,t.search=[]):t.$message({message:"操作失败, "+e.shortMessage,type:"error",duration:800})})}},mounted:function(){this.findPage()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",[a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-search"}),a("span",{staticClass:"sx"},[e._v("筛选查询")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-row"),e._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"mini"},on:{click:e.searchquery}},[e._v("查询")])],1)])]),e._v(" "),a("el-main",[a("el-form",{staticClass:"demo-ruleForm",attrs:{"label-position":e.labelPosition,size:"small","label-width":"120px"}},[a("el-form-item",{attrs:{label:"手机账号"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入手机账号"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付票号"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入支付票号"},model:{value:e.zfphName,callback:function(t){e.zfphName=t},expression:"zfphName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"购买类型"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择购买类型"},on:{change:e.youzname},model:{value:e.yzname,callback:function(t){e.yzname=t},expression:"yzname"}},e._l(e.yzoption,function(e){return a("el-option",{key:e.id,attrs:{label:e.supplierName,value:e.supplierName}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"购买日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.zfDate,callback:function(t){e.zfDate=t},expression:"zfDate"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-tickets"}),a("span",{staticClass:"sx"},[e._v("购买订单查询")])]),e._v(" "),a("div",{staticClass:"headright"})]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.tableData3,size:"mini","show-overflow-tooltip":"false","show-summary":"true",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",minwidth:"100",align:"center"}}),e._v(" "),e._l(e.column,function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,formatter:e.formatter,"min-width":e.minwidth,align:e.align}})})],2),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageRequest.page,"page-sizes":[10,20,30,40,50],"page-size":e.pageRequest.pageSize,layout:"sizes, total, prev, pager, next",total:e.total},on:{"current-change":e.refreshPageRequest,"size-change":e.refreshPageSizeRequest}})],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,r,!1,function(e){a("vfVL")},"data-v-106ae87c",null);t.default=s.exports},oGgH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("xyj-table",this._b({ref:"otable",attrs:{id:"1"}},"xyj-table",this.tableConfig,!1))],1)},staticRenderFns:[]};var r=a("VU/8")({name:"CarType",mounted:function(){this.$refs.otable.hasPagination=!1},data:function(){return{tableConfig:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBaseUrl,tableName:"TIcDbType",sorter:[{direction:"ASC",property:"id"}],bQuery:{hostUrl:this.global.lyBaseUrl,url:"tIcDbType/query",method:"post",notCondition:!0},bNewUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcDbType/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBaseUrl,url:"tIcDbType/save",method:"post",close:!0},bDeleteUrl:{hostUrl:this.global.lyBaseUrl,url:"/tIcDbType/delete",method:"delete"},onManualEdit:function(e,t){e&&(e.id=t.id)},extraSelectData:{memo:function(){return[{label:"验证QQ号",value:"QQ"},{label:"验证手机号",value:"phone"},{label:"两位小数",value:"checkMoney"},{label:"身份证",value:"checkId"},{label:"整数",value:"checkInt"},{label:"输入框必填项",value:"checkMustFill"},{label:"选择框必填项",value:"checkSelectValue"},{label:"复选框必选项",value:"checkSelectArray"}]}}}}}},i,!1,function(e){a("eLfP")},"data-v-257b27bf",null);t.default=r.exports},oXfx:function(e,t,a){"use strict";var i=a("TE7m"),r={name:"chooseCarType",props:{paramsTrans:{type:Object,default:function(){return{}}},onOk:{type:Function}},data:function(){return{dialogVisible:!1,loadState:!1,carForm:{carType:"",stage:"",versionId:""},ctypes:"",stages:"",editions:""}},created:function(){},methods:{open:function(e){this.dialogVisible=e,this.chooseCarType()},chooseCarType:function(){var e=this,t=this.paramsTrans;Object(i.a)(t).then(function(a){console.log(a),e.ctypes=a,e.carForm.carType=a[0].ctype,e.carForm.stage=a[0].stages[0].stage;var i=a[0].stages[0].versions;e.carForm.versionId=i[0].versionId;for(var r=t.confirmParms.basecar,s=t.confirmParms.basestage,l=t.confirmParms.baseCarVersionId,n=0;n<a.length;n++)if(r==a[n].ctype){e.carForm.carType=a[n].ctype;for(var o=0;o<a[n].stages.length;o++)if(s==a[n].stages[o].stage){e.carForm.stage=a[n].stages[o].stage;for(var c=0;c<a[n].stages[o].versions.length;c++)l==a[n].stages[o].versions[c].versionId&&(e.carForm.versionId=a[n].stages[o].versions[c].versionId)}}e.chooseStage()}).catch(function(t){e.$message.error(t.message)})},chooseStage:function(){var e=this.carForm.carType;this.stages=this.ctypes.reduce(function(t,a,i,r){return a.ctype==e&&(t=a.stages),t},[]),this.chooseVersion()},chooseVersion:function(){var e=this.carForm.stage;this.editions=this.stages.reduce(function(t,a,i,r){return a.stage==e&&(t=a.versions),t},[])},chooseStage2:function(){var e=this,t=this.carForm.carType;this.stages=this.ctypes.reduce(function(a,i,r,s){return i.ctype==t&&(e.carForm.stage=i.stages[0].stage,e.carForm.versionId=i.stages[0].versions[0].versionId,a=i.stages),a},[]),this.chooseVersion2()},chooseVersion2:function(){var e=this,t=this.carForm.stage;this.editions=this.stages.reduce(function(a,i,r,s){return i.stage==t&&(e.carForm.versionId=i.versions[0].versionId,a=i.versions),a},[])},selectedVersion:function(){var e=this,t=this.carForm.versionId,a=this.paramsTrans.confirmParms.baseCarVersionId;""==t||t!=a&&this.$confirm("你所选车型不是基点车，是否进行?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){}).catch(function(){e.$message({type:"info",message:"已取消"}),e.carForm.versionId=""})},carConfirm:function(){var e=this;if(""==this.carForm.carType)this.$message.error("请选择车型");else if(""==this.carForm.stage)this.$message.error("请选择阶段");else if(""==this.carForm.versionId)this.$message.error("请选择版本");else{var t=this.paramsTrans.confirmParms,a=t.baseCarVersionId;if(t.params.versionId.length<=0)return void this.$message.error("主版本ID不能为空");if(a.length<=0)return void this.$message.error("基点车ID不能为空");var r=this.carForm.versionId;if(r.length<=0)return void this.$message.error("版本ID不能为空");t.params.baseVersionId=r,this.loadState=!0,Object(i.a)(t).then(function(t){e.onOk&&e.onOk(r),e.dialogVisible=!1,e.loadState=!1,e.$refs.carForm.resetFields()}).catch(function(t){e.$message.error(t.message),e.loadState=!1}).finally(function(e){})}}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"选择车型",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"carForm",staticClass:"demo-ruleForm",attrs:{"label-position":"right",size:"small",model:e.carForm,"label-width":"10px"}},[a("el-form-item",{attrs:{prop:"carType"}},[a("el-select",{attrs:{clearable:"",placeholder:"选择车型"},on:{change:e.chooseStage2},model:{value:e.carForm.carType,callback:function(t){e.$set(e.carForm,"carType",t)},expression:"carForm.carType"}},e._l(e.ctypes,function(e){return a("el-option",{key:e.ctype,attrs:{value:e.ctype,label:e.ctype}})}))],1),e._v(" "),a("el-form-item",{attrs:{prop:"stage"}},[a("el-select",{attrs:{clearable:"",placeholder:"选择阶段"},on:{change:e.chooseVersion2},model:{value:e.carForm.stage,callback:function(t){e.$set(e.carForm,"stage",t)},expression:"carForm.stage"}},e._l(e.stages,function(e){return a("el-option",{key:e.stage,attrs:{value:e.stage,label:e.stage}})}))],1),e._v(" "),a("el-form-item",{attrs:{prop:"versionId"}},[a("el-select",{attrs:{clearable:"",placeholder:"选择版本"},on:{change:e.selectedVersion},model:{value:e.carForm.versionId,callback:function(t){e.$set(e.carForm,"versionId",t)},expression:"carForm.versionId"}},e._l(e.editions,function(e){return a("el-option",{key:e.versionId,attrs:{value:e.versionId,label:e.version+"/"+e.factoryName}})}))],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{padding:"7px"},attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{staticStyle:{padding:"7px"},attrs:{size:"mini",type:"primary",loading:e.loadState},on:{click:e.carConfirm}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(r,s,!1,function(e){a("k0yw")},"data-v-695e4b72",null);t.a=l.exports},ofO4:function(e,t){},os3D:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuPaintingInvestZDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingInvestZDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,isExpand:!1,dialogWidth:"1000px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuPaintingInvestZDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingInvestZDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingInvestZDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingInvestZDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingInvestZDI/delete",method:"delete"},extraSelectData:{ordertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},materialtype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new4type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new5type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},othertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]}},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete,onDialogDefault:function(e){e.orderType="车型",e.materialType="车型",e.new1Type="车型",e.new2Type="车型",e.new3Type="车型",e.new4Type="车型",e.new5Type="车型",e.skill1Type="车型",e.skill2Type="车型",e.skill3Type="车型",e.otherType="车型"}}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuPaintingInvestZDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuPaintingInvestZDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingInvestZDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingInvestZDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuPaintingInvestZDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingInvestZDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuPaintingInvestZDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuPaintingInvestZDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuPaintingInvestZDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuPaintingInvestZDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",disabled:e.isDisabled,label:e.$t("action.chooseVehicleType")},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("+4C/")},"data-v-bca68e48",null);t.default=f.exports},oxDA:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=(a("TE7m"),{name:"TIcBuPainting",components:{},data:function(){return{tableitemKey:1,tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick},operationAttrs:{width:"200px"},formatters:{state:function(e,t,a,i){switch(a){case 0:return"编辑中";case 1:return"审批中";case 2:return"完成";default:return a}}},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfoSum",sorter:[],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPainting/getSumInfo",method:"post",notCondition:!0},InitQuery:{}},tableitem:{hasOperation:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"OfficeSum",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"carId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPainting/getSumInfoItem",method:"post",notCondition:!1}}}},methods:{findByTableName:function(){this.tableitem.editAxios={hostUrl:this.global.lyBudgetUrl,method:"get",url:"/sysTableinfo/findByTableNameAccordVersionNum?tablename=OfficeSum&carId="+this.$refs.reftablamain.selected[0].carId},this.tableitemKey++},rowclick:function(e,t,a){var i=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.carId}),this.$nextTick(function(){i.findByTableName()})},findafter:function(e,t){var a=this;e.length<=0||(this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e[0].carId}),this.$nextTick(function(){a.findByTableName()}))}}}),l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",[t("xyj-table",this._b({ref:"reftablamain",attrs:{id:"1"},on:{update:this.findafter}},"xyj-table",this.tablemain,!1))],1),this._v(" "),t("div",[t("xyj-table",this._b({key:this.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",this.tableitem,!1))],1)])},staticRenderFns:[]};var n=a("VU/8")(s,l,!1,function(e){a("TDYB")},"data-v-77b375a6",null);t.default=n.exports},p0ki:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("AUIh"),r=a("lbHh"),s=a.n(r),l={name:"UserDays",data:function(){return{isShowPage:!1,thedays:"",loading:!1,pageRequest:{page:1,pageSize:10,showTotal:!0},options:"",form:{gas_id:"",phone:"",name:"",date:"",precode:"",cpCpno:""},form2:{gas_id:"",date:"",date2:"",gasName:""},rules:{date:[{required:!0,message:"请选择开始日期",trigger:"change"}],date2:[{required:!0,message:"请选择结束日期",trigger:"change"}],gas_id:[{required:!0,message:"请选择油站",trigger:"change"}]},gasId:"",query:[],tableData:{rows:[]},columns:[{prop:"precode",label:"支付票号",width:"180",align:"center"},{prop:"payTime",label:"支付时间",width:"180",align:"center",formatter:function(e,t,a,r){return Object(i.a)(e[t.property])}},{prop:"appUserPhone",label:"手机账号",width:"140",align:"center"},{prop:"appUserNickname",label:"姓名",width:"140",align:"center"},{prop:"cpCpno",label:"车牌号",width:"160",align:"center"},{prop:"oilPaymoney",label:"订单金额(元)",width:"160",align:"center"},{prop:"oilType",label:"油标号",width:"100",align:"center",formatter:function(e,t,a){return 0==a?"00#柴油":1==a?"-10#柴油":2==a?"95#汽油":3==a?"92#汽油":void 0}},{prop:"oilNum",label:"油量(升)",width:"100",align:"center"},{prop:"cybfee",label:"存油宝服务费(升/元)",width:"150",align:"center"},{prop:"payAccountMoney",label:"结算余额(元)",width:"100",align:"center"},{prop:"payWxpayMoney",label:"微信(元)",width:"100",align:"center"},{prop:"payAlipayMoney",label:"支付宝(元)",width:"100",align:"center"},{prop:"payCashMoney",label:"现金(元)",width:"100",align:"center"},{prop:"payScMoney",label:"刷卡(元)",width:"100",align:"center"},{prop:"oilFee",label:"结算价(元/升)",width:"100",align:"center"},{prop:"oilFee",label:"单价(元/升)",width:"100",align:"center"},{prop:"agentType",label:"收益",width:"100",align:"center"},{prop:"agentType",label:"总收益",width:"100",align:"center"},{prop:"paytype",label:"支付方式",width:"100",align:"center"},{prop:"payWxpayCode",label:"微信单号",width:"100",align:"center"},{prop:"agentType",label:"支付终端",width:"120",align:"center"},{prop:"id",label:"油站编号",width:"100",align:"center"},{prop:"partUserName",label:"加油员工号",width:"100",align:"center"},{prop:"partUserRealname",label:"加油员姓名",width:"100",align:"center"},{prop:"partUserRealname",label:"会员确认",width:"100",align:"center"},{prop:"partUserRealname",label:"确认方式",width:"100",align:"center"},{prop:"partUserRealname",label:"确认日期",width:"100",align:"center"}]}},created:function(){this.getSelect()},mounted:function(){this.gasId=s.a.get("gasId"),this.formPass()},methods:{getSummaries:function(e){var t=e.columns,a=e.data,i=[];return t.forEach(function(e,t){if(0!==t){var r=a.map(function(t){return Number(t[e.property])});t>3&&t<11?(i[t]=r.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),i[t]=i[t].toFixed(2)+" 元"):i[t]=""}else i[t]="合计"}),i},getSelect:function(){var e=this;e.$api.common.xyjPost({url:"/partGasinfo/query",data:{}}).then(function(t){console.log(t.data),e.options=t.data.rows})},handleSelectionChange:function(e){this.multipleSelection=e,this.$message({type:"warning",message:this.multipleSelection})},refreshPageRequest:function(e){this.pageRequest.page=e,this.findPage()},refreshPageSizeRequest:function(e){this.pageRequest.pageSize=e,this.findPage()},formPass:function(){var e=[];this.form.gas_id&&e.push({hasInitValue:!1,operation:"EQUAL",property:"gas_id",relation:"AND",value:this.form.gas_id}),this.form.phone&&e.push({hasInitValue:!1,operation:"EQUAL",property:"app_user_phone",relation:"AND",value:this.form.phone}),this.form.name&&e.push({hasInitValue:!1,operation:"EQUAL",property:"part_user_realname",relation:"AND",value:this.form.name}),this.form.date&&e.push({hasInitValue:!1,operation:"BETWEEN",property:"pay_time",relation:"AND",value:this.form.date}),this.form.precode&&e.push({hasInitValue:!1,operation:"EQUAL",property:"precode",relation:"AND",value:this.form.precode}),this.form.cpCpno&&e.push({hasInitValue:!1,operation:"EQUAL",property:"cp_cpno",relation:"AND",value:this.form.cpCpno}),this.query=e,this.findPage()},findPage:function(){var e=this;e.$api.common.xyjQueryPost({url:"/appOrder/query",data:{pageBean:e.pageRequest,params:{},querys:e.query,selfDate:{},sorter:[]}}).then(function(t){(t.code=200)&&(e.loading=!1,e.tableData=t.data)})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"pays-query"},[a("el-container",[a("el-header",[a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-search"}),a("span",{staticClass:"sx"},[e._v("筛选查询")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-row"),e._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"mini"},on:{click:e.formPass}},[e._v("查询")])],1)])]),e._v(" "),a("el-main",[a("el-row",{staticClass:"searchForm"},[a("el-form",{ref:"searchForm",attrs:{size:"small",model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"油站",prop:"gas_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.gas_id,callback:function(t){e.$set(e.form,"gas_id",t)},expression:"form.gas_id"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"date"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入手机号"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"加油员姓名",prop:"date"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入加油员姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付日期",prop:"date"}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择支付日期"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"支付票号",prop:"date"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入支付票号"},model:{value:e.form.precode,callback:function(t){e.$set(e.form,"precode",t)},expression:"form.precode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"车牌号",prop:"date"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入车牌号"},model:{value:e.form.cpCpno,callback:function(t){e.$set(e.form,"cpCpno",t)},expression:"form.cpCpno"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-tickets"}),a("span",{staticClass:"sx"},[e._v("会员列表")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-button",{staticClass:"fa fa-refresh",attrs:{size:"mini",type:"primary"},on:{click:e.findPage}},[e._v("\n              刷新\n            ")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.tableData.rows,size:"mini","show-summary":"","summary-method":e.getSummaries,"show-overflow-tooltip":"true",border:""}},[a("el-table-column",{attrs:{fixed:"left",type:"index",label:"序号","min-width":"90",align:"center"}}),e._v(" "),e._l(e.columns,function(e,t){return a("el-table-column",{key:t,attrs:{sortable:"",prop:e.prop,label:e.label,formatter:e.formatter,"min-width":e.width,align:"center"}})})],2),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageRequest.page,"page-sizes":[10,20,30,40,50],"page-size":e.pageRequest.pageSize,layout:"sizes, total, prev, pager, next",total:e.tableData.total},on:{"current-change":e.refreshPageRequest,"size-change":e.refreshPageSizeRequest}})],1)],1)],1)],1)])},staticRenderFns:[]};var o=a("VU/8")(l,n,!1,function(e){a("N5r1")},"data-v-68543f99",null);t.default=o.exports},pIth:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuBatteryInvestZDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryInvestZDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuBatteryInvestZDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryInvestZDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryInvestZDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryInvestZDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryInvestZDI/delete",method:"delete"},extraSelectData:{threadtype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},incidentaltype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},electrictype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},logisticstype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},pugtype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},othertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]}},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuBatteryInvestZDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuBatteryInvestZDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryInvestZDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryInvestZDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuBatteryInvestZDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryInvestZDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuBatteryInvestZDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuBatteryInvestZDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuBatteryInvestZDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].investId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"investId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuBatteryInvestZDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("YTIs")},"data-v-734d1226",null);t.default=f.exports},pKAm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuBatteryPicZDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryPicZDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuBatteryPicZDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryPicZDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryPicZDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryPicZDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryPicZDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuBatteryPicZDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuBatteryPicZDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryPicZDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].picId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryPicZDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuBatteryPicZDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryPicZDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuBatteryPicZDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuBatteryPicZDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuBatteryPicZDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].picId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"picId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuBatteryPicZDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("C4Z4")},"data-v-382f449b",null);t.default=f.exports},pRm9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("VU/8")(null,null,!1,null,null,null);t.default=i.exports},"q4f+":function(e,t){},qE4d:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"StampingInvestZDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,info:[],text:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingInvestZDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"1000px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuStampingInvestZDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingInvestZDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingInvestZDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingInvestZDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingInvestZDI/delete",method:"delete"},extraSelectData:{ordertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},inew2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new4type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new5type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},othertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]}},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete,selectOptions:function(e){"select"==e.$type&&(e.$options=[{label:"车型",value:"车型"},{label:"共通",value:"共通"}])},onDialogDefault:function(e){e.orderType="车型",e.new1Type="车型",e.inew2Type="车型",e.new3Type="车型",e.new4Type="车型",e.new5Type="车型",e.skill1Type="车型",e.skill2Type="车型",e.skill3Type="车型",e.otherType="车型"}}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuStampingInvestZDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuStampingInvestZDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingInvestZDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingInvestZDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuStampingInvestZDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingInvestZDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuStampingInvestZDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuStampingInvestZDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuStampingInvestZDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].investId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"investId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuStampingInvestZDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("eKLd")},"data-v-5cb3122a",null);t.default=f.exports},qLoF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"StampingPicZDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingPicZDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuStampingPicZDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingPicZDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingPicZDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingPicZDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingPicZDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuStampingPicZDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuStampingPicZDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingPicZDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].picId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingPicZDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuStampingPicZDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingPicZDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuStampingPicZDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuStampingPicZDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuStampingPicZDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].picId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"picId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuStampingPicZDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("cWUL")},"data-v-220e98a2",null);t.default=f.exports},qaGO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"StampingLabour",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,text:[],info:"",progress:{tableFlag:!1,UploadPercent:0},fileList:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingLabour/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){var a=e;function i(){a.$refs.reftablamain.$children[0].$el.style.display="none",a.$refs.reftablamain.$children[2].$el.style.display="none",a.$refs.reftablamain.$el.style.marginBottom="10px",delete a.$refs.reftablamain.getTableAttrs.height,a.$refs.reftablamain.$children[1].$el.style.cssText=""}e.$refs.reftablamain.data.length>1?(e.text=JSON.parse(o()(e.$refs.reftablamain.data)),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),i()):1==e.$refs.reftablamain.data.length&&i()})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.text.length>0?e.$refs.reftablamain.data=e.text:e.$refs.reftablamain.data=e.$refs.reftablamain.data,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuStampingLabour",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingLabour/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingLabour/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingLabour/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingLabour/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),i.getinfo(e.versionId),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})})},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),this.getinfo(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingLabour/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].labourId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuStampingLabour/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuStampingLabour/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getLabourInfo?versionId="+e+"&type=1"}).then(function(e){t.info=[{name:"直劳单价"},{name:"DSTR"},{name:"基点车直劳单价"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].labourId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"labourId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("WsJo")},"data-v-5e2880c4",null);t.default=f.exports},qnVm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("/4e5"),r=a("wbNz"),s=a("AUIh"),l={components:{KtTable:i.default,KtButton:r.default},data:function(){return{size:"small",filters:{name:""},columns:[{prop:"id",label:"ID",minWidth:60},{prop:"userName",label:"用户名",minWidth:100},{prop:"method",label:"方法",minWidth:180},{prop:"params",label:"参数",minWidth:220},{prop:"ip",label:"IP",minWidth:120},{prop:"time",label:"耗时",minWidth:80},{prop:"createBy",label:"创建人",minWidth:100},{prop:"createTime",label:"创建时间",minWidth:120,formatter:this.dateFormat}],pageRequest:{pageNum:1,pageSize:10},pageResult:{},showOperation:!1}},methods:{findPage:function(e){var t=this;null!==e&&(this.pageRequest=e.pageRequest),this.pageRequest.columnFilters={userName:{name:"userName",value:this.filters.name}},this.$api.log.findPage(this.pageRequest).then(function(e){t.pageResult=e.data}).then(null!=e?e.callback:"")},dateFormat:function(e,t,a,i){return Object(s.a)(e[t.property])}},mounted:function(){}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:log:view",type:"primary"},on:{click:function(t){e.findPage(null)}}})],1)],1)],1),e._v(" "),a("kt-table",{attrs:{id:"ktable",data:e.pageResult,columns:e.columns,showOperation:e.showOperation},on:{findPage:e.findPage}})],1)},staticRenderFns:[]};var o=a("VU/8")(l,n,!1,function(e){a("D/jM")},"data-v-c5f06df2",null);t.default=o.exports},qyJz:function(e,t,a){"use strict";var i=a("+ZMJ"),r=a("kM2E"),s=a("sB3e"),l=a("msXi"),n=a("Mhyx"),o=a("QRG4"),c=a("fBQ2"),d=a("3fs2");r(r.S+r.F*!a("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,r,m,u=s(e),p="function"==typeof this?this:Array,f=arguments.length,b=f>1?arguments[1]:void 0,h=void 0!==b,g=0,v=d(u);if(h&&(b=i(b,f>2?arguments[2]:void 0,2)),void 0==v||p==Array&&n(v))for(a=new p(t=o(u.length));t>g;g++)c(a,g,h?b(u[g],g):u[g]);else for(m=v.call(u),a=new p;!(r=m.next()).done;g++)c(a,g,h?l(m,b,[r.value,g],!0):r.value);return a.length=g,a}})},"r+U1":function(e,t){},r07N:function(e,t){},r56Q:function(e,t){},"rO/U":function(e,t){},"rO/h":function(e,t){},rPqH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"WeldingPicZDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingPicZDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuWeldingPicZDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingPicZDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingPicZDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingPicZDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingPicZDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuWeldingPicZDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuWeldingPicZDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingPicZDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].picId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingPicZDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuWeldingPicZDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingPicZDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuWeldingPicZDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuWeldingPicZDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuWeldingPicZDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].picId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"picId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuWeldingPicZDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("dIAm")},"data-v-c959a980",null);t.default=f.exports},rdBX:function(e,t){},rkLl:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=(a("TE7m"),{name:"Stamping",components:{},data:function(){return{tableitemKey:1,tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick},operationAttrs:{width:"200px"},formatters:{state:function(e,t,a,i){switch(a){case 0:return"编辑中";case 1:return"审批中";case 2:return"完成";default:return a}}},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfoSum",sorter:[],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStamping/getSumInfo",method:"post",notCondition:!0},InitQuery:{}},tableitem:{hasOperation:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"OfficeSum",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"carId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStamping/getSumInfoItem",method:"post",notCondition:!1}}}},methods:{findByTableName:function(){this.tableitem.editAxios={hostUrl:this.global.lyBudgetUrl,method:"get",url:"/sysTableinfo/findByTableNameAccordVersionNum?tablename=OfficeSum&carId="+this.$refs.reftablamain.selected[0].carId},this.tableitemKey++},rowclick:function(e,t,a){var i=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.carId}),this.$nextTick(function(){i.findByTableName()})},findafter:function(e,t){var a=this;e.length<=0||(this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e[0].carId}),this.$nextTick(function(){a.findByTableName()}))}}}),l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",[t("xyj-table",this._b({ref:"reftablamain",attrs:{id:"1"},on:{update:this.findafter}},"xyj-table",this.tablemain,!1))],1),this._v(" "),t("div",[t("xyj-table",this._b({key:this.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",this.tableitem,!1))],1)])},staticRenderFns:[]};var n=a("VU/8")(s,l,!1,function(e){a("fUAC")},"data-v-3eece47e",null);t.default=n.exports},rnQr:function(e,t){},rv2k:function(e,t){},sWj1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("wbNz"),l=a("BQHT"),n=a("xA5l"),o=a("uLE8"),c=a("AUIh"),d={components:{PopupTreeInput:n.a,KtButton:s.default,TableTreeColumn:l.default,FaIconTooltip:o.a},data:function(){return{size:"small",loading:!1,filters:{name:""},tableTreeDdata:[],dialogVisible:!1,dataForm:{id:0,name:"",parentId:0,parentName:"",orderNum:0},dataRule:{name:[{required:!0,message:"机构名称不能为空",trigger:"blur"}],parentName:[{required:!0,message:"上级机构不能为空",trigger:"change"}]},popupTreeData:[],popupTreeProps:{label:"name",children:"children"}}},methods:{findTreeData:function(){var e=this;this.loading=!0,this.$api.dept.findDeptTree().then(function(t){e.tableTreeDdata=t.data,e.popupTreeData=e.getParentMenuTree(t.data),e.loading=!1})},getParentMenuTree:function(e){return[{parentId:0,name:"顶级菜单",children:e}]},handleAdd:function(){var e=this;this.dialogVisible=!0,this.dataForm={id:0,name:"",parentId:0,parentName:"",orderNum:0},e.$nextTick(function(){e.$refs.dataForm.resetFields()})},handleEdit:function(e){this.dialogVisible=!0,r()(this.dataForm,e)},handleDelete:function(e){var t=this;this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){var a=t.getDeleteIds([],e);t.$api.dept.batchDelete(a).then(function(e){t.findTreeData(),t.$message({message:"删除成功",type:"success"})})})},getDeleteIds:function(e,t){if(e.push({id:t.id}),null!=t.children)for(var a=0,i=t.children.length;a<i;a++)this.getDeleteIds(e,t.children[a]);return e},handleTreeSelectChange:function(e,t){this.dataForm.parentId=e.id,this.dataForm.parentName=e.name},submitForm:function(){var e=this;this.$refs.dataForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var t=r()({},e.dataForm);e.$api.dept.save(t).then(function(t){e.editLoading=!1,200==t.code?(e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1,e.$refs.dataForm.resetFields()):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.findTreeData()})})})},dateFormat:function(e,t,a,i){return Object(c.a)(e[t.property])}},mounted:function(){this.findTreeData()}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:dept:view",type:"primary"},on:{click:function(t){e.findTreeData(null)}}})],1),e._v(" "),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:dept:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableTreeDdata,stripe:"",size:"mini","element-loading-text":"$t('action.loading')"}},[a("el-table-column",{attrs:{prop:"id","header-align":"center",align:"center",width:"80",label:"ID"}}),e._v(" "),a("table-tree-column",{attrs:{prop:"name","header-align":"center",treeKey:"id",width:"150",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parentName","header-align":"center",align:"center",width:"120",label:"上级机构"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNum","header-align":"center",align:"center",label:"排序"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createBy","header-align":"center",align:"center",label:"创建人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime","header-align":"center",align:"center",label:"创建时间",formatter:e.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"185",label:e.$t("action.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("kt-button",{attrs:{icon:"fa fa-edit",label:e.$t("action.edit"),perms:"sys:dept:edit"},on:{click:function(a){e.handleEdit(t.row)}}}),e._v(" "),a("kt-button",{attrs:{icon:"fa fa-trash",label:e.$t("action.delete"),perms:"sys:dept:delete",type:"danger"},on:{click:function(a){e.handleDelete(t.row)}}})]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dataForm.id?"修改":"新增",width:"40%",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{"text-align":"left"},attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"80px",size:e.size},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.submitForm()}}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上级机构",prop:"parentName"}},[a("popup-tree-input",{attrs:{data:e.popupTreeData,props:e.popupTreeProps,prop:null==e.dataForm.parentName?"顶级菜单":e.dataForm.parentName,nodeKey:""+e.dataForm.parentId,currentChangeHandle:e.handleTreeSelectChange}})],1),e._v(" "),2!==e.dataForm.type?a("el-form-item",{attrs:{label:"排序编号",prop:"orderNum"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,label:"排序编号"},model:{value:e.dataForm.orderNum,callback:function(t){e.$set(e.dataForm,"orderNum",t)},expression:"dataForm.orderNum"}})],1):e._e()],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.size},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{attrs:{size:e.size,type:"primary"},on:{click:function(t){e.submitForm()}}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(d,m,!1,function(e){a("C9fe")},"data-v-71e61af6",null);t.default=u.exports},sj2w:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("/4e5"),l=a("wbNz"),n=a("AUIh"),o={components:{KtTable:s.default,KtButton:l.default},data:function(){return{size:"small",filters:{label:""},columns:[{prop:"id",label:"ID",minWidth:50},{prop:"label",label:"名称",minWidth:100},{prop:"value",label:"值",minWidth:100},{prop:"type",label:"类型",minWidth:80},{prop:"sort",label:"排序",minWidth:80},{prop:"description",label:"描述",minWidth:120},{prop:"remarks",label:"备注",minWidth:120},{prop:"createBy",label:"创建人",minWidth:100},{prop:"createTime",label:"创建时间",minWidth:120,formatter:this.dateFormat}],pageRequest:{pageNum:1,pageSize:10},pageResult:{},operation:!1,editDialogVisible:!1,editLoading:!1,dataFormRules:{label:[{required:!0,message:"请输入名称",trigger:"blur"}]},dataForm:{id:0,label:"",value:"",type:"",sort:0,description:"",remarks:""}}},methods:{findPage:function(e){var t=this;null!==e&&(this.pageRequest=e.pageRequest),this.pageRequest.columnFilters={label:{name:"label",value:this.filters.label}},this.$api.dict.findPage(this.pageRequest).then(function(e){t.pageResult=e.data}).then(null!=e?e.callback:"")},handleDelete:function(e){this.$api.dict.batchDelete(e.params).then(null!=e?e.callback:"")},handleAdd:function(){this.editDialogVisible=!0,this.operation=!0,this.dataForm={id:0,label:"",value:"",type:"",sort:0,description:"",remarks:""}},handleEdit:function(e){this.editDialogVisible=!0,this.operation=!1,this.dataForm=r()({},e.row)},submitForm:function(){var e=this;this.$refs.dataForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var t=r()({},e.dataForm);e.$api.dict.save(t).then(function(t){200==t.code?e.$message({message:"操作成功",type:"success"}):e.$message({message:"操作失败, "+t.msg,type:"error"}),e.editLoading=!1,e.$refs.dataForm.resetFields(),e.editDialogVisible=!1,e.findPage(null)})})})},dateFormat:function(e,t,a,i){return Object(n.a)(e[t.property])}},mounted:function(){}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"toolbar",staticStyle:{float:"left","padding-top":"10px","padding-left":"15px"}},[a("el-form",{attrs:{inline:!0,model:e.filters,size:e.size}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.filters.label,callback:function(t){e.$set(e.filters,"label",t)},expression:"filters.label"}})],1),e._v(" "),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-search",label:e.$t("action.search"),perms:"sys:dict:view",type:"primary"},on:{click:function(t){e.findPage(null)}}})],1),e._v(" "),a("el-form-item",[a("kt-button",{attrs:{icon:"fa fa-plus",label:e.$t("action.add"),perms:"sys:dict:add",type:"primary"},on:{click:e.handleAdd}})],1)],1)],1),e._v(" "),a("kt-table",{attrs:{id:"ktable",permsEdit:"sys:dict:edit",permsDelete:"sys:dict:delete",data:e.pageResult,columns:e.columns},on:{findPage:e.findPage,handleEdit:e.handleEdit,handleDelete:e.handleDelete}}),e._v(" "),a("el-dialog",{attrs:{title:e.operation?"新增":"编辑",width:"40%",visible:e.editDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"80px",rules:e.dataFormRules,size:e.size}},[e._e(),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"label"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.label,callback:function(t){e.$set(e.dataForm,"label",t)},expression:"dataForm.label"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"值",prop:"value"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.value,callback:function(t){e.$set(e.dataForm,"value",t)},expression:"dataForm.value"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dataForm.sort,callback:function(t){e.$set(e.dataForm,"sort",t)},expression:"dataForm.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述 ",prop:"description"}},[a("el-input",{attrs:{"auto-complete":"off",type:"textarea"},model:{value:e.dataForm.description,callback:function(t){e.$set(e.dataForm,"description",t)},expression:"dataForm.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[a("el-input",{attrs:{"auto-complete":"off",type:"textarea"},model:{value:e.dataForm.remarks,callback:function(t){e.$set(e.dataForm,"remarks",t)},expression:"dataForm.remarks"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.size},nativeOn:{click:function(t){e.editDialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{attrs:{size:e.size,type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.submitForm(t)}}},[e._v(e._s(e.$t("action.submit")))])],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(o,c,!1,function(e){a("hh6j")},"data-v-7e9112af",null);t.default=d.exports},so3D:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("AUIh"),r={name:"MemberList",data:function(){return{loading:!0,tableData:{},pageRequest:{page:1,pageSize:10,showTotal:!0},form:{phone:"",nickname:"",regTime:""},rowList:[{pay:"余额"}],rowList2:{},dialogTableVisible2:!1,dialogTableVisible3:!1,query:[],columns:[{prop:"status",label:"状态",width:"100",align:"center",formatter:function(e,t,a,i){return 0==a?"冻结":1==a?"正常":void 0}},{prop:"phone",label:"手机号码",width:"140",align:"center"},{prop:"nickname",label:"昵称",width:"140",align:"center"},{prop:"sex",label:"性别",width:"100",align:"center"},{prop:"regTime",label:"注册日期",width:"180",align:"center",formatter:function(e,t,a,r){return Object(i.a)(e[t.property])}}],columns3:[{prop:"lastPayCpno",label:"最近支付车牌",width:"180",align:"center",formatter:function(e,t,a,i){return null==a?"无":a}},{prop:"lastPayGas",label:"最近支付加油站",width:"180",align:"center",formatter:function(e,t,a,i){return null==a?"无":a}},{prop:"lastPayTime",label:"最近支付日期",width:"180",align:"center",formatter:function(e,t,a,i){return null==a?"无":a}}]}},mounted:function(){this.findPage()},methods:{formatter:function(e,t,a,r){return Object(i.a)(e[t.property])},refreshPageRequest:function(e){this.pageRequest.page=e,this.findPage()},refreshPageSizeRequest:function(e){this.pageRequest.pageSize=e,this.findPage()},searchquery:function(){var e=[];this.form.phone&&e.push({hasInitValue:!1,operation:"EQUAL",property:"phone",relation:"AND",value:this.form.phone}),this.form.nickname&&e.push({hasInitValue:!1,operation:"EQUAL",property:"nickname",relation:"AND",value:this.form.nickname}),this.form.regTime&&e.push({hasInitValue:!1,operation:"BETWEEN",property:"regTime",relation:"AND",value:this.form.regTime}),this.query=e,this.findPage()},changeRowList:function(e){this.rowList[0].date=e.regTime},changeRowList2:function(e){var t=this;this.$api.common.xyjPost({url:"/appUserCp/query",data:{pageBean:{page:1,pageSize:10,showTotal:!0},querys:[{hasInitValue:!1,operation:"EQUAL",property:"user_id",relation:"AND",value:e.id}]}}).then(function(e){t.rowList2=e.data})},findPage:function(){var e=this;e.$api.common.xyjPost({url:"/appUser/query",data:{pageBean:e.pageRequest,params:{},querys:e.query,sorter:[]}}).then(function(t){e.loading=!1,e.tableData=t.data})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",[a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-search"}),e._v(" "),a("span",{staticClass:"sx"},[e._v("筛选查询")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-row",[a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"mini"},on:{click:e.searchquery}},[e._v("\n              查询\n            ")])],1)],1)])]),e._v(" "),a("el-main",[a("el-form",{staticClass:"demo-ruleForm",attrs:{size:"small","label-width":"120px"}},[a("el-form-item",{attrs:{label:"手机账号"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入手机账号"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"会员昵称"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入会员姓名"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"购买日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.regTime,callback:function(t){e.$set(e.form,"regTime",t)},expression:"form.regTime"}})],1)],1),e._v(" "),a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-tickets"}),a("span",{staticClass:"sx"},[e._v("会员列表")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-button",{staticClass:"fa fa-refresh",attrs:{size:"mini",type:"primary"},on:{click:e.findPage}},[e._v("\n            刷新\n          ")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.tableData.rows,size:"mini","show-overflow-tooltip":"false",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"100",align:"center"}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{sortable:"",prop:e.prop,label:e.label,formatter:e.formatter,"min-width":e.width,align:e.align}})}),e._v(" "),a("el-table-column",{attrs:{label:"支付顺序",align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.dialogTableVisible2=!0,e.changeRowList(t.row)}}},[e._v("查看")]),e._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"支付顺序",visible:e.dialogTableVisible2},on:{"update:visible":function(t){e.dialogTableVisible2=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.rowList,size:"mini","show-overflow-tooltip":"false",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pay",label:"支付方式","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",formatter:e.formatter,label:"修改日期","min-width":"100",align:"center"}})],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"绑定车辆",align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.dialogTableVisible3=!0,e.changeRowList2(t.row)}}},[e._v("查看")]),e._v(" "),a("el-dialog",{attrs:{title:"绑定车辆",visible:e.dialogTableVisible3},on:{"update:visible":function(t){e.dialogTableVisible3=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.rowList2.rows,size:"mini","show-overflow-tooltip":"false",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cpno",label:"绑定辆","min-width":"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"绑定日期","min-width":"100",align:"center"}})],1)],1)]}}])}),e._v(" "),e._l(e.columns3,function(e){return a("el-table-column",{key:e.prop,attrs:{sortable:"",prop:e.prop,label:e.label,formatter:e.formatter,"min-width":e.width,align:e.align}})})],2),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageRequest.page,"page-sizes":[10,20,30,40,50],"page-size":e.pageRequest.pageSize,layout:"sizes, total, prev, pager, next",total:e.tableData.total},on:{"current-change":e.refreshPageRequest,"size-change":e.refreshPageSizeRequest}})],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(r,s,!1,function(e){a("asYw")},"data-v-87240908",null);t.default=l.exports},"t/Kj":function(e,t){},t8yQ:function(e,t){},tFUA:function(e,t){},teXH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"TIcBuBatteryInvest",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:[],text:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryInvest/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"EQUAL",value0:0,andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuBatteryInvest",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryInvest/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryInvest/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryInvest/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryInvest/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})}),this.getinfo(e.versionId)},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),this.getinfo(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryInvest/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryInvest/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryInvest/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getMaterialsInfo?versionId="+e}).then(function(e){t.info=[{name:"新车汇率"},{name:"基点车汇率"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].investId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"investId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("O7Sy")},"data-v-4f6fba89",null);t.default=f.exports},tpaw:function(e,t){},uHH6:function(e,t){},uHIP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuResinPicDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinPicDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,isExpand:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{"expand-change":function(t,a){a.length?(e.$refs.reftableitem.expands=[],t&&e.$refs.reftableitem.expands.push(t.id)):e.$refs.reftableitem.expands=[]},"cell-click":function(t,a,i,r){e.$refs.reftableitem.$refs.table.toggleRowExpansion(t)}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuResinPicDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinPicDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinPicDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinPicDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinPicDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuResinPicDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuResinPicDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinPicDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].picId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinPicDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuResinPicDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinPicDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuResinPicDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuResinPicDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuResinPicDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuResinPicDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("DHxA")},"data-v-0b58ba18",null);t.default=f.exports},uLE8:function(e,t,a){"use strict";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tooltip",{staticClass:"tooltip",attrs:{placement:"top",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[e._v("推荐使用 Font Aweson 图标")]),e._v(" "),a("p",[e._v("使用步骤：")]),e._v(" "),a("p",[e._v("1.进入 "),a("a",{attrs:{href:"http://www.fontawesome.com.cn/faicons/",target:"_blank"}},[e._v("Font Aweson")]),e._v(" 页面")]),e._v(" "),a("p",[e._v("2.查找到需要的图标,点击查看。")]),e._v(" "),a("p",[e._v("3.复制图片样式到此处。")]),e._v(" "),a("p",[e._v("示例：fa fa-home fa-lg")])]),e._v(" "),a("i",{staticClass:"el-icon-warning"})])},staticRenderFns:[]};var r=a("VU/8")({data:function(){return{}},methods:{},mounted:function(){}},i,!1,function(e){a("o0/S")},"data-v-2008c790",null);t.a=r.exports},uoGy:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuBatteryMaterialDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryMaterialDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuBatteryMaterialDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryMaterialDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryMaterialDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuBatteryMaterialDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryMaterialDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuBatteryMaterialDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuBatteryMaterialDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryMaterialDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].materiaId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuBatteryMaterialDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuBatteryMaterialDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuBatteryMaterialDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuBatteryMaterialDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuBatteryMaterialDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuBatteryMaterialDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materiaId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materiaId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuBatteryMaterialDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("1Qib")},"data-v-6cf6b7d5",null);t.default=f.exports},uqws:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"TIcBuResinPicZDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinPicZDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,isExpand:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{"expand-change":function(t,a){a.length?(e.$refs.reftableitem.expands=[],t&&e.$refs.reftableitem.expands.push(t.id)):e.$refs.reftableitem.expands=[]},"cell-click":function(t,a,i,r){e.$refs.reftableitem.$refs.table.toggleRowExpansion(t)}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuResinPicZDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinPicZDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinPicZDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinPicZDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinPicZDI/delete",method:"delete"},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuResinPicZDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuResinPicZDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinPicZDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].picId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinPicZDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuResinPicZDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinPicZDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuResinPicZDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuResinPicZDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuResinPicZDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuResinPicZDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{disabled:e.isDisabled,type:"primary",label:e.$t("action.chooseVehicleType")},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("xt6R")},"data-v-71e30702",null);t.default=f.exports},uy2x:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"TIcBuResinMaterial",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:[],text:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinMaterial/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,isExpand:!1,tableAttrs:{width:"800px"},tableOns:{"expand-change":function(t,a){a.length?(e.$refs.reftableitem.expands=[],t&&e.$refs.reftableitem.expands.push(t.id)):e.$refs.reftableitem.expands=[]},"cell-click":function(t,a,i,r){e.$refs.reftableitem.$refs.table.toggleRowExpansion(t)}},extraAttribute:{marketDate:{type:"month",valueFormat:"yyyy年MM月",format:"yyyy年MM月"}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuResinMaterial",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinMaterial/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinMaterial/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuResinMaterial/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinMaterial/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})}),this.getinfo(e.versionId)},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),this.getinfo(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinMaterial/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].materialId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuResinMaterial/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuResinMaterial/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getMaterialsInfo?versionId="+e}).then(function(e){t.info=[{name:"材料市况"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("ekj0")},"data-v-646f040e",null);t.default=f.exports},uywC:function(e,t){},uzVr:function(e,t){},vALX:function(e,t,a){"use strict";var i=a("woOf"),r=a.n(i),s=a("55CV"),l=a("TE7m"),n={name:"editTable",components:{ElFormRenderer:s.a},data:function(){return{dialogVisible:!1,formAttrs:{labelPosition:"right",labelWidth:"7em"},confirmLoading:!1,dialogFroms:[],param:{versionId:"",tablename:""}}},methods:{confirm:function(){var e=this;this.dialogVisible=!1;var t=r()({},this.$refs.dialogForm.getFormValue()),a=[];for(var i in t){var s={prop:i,label:t[i],versionid:this.param.versionId,tablename:this.param.tablename};a.push(s)}Object(l.a)({hostUrl:this.global.lyBaseUrl,method:"post",url:"/sysTableinfo/saveHeaderModify",data:a}).then(function(t){200==t.code&&0!=t.data&&e.$emit("update")}).catch(function(t){e.$message.error(t.message)})},show:function(e,t,a){var i=this;this.param.versionId=t,this.param.tablename=a,this.dialogVisible=!0;var r={};e.filter(function(e){return 1==e.headermodify}).forEach(function(e){r[e.prop]=e.label}),this.$nextTick(function(){i.$refs.dialogForm.updateForm(r)})},convertInput:function(e){return{$id:e.prop,$type:"input",label:e.label,$el:{placeholder:"请输入"+e.label,style:"width: 150px",disabled:!1,"show-word-limit":!0,clearable:!0},$options:[],$default:"",rules:{}}},getdialogFrom:function(e){var t=this;this.dialogFroms=[];e.filter(function(e){return 1==e.headermodify}).forEach(function(e,a){if(1,"selection"!==e.fieldtype){var i=t.convertInput(e);i.$el.disabled=1!=e.edit,i.$el.disabled&&(i.$el.placeholder="系统自动生成"),i.$el.style="width: 100%",i.$editshow=e.editshow;t.dialogFroms.push(i)}})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"dialog"}},[a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"newDialog",attrs:{title:"编辑表头",visible:e.dialogVisible,"close-on-click-modal":!1,width:"700px"},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.$refs.dialogForm.resetFields()}}},[a("el-form-renderer",e._b({ref:"dialogForm",staticClass:"senior-serach-style",attrs:{content:e.dialogFroms}},"el-form-renderer",e.formAttrs,!1),[e._t("form")],2),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.confirmLoading,size:"small"},on:{click:e.confirm}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(n,o,!1,function(e){a("yGS/")},"data-v-cb0219dc",null);t.a=c.exports},vfVL:function(e,t){},vmr0:function(e,t,a){"use strict";var i=a("55CV"),r=a("TE7m"),s={name:"editTable",components:{ElFormRenderer:i.a},data:function(){return{title:"",dialogVisible:!1,activeName:"",taps:[],options:[{value:"劳务费",label:"劳务费"},{value:"JLAT",label:"JLAT"},{value:"海外出差",label:"海外出差"},{value:"国内出差",label:"国内出差"}],yearForm:{class1:"劳务费",class2:"直劳"},select2:[],formAttrs:{labelPosition:"right",labelWidth:"7em"},confirmLoading:!1,dialogFroms:[],param:{versionId:"",row:"",url:""},yearFormRules:{class1:[{required:!0,message:"请选择一级",trigger:"blur"}],class2:[{required:!0,message:"请选择二级",trigger:"blur"}],class3:[{required:!0,message:"请输入三级",trigger:"blur"}]}}},methods:{confirm:function(){var e=this;this.$refs.yearForm1.validate(function(t){if(t){e.loading=!0;var a=e.param.url,i=e.yearForm;i.versionId=e.param.versionId,Object(r.a)({hostUrl:e.global.lyBudgetUrl,method:"post",url:a,data:i}).then(function(t){e.$message({type:"success",message:"保存成功！"}),e.loading=!1,e.dialogVisible=!1,e.$emit("update"),e.$refs.yearForm1.resetFields()}).catch(function(t){e.$message.error(t.message)})}})},handleClick:function(){},show:function(e,t,a,i,r){this.param.versionId=a,this.param.url=r,this.dialogVisible=!0,console.log(t),this.taps=t;for(var s=[],l=0;l<t.length;l++)null!=t[l].children&&"类别"!=t[l].label&&s.push(t[l].label);if(this.activeName=s[0],"add"==e){this.title="新增",this.yearForm={};for(var n=0;n<t.length;n++)if(null!=t[n].children)for(var o=0;o<t[n].children.length;o++){var c=t[n].children[o].prop;this.$set(this.yearForm,c,"")}}else"edit"==e&&(this.title="编辑",this.yearForm=i)},getClass2:function(e){this.yearForm.class2="劳务费"==e?"直劳":"人月";var t=[{label:"直劳",value:"直劳"},{label:"准直",value:"准直"},{label:"间接",value:"间接"}],a=[{label:"人月",value:"人月"},{label:"渡航回数",value:"渡航回数"}];"/tIcBuStampingPic/save"==this.param.url?"劳务费"==e?this.select2=t:"JLAT"==e?this.select2=[{label:"人月",value:"人月"},{label:"渡航回数",value:"渡航回数"},{label:"s/v",value:"s/v"}]:"海外出差"!=e&&"国内出差"!=e||(this.select2=a):"劳务费"==e?this.select2=t:"JLAT"!=e&&"海外出差"!=e&&"国内出差"!=e||(this.select2=a)},getValue:function(e){var t=[{label:"直劳",value:"直劳"},{label:"准直",value:"准直"},{label:"间接",value:"间接"}],a=[{label:"人月",value:"人月"},{label:"渡航回数",value:"渡航回数"}],i=this.yearForm.class1;e&&("/tIcBuStampingPic/save"==this.param.url?"劳务费"==i?this.select2=t:"JLAT"==i?this.select2=[{label:"人月",value:"人月"},{label:"渡航回数",value:"渡航回数"},{label:"s/v",value:"s/v"}]:"海外出差"!=i&&"国内出差"!=i||(this.select2=a):"劳务费"==i?this.select2=t:"JLAT"!=i&&"海外出差"!=i&&"国内出差"!=i||(this.select2=a))}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"dialog"}},[a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"newDialog",attrs:{title:e.title,visible:e.dialogVisible,"close-on-click-modal":!1,width:"1000px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[[a("el-form",{ref:"yearForm1",attrs:{rules:e.yearFormRules,model:e.yearForm}},[a("el-form-item",{attrs:{label:"一级",prop:"class1"}},[a("el-select",{attrs:{clearable:""},on:{change:e.getClass2},model:{value:e.yearForm.class1,callback:function(t){e.$set(e.yearForm,"class1",t)},expression:"yearForm.class1"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"二级",prop:"class2"}},[a("el-select",{attrs:{clearable:""},on:{"visible-change":e.getValue},model:{value:e.yearForm.class2,callback:function(t){e.$set(e.yearForm,"class2",t)},expression:"yearForm.class2"}},e._l(e.select2,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"三级",prop:"class3"}},[a("el-input",{attrs:{clearable:""},model:{value:e.yearForm.class3,callback:function(t){e.$set(e.yearForm,"class3",t)},expression:"yearForm.class3"}})],1)],1),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.taps,function(t){return"类别"!=t.label&&"Total[KCNY]"!=t.label&&"Total(KCNY)"!=t.label&&"Total(Man-month)"!=t.label&&"选择"!=t.label?a("el-tab-pane",{key:t.id,attrs:{label:t.label,name:t.label}},[a("el-form",{ref:"yearForm2",refInFor:!0,attrs:{model:e.yearForm}},e._l(t.children,function(t){return"小计"!=t.label?a("el-form-item",{key:t.id,attrs:{label:t.label,prop:t.prop}},[a("el-input",{attrs:{clearable:"",oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.yearForm[t.prop],callback:function(a){e.$set(e.yearForm,t.prop,a)},expression:"yearForm[items.prop]"}})],1):e._e()}))],1):e._e()}))],e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.confirmLoading,size:"small"},on:{click:e.confirm}},[e._v("确 定")])],1)],2)],1)},staticRenderFns:[]};var n=a("VU/8")(s,l,!1,function(e){a("UnAt")},"data-v-1705b45a",null);t.a=n.exports},vt9m:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vmr0"),c=a("TE7m"),d=a("ZqJ4"),m={name:"WeldingPic",components:{ChooseCarType:n.a,EditPicTable:o.a},data:function(){var e=this;return{qmodify:d.a.QMODIFY,approvaling:d.a.APPROVALING,reject:d.a.REJECT,complete:d.a.COMPLETE,ticketcancel:d.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,editdisabled:!1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingPic/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:d.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingPic/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!1,hasView:!1,hasEdit:!1,disabledNew:!1,tableAttrs:{width:"800px"},tableOns:{select:function(t,a){e.editdisabled=!1,t.length>1&&(e.editdisabled=!0)},"select-all":function(t){e.editdisabled=!1,e.editdisabled=0!=t}},extraSelectData:{class1:function(){return[{label:"劳务费",value:"劳务费"},{label:"JLAT",value:"JLAT"},{label:"海外出差",value:"海外出差"},{label:"国内出差",value:"国内出差"}]}},operationAttrs:{width:"100px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuWeldingPic",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingPic/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingPic/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingPic/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingPic/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,extraCheng:{class1:this.showClass2}}}},methods:{showClass2:function(e,t){this.$refs.reftableitem.$refs.dialogForm.value.class2="";"劳务费"==t?this.$refs.reftableitem.$refs.dialogForm.setOptions("class2",[{label:"直劳",value:"直劳"},{label:"准直",value:"准直"},{label:"间接",value:"间接"}]):"JLAT"!=t&&"海外出差"!=t&&"国内出差"!=t||this.$refs.reftableitem.$refs.dialogForm.setOptions("class2",[{label:"人月",value:"人月"},{label:"渡航回数",value:"渡航回数"}])},reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId,e.picId=t.picId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId,e.picId=this.$refs.reftableitem.data[0].picId},findByTableName:function(){this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,method:"get",url:"/sysTableinfo/findByTableNameByCarYears?tablename=tIcBuWeldingPic&versionId="+this.$refs.reftablamain.selected[0].versionId},this.tableitemKey++},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.findByTableName(),d.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.findByTableName()})}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),d.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},findafter2:function(e,t){e.length<=0||this.$refs.reftableitem.$refs.table.setCurrentRow(e[0])},add:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.getTableColumns;this.$refs.editpicshow.show("add",t,e,{},"/tIcBuWeldingPic/save")},edit:function(){var e=this.$refs.reftableitem.selected[0];if(""!=e&&void 0!=e){var t=e,a=this.$refs.reftablamain.selected[0].versionId,i=this.$refs.reftableitem.getTableColumns;this.$refs.editpicshow.show("edit",i,a,t,"/tIcBuWeldingPic/save")}else this.$message({type:"info",message:"请选择要编辑的数据！"})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingPic/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].picId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingPic/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingPic/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},submission:function(){var e=this;d.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].picId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"picId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"},on:{update:e.findafter2}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.add"),disabled:e.isDisabled},on:{click:e.add}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.editdisabled},on:{click:e.edit}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("edit-pic-table",{ref:"editpicshow",on:{update:e.findByTableName}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var p=a("VU/8")(m,u,!1,function(e){a("hrdT")},"data-v-7b6183f4",null);t.default=p.exports},vuze:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("AUIh");var i={name:"YlkPage",data:function(){return{loading:!1,pageRequest:{page:1,pageSize:10,showTotal:!0},options:"",form:{gas_id:"",date:"",date1:"",gasName:""},form2:{gas_id:"",date:"",date2:"",gasName:"",isHistory:""},rules:{date:[{required:!0,message:"请选择开始日期",trigger:"change"}],date2:[{required:!0,message:"请选择结束日期",trigger:"change"}],gas_id:[{required:!0,message:"请选择油站",trigger:"change"}]},jsEndDate:"",pickerOptions2:this.beginDate(),query:[],tableData:{rows:[]},columns:[{prop:"gasName",label:"油站名称",width:"170",align:"center"},{prop:"allSalemoney",label:"销售总金额",width:"140",align:"center"},{prop:"allProfitmoney",label:"油站当日收益（元）",width:"190",align:"center"},{prop:"allYemoney",label:"余额（总额）",width:"160",align:"center"},{prop:"allWxmoery",label:"微信（总额）",width:"160",align:"center"},{prop:"allAlimoery",label:"支付宝（总额）",width:"160",align:"center"},{prop:"allCashmoney",label:"现金（总额）",width:"160",align:"center"},{prop:"allScmoney",label:"刷卡（总额）",width:"160",align:"center"},{prop:"_92ilnum",label:"汽油92（总升）",width:"160",align:"center"},{prop:"_95ilnum",label:"汽油95（总升）",width:"160",align:"center"},{prop:"_00ilnum",label:"柴油0（总升）",width:"160",align:"center"},{prop:"_98ilnum",label:"柴油-10#（总升）",width:"180",align:"center"}]}},computed:{gasId:function(){return this.form.gas_id}},watch:{gasId:function(e){var t=this;t.options.map(function(a,i){a.id==e&&(t.form.gasName=a.name)}),e&&(t.getDisabled(),t.getSum()),t.searchquery()}},created:function(){this.getSelect()},mounted:function(){this.findPage()},methods:{getSummaries:function(e){var t=e.columns,a=e.data,i=[];return t.forEach(function(e,t){if(0!==t){var r=a.map(function(t){return Number(t[e.property])});t>2&&t<10?(i[t]=r.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),i[t]=i[t].toFixed(2)+" 元"):i[t]=""}else i[t]="结算"}),i},beginDate:function(){var e=this;return{disabledDate:function(t){return t.getTime()<new Date(e.jsEndDate)||t.getTime()>=Date.now()-864e5}}},open2:function(e){var t=this.$createElement;this.$notify({title:"结算提醒",message:t("span",{style:"color: teal"},e)})},getDisabled:function(){var e=this;this.$api.common.xyjQueryGet({url:"/appOrderJs/getLastJsTime?gasId="+this.form.gas_id}).then(function(t){if(200==t.code)if(t.data){var a=t.data.jsStartDate;e.jsEndDate=t.data.jsEndDate,e.form2.isHistory=!0,a="上次结算日期："+a.slice(0,10),e.open2(a)}else e.form2.isHistory=!1,e.open2("该油站没有结算信息！")})},getSum:function(){this.$api.common.xyjQueryPost({url:"/appOrderJsDays/getPartsum/"+this.form.gas_id,data:{}}).then(function(e){console.log(e)})},queRen:function(){var e=this;if(!this.tableData.rows.length)return this.$message({type:"warning",message:"请选择订单！"});this.$confirm("确认要结算本页所有订单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.jieSuan()}).catch(function(){e.$message({type:"info",message:"已取消结算"})})},jieSuan:function(){var e=this;return e.form2.gas_id?e.form2.date?(e.tableData.rows.map(function(t,a){if(console.log("_this.form2.isHistory",e.form2.isHistory),0==e.form2.isHistory){var i=new Date;i=i.getFullYear(),t.jsStartDate=i+"-01-01T16:00:00.000Z"}t.jsStartDate=e.form2.date[0],t.jsEndDate=e.form2.date[1],t.gasId=e.form2.gas_id,t.gasName=e.form2.gasName}),void e.$api.common.xyjPostyw({url:"/appOrderJsDays/save",data:e.tableData.rows}).then(function(t){200==t.code?(e.$message({type:"success",message:"结算成功！"}),e.findPage()):e.$message({type:"error",message:"结算失败！"})})):e.$message({message:"请选择结算日期",type:"warning"}):e.$message({message:"请选择要结算的油站",type:"warning"})},getSelect:function(){var e=this;e.$api.common.xyjPost({url:"/partGasinfo/query",data:{}}).then(function(t){console.log(t.data),e.options=t.data.rows})},handleSelectionChange:function(e){this.multipleSelection=e,this.$message({type:"warning",message:this.multipleSelection})},refreshPageRequest:function(e){this.pageRequest.page=e,this.findPage()},refreshPageSizeRequest:function(e){this.pageRequest.pageSize=e,this.findPage()},formPass:function(){var e=this;this.$refs.searchForm.validate(function(t){if(!t)return!1;e.searchquery()})},searchquery:function(){var e=[];this.form.gas_id&&e.push({hasInitValue:!1,operation:"EQUAL",property:"gas_id",relation:"AND",value:this.form.gas_id}),this.form.date&&e.push({hasInitValue:!1,operation:"BETWEEN",property:"thedays",relation:"AND",value:this.form.date}),this.query=e,this.findPage()},findPage:function(){var e=this;e.loading=!0,e.form2.date=e.form.date,e.form2.gas_id=e.form.gas_id,e.form2.gasName=e.form.gasName,console.log(e.form2),e.$api.common.xyjQueryPost({url:"/appOrderJsDays/getPartJsOrder",data:{pageBean:{},params:{},querys:e.query,selfDate:{},sorter:[]}}).then(function(t){e.loading=!1,console.log("res",t),e.tableData=t})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"sys-coupon-bag"},[a("el-container",[a("el-header",[a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-search"}),a("span",{staticClass:"sx"},[e._v("筛选查询")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-row"),e._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"mini"},on:{click:e.formPass}},[e._v("查询")])],1)])]),e._v(" "),a("el-main",[a("el-row",{staticClass:"searchForm"},[a("el-form",{ref:"searchForm",attrs:{size:"small",model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"油站",prop:"gas_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.gas_id,callback:function(t){e.$set(e.form,"gas_id",t)},expression:"form.gas_id"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"开始日期",prop:"date"}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)])],1)],1),e._v(" "),a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"el-icon-tickets"}),a("span",{staticClass:"sx"},[e._v("会员列表")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-button",{staticClass:"fa fa-refresh",attrs:{size:"mini",type:"primary"},on:{click:e.findPage}},[e._v("\n              刷新\n            ")]),e._v(" "),a("el-button",{staticClass:"fa fa-calculator",attrs:{type:"primary",size:"mini"},on:{click:e.queRen}},[e._v("\n              结算\n            ")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.tableData.rows,size:"mini","show-summary":!0,"summary-method":e.getSummaries,"show-overflow-tooltip":"true",border:""}},[a("el-table-column",{attrs:{fixed:"left",type:"index",label:"序号","min-width":"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"left",prop:"thedays",label:"日期","min-width":"110",align:"center"}}),e._v(" "),e._l(e.columns,function(e){return a("el-table-column",{key:e.prop,attrs:{sortable:"",prop:e.prop,label:e.label,formatter:e.formatter,"min-width":e.width,align:e.align}})})],2)],1)],1)],1)])},staticRenderFns:[]};var s=a("VU/8")(i,r,!1,function(e){a("Y9ZQ")},null,null);t.default=s.exports},"w3l/":function(e,t){},wNfd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("AUIh"),r={name:"StandardDictionary",data:function(){return{dialogDelete:{show:!1,deleteId:""},userInfo:"",loading:!1,dialogInfo:{title:""},editForm:{flag:"",id:""},editFormRules:{flag:[{required:!0,message:"请输入油站标签",trigger:"blur"}]},dialogEdit:!1,pageResult:{rows:[]},pageRequest:{page:1,pageSize:10,showTotal:!0}}},methods:{resetForm:function(e){this.dialogEdit=!1,this.$refs.editForm.resetFields(),this.editForm.id&&(this.editForm.id="")},addnewHandler:function(){var e=this;e.dialogEdit=!0,e.dialogInfo.title="新增油站标签",e.editForm.id&&(e.editForm.id=""),e.$nextTick(function(){e.$refs.editForm.resetFields()})},submitForm:function(e){var t=this,a={lastUpdateBy:t.userInfo};t.$refs[e].validate(function(e){console.log(e),e&&(t.editForm.id&&(a.id=t.editForm.id),a.flag=t.editForm.flag,t.$api.common.xyjPostyw({url:"/sysGasFlag/save",data:a}).then(function(e){console.log(e),t.dialogEdit=!1,t.editForm.flag="",t.editForm.id="",t.getMainList(),t.$message({message:"成功！",type:"success",duration:2e3})}))})},editHandler:function(e){var t=this;t.dialogInfo.title="编辑油站标签",t.dialogEdit=!0,void 0!=t.$refs.editForm&&t.$nextTick(function(){t.$refs.editForm.resetFields()}),setTimeout(function(){t.editForm.id=e.id,t.editForm.flag=e.flag},100)},deleteHandler:function(e){this.dialogDelete.show=!0,this.dialogDelete.deleteId&&(this.dialogDelete.deleteId=""),this.dialogDelete.deleteId=e.id,console.log(this.dialogDelete)},confirmDelete:function(){var e=this;console.log(e.dialogDelete),e.$api.common.xyjPostyw({url:"/sysGasFlag/delete",data:[{id:e.dialogDelete.deleteId}]}).then(function(t){e.dialogDelete.show=!1,e.getMainList(),e.$message({message:"删除成功！",type:"success",duration:2e3})})},getMainList:function(){var e=this;e.loading=!0,e.$api.common.xyjQueryPost({url:"/sysGasFlag/query",data:{pageBean:e.pageRequest,params:{},querys:[],sorter:[]}}).then(function(t){if(e.loading=!1,t.data.rows.length>0){t.data.rows.forEach(function(e,t){e.changeTime=Object(i.b)(e.lastUpdateTime,"-",":")})}e.pageResult=t.data})}},mounted:function(){this.userInfo=sessionStorage.getItem("user"),this.getMainList()}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"sx"},[e._v("油站标签")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-row",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"fa fa-refresh"},on:{click:e.getMainList}},[e._v("\n                          刷新\n                        ")])],1)],1)])]),e._v(" "),a("el-row",{staticStyle:{"text-align":"left",margin:"10px 0"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addnewHandler}},[e._v("新增")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.pageResult.rows,border:""}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.editHandler(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.deleteHandler(t.row)}}},[e._v("删除")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"flag",label:"标签名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"id",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"lastUpdateBy",label:"操作员"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"changeTime",label:"操作时间"}})],1),e._v(" "),a("transition",{attrs:{name:"el-fade-in"}},[a("el-dialog",{staticClass:"dialog-oil-price-edit",staticStyle:{width:"50%",margin:"auto"},attrs:{title:e.dialogInfo.title,visible:e.dialogEdit},on:{"update:visible":function(t){e.dialogEdit=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"油站标签:",prop:"flag"}},[a("el-input",{model:{value:e.editForm.flag,callback:function(t){e.$set(e.editForm,"flag",t)},expression:"editForm.flag"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetForm("editForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("editForm")}}},[e._v("确 定")])],1)],1)],1),e._v(" "),a("transition",{attrs:{name:"el-fade-in"}},[a("el-dialog",{staticClass:"dialog-oil-price-edit",staticStyle:{width:"50%",margin:"auto","text-align":"left"},attrs:{title:"删除提示",visible:e.dialogDelete.show},on:{"update:visible":function(t){e.$set(e.dialogDelete,"show",t)}}},[a("span",[e._v("你要删除这条标签吗？")]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogDelete.show=!1,e.dialogDelete.deleteId=""}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmDelete}},[e._v("确 定")])],1)])],1)],1)},staticRenderFns:[]};var l=a("VU/8")(r,s,!1,function(e){a("eHXK")},"data-v-11979cfe",null);t.default=l.exports},wbNz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("dPY1"),r={name:"KtButton",props:{label:{type:String,default:"Button"},icon:{type:String,default:""},size:{type:String,default:"mini"},type:{type:String,default:null},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},perms:{type:String,default:null}},data:function(){return{}},methods:{handleClick:function(){this.$emit("click",{})},hasPerms:function(e){return Object(i.a)(e)&!this.disabled}},mounted:function(){}},s={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-button",{attrs:{size:e.size,type:e.type,icon:e.icon,loading:e.loading,disabled:!e.hasPerms(e.perms)},on:{click:e.handleClick}},[e._v("\n  "+e._s(e.label)+"\n")])},staticRenderFns:[]};var l=a("VU/8")(r,s,!1,function(e){a("ctV7")},"data-v-dc2d8922",null);t.default=l.exports},wiSV:function(e,t){},wuuA:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("h2",{staticClass:"header"},[e._v("XYJ Generator")]),e._v(" "),a("div",{staticClass:"intro"},[a("p",[e._v("Xyj代码生成器，可以通过界面配置快速生成包括 model，dao，service，controller 以及页面的相关代码。")]),e._v(" "),a("p",[e._v("项目地址："),a("a",{attrs:{href:"https://gitee.com/liuge1988/xyj-generator"}},[e._v("https://gitee.com/liuge1988/xyj-generator")]),e._v("\n      , 项目使用指南如下图，具体环境搭建参考安装教程。\n    ")])]),e._v(" "),a("div",[a("div",{staticClass:"title"},[e._v("使用指南")]),e._v(" "),a("div",{staticClass:"step"},[a("span",[e._v("1.配置数据源")])]),e._v(" "),a("div",{staticClass:"image"},[a("img",{staticClass:"usageImage",attrs:{src:"https://images.gitee.com/uploads/images/2018/1114/180145_1b395632_645970.png"}})])]),e._v(" "),a("div",[a("div",{staticClass:"step"},[a("span",[e._v("2.选择数据库表")])]),e._v(" "),a("div",{staticClass:"image"},[a("img",{staticClass:"usageImage",attrs:{src:"https://images.gitee.com/uploads/images/2018/1114/180317_ca91ceb2_645970.png"}})])]),e._v(" "),a("div",[a("div",{staticClass:"step"},[a("span",[e._v("3.编辑信息，生成代码")])]),e._v(" "),a("div",{staticClass:"image"},[a("img",{staticClass:"usageImage",attrs:{src:"https://images.gitee.com/uploads/images/2018/1114/180642_2c4f986d_645970.png"}})])])])}]};var r=a("VU/8")({name:"Intro"},i,!1,function(e){a("tpaw")},null,null);t.default=r.exports},xA5l:function(e,t,a){"use strict";var i={name:"PopupTreeInput",props:{data:{type:Array,default:[]},props:{type:Object,default:{}},prop:{type:String,default:""},nodeKey:{type:String,default:""},placeholder:{type:String,default:"点击选择内容"},placement:{type:String,default:"right-start"},defaultExpandAll:{type:Boolean,default:!1},currentChangeHandle:{type:Function,default:null}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-popover",{ref:"popover",attrs:{placement:e.placement,trigger:"click"}},[a("el-tree",{ref:"popupTree",attrs:{data:e.data,props:e.props,"node-key":"nodeKey","default-expand-all":e.defaultExpandAll,"highlight-current":!0,"expand-on-click-node":!0},on:{"current-change":e.currentChangeHandle}})],1),e._v(" "),a("el-input",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticStyle:{cursor:"pointer"},attrs:{readonly:!0,placeholder:e.placeholder},model:{value:e.prop,callback:function(t){e.prop=t},expression:"prop"}})],1)},staticRenderFns:[]};var s=a("VU/8")(i,r,!1,function(e){a("ofO4")},"data-v-7ed694fb",null);t.a=s.exports},xbgB:function(e,t){},xpQ4:function(e,t){},xt6R:function(e,t){},yBve:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("AUIh"),r={name:"StandardDictionary",data:function(){return{loading:!1,userInfo:null,dialogInfo:{id:"",mark:"",lowfee:"",salefee:""},editForm:{salefee:""},editFormRules:{salefee:[{required:!0,message:"请输入售价",trigger:"blur"}]},dialogEdit:!1,pageResult:{rows:[]},pageRequest:{page:1,pageSize:10,showTotal:!0}}},methods:{resetMoney:function(e){console.log(e);var t=e.target.value;e.target.value=t.match(/^\d*(\.?\d{0,2})/g)[0]||null,this.editForm[e.target.getAttribute("data-flag")]=e.target.value,console.log(this.editForm[e.target.getAttribute("data-flag")])},resetForm:function(e){var t=this;t.dialogEdit=!1,t.dialogInfo.lowfee="",t.dialogInfo.highfee="",t.dialogInfo.id="",t.dialogInfo.mark="",t.$nextTick(function(){t.$refs.editForm.resetFields()})},submitForm:function(e){var t=this;t.$refs[e].validate(function(e){console.log(e),e&&t.$api.LM.post({port:":6003",url:"/sysOil/save",data:{guidefee:t.editPriceForm.guidefee,highfee:t.editPriceForm.highfee,id:t.editPriceForm.id,lastUpdateBy:t.userInfo,lowfee:t.editPriceForm.lowfee,memo:t.editPriceForm.memo}}).then(function(e){console.log(e),t.dialogEdit=!1,t.getMainList()})})},editHandler:function(e){var t=this;t.dialogInfo.lowfee=e.lowfee,t.dialogInfo.highfee=e.highfee,t.dialogInfo.id=e.id,t.dialogInfo.mark=e.mark,t.dialogEdit=!0,void 0!=t.$refs.editForm&&t.$nextTick(function(){t.$refs.editForm.resetFields()}),setTimeout(function(){t.editForm.salefee=e.salefee},100)},getMainList:function(){var e=this;e.loading=!0,e.$api.LM.post({port:":6004",url:"/sysOil/query",data:{pageBean:e.pageRequest,params:{},querys:[],sorter:[]}}).then(function(t){if(e.loading=!1,t.rows.length>0){t.rows.forEach(function(e,t){switch(e.type){case 0:e.mark="00#柴油";break;case 1:e.mark="98#汽油";break;case 2:e.mark="95#汽油";break;case 3:e.mark="92#汽油"}e.changeTime=Object(i.b)(e.lastUpdateTime,"-",":")})}e.pageResult=t})}},mounted:function(){this.userInfo=sessionStorage.getItem("user"),this.getMainList()}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("div",{staticClass:"header"},[a("div",{staticClass:"headleft"},[a("span",{staticClass:"sx"},[e._v("油价列表信息")])]),e._v(" "),a("div",{staticClass:"headright"},[a("el-row",[a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"fa fa-refresh"},on:{click:e.getMainList}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"fa fa-exchange"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"fa fa-th"}})],1)],1)],1)])]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.pageResult.rows,border:""}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.editHandler(t.row)}}},[e._v("调价")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"type",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"mark",label:"标号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"lowfee",label:"最低油价（元/升）"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"highfee",label:"最高油价（元/升）"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"guidefee",label:"国家指导价（元/升）"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"",label:"售价（元/升）"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"lastUpdateBy",label:"操作员"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"memo",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"changeTime",label:"操作时间"}})],1),e._v(" "),a("transition",{attrs:{name:"el-fade-in"}},[a("el-dialog",{staticClass:"dialog-oil-price-edit",staticStyle:{width:"50%",margin:"auto"},attrs:{title:"调价",visible:e.dialogEdit},on:{"update:visible":function(t){e.dialogEdit=t}}},[a("div",[a("div",{staticClass:"dialog-static-info"},[a("span",{staticClass:"dialog-info-label"},[e._v("标号:")]),e._v(" "),a("span",{staticClass:"dialog-oil-info"},[e._v(e._s(e.dialogInfo.mark))])]),e._v(" "),a("div",{staticClass:"dialog-static-info"},[a("span",{staticClass:"dialog-info-label"},[e._v("最低油价:")]),e._v(" "),a("span",{staticClass:"dialog-oil-info"},[e._v(e._s(e.dialogInfo.lowfee)+" 元/升")])]),e._v(" "),a("div",{staticClass:"dialog-static-info"},[a("span",{staticClass:"dialog-info-label"},[e._v("最高油价:")]),e._v(" "),a("span",{staticClass:"dialog-oil-info"},[e._v(e._s(e.dialogInfo.highfee)+" 元/升")])])]),e._v(" "),a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"售价:",prop:"salefee"}},[a("el-input",{staticClass:"dialog-short-input",attrs:{placeholder:"请输入售价","data-flag":"salefee"},nativeOn:{input:function(t){return e.resetMoney(t)}},model:{value:e.editForm.salefee,callback:function(t){e.$set(e.editForm,"salefee",t)},expression:"editForm.salefee"}}),e._v(" "),a("span",[e._v("元/升")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetForm("editPriceForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("editPriceForm")}}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(r,s,!1,function(e){a("7rjI")},"data-v-f42726d6",null);t.default=l.exports},yBzE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s={name:"CarTypeStageCompare",data:function(){return{tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick},operationAttrs:{width:"200px"},formatters:{state:function(e,t,a){switch(a){case 0:return"编辑中";case 1:return"审批中";case 2:return"完成";default:return a}}},hostUrl:this.global.lyBudgetUrl,tableName:"",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyGatherUrl,url:"tIcBuCar/getForecastMain",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"EQUAL",value0:0,andor0:"AND"}}}}},methods:{rowclick:function(e,t,a){var i=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList()})},findafter:function(e,t){var a=this;e.length<=0||(this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e[0].versionId}),this.$nextTick(function(){a.$refs.reftableitem.getList()}))}}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",[t("xyj-table",this._b({ref:"reftablamain",attrs:{id:"1"},on:{update:this.findafter}},"xyj-table",this.tablemain,!1),[t("template",{slot:"xyjcontainer"},[t("el-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",size:"mini"}},[this._v(this._s(this.$t("contrast")))])],1)],2)],1)])},staticRenderFns:[]};var n=a("VU/8")(s,l,!1,function(e){a("Xqfw")},"data-v-3857bfcb",null);t.default=n.exports},"yGS/":function(e,t){},yXjv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("oXfx"),o=a("vALX"),c=a("TE7m"),d=a("hnOB"),m=a("ZqJ4"),u={name:"WeldingInvestDI",components:{ChooseCarType:n.a,EditTable:o.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,tableitemKey:1,progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingInvestDI/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(l()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,dialogWidth:"650px",tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuWeldingInvestDI",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingInvestDI/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingInvestDI/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuWeldingInvestDI/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingInvestDI/delete",method:"delete"},extraSelectData:{ordertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new4type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},new5type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill1type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill2type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},skill3type:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]},othertype:function(){return[{label:"车型",value:"车型"},{label:"共通",value:"共通"}]}},editAxios:{},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew,onAfterSuccessNew:this.itemAfterSuccessNew,onAfterSuccessDelete:this.itemAfterSuccessDelete}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},itemAfterSuccessNew:function(e,t){var a=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuWeldingInvestDI",a,"moveChart")},itemAfterSuccessDelete:function(e){var t=this.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuWeldingInvestDI",t,"moveChart")},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.update(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})},findafter:function(e,t){var a=this,i=this;function s(e){i.tableitem.customQuery[100]=r()({},i.tableitem.customQuery[100],{value100:e}),i.update()}e.length<=0?s(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),s(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=r()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList(),t.itemAfterSuccessNew()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingInvestDI/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].investId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuWeldingInvestDI/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList();var e=t.$refs.reftablamain.selected[0].versionId;Object(d.a)("tIcBuWeldingInvestDI",e,"moveChart")})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(c.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuWeldingInvestDI/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},update:function(){this.$refs.reftablamain.selected[0].versionId&&(this.tableitem.editAxios={hostUrl:this.global.lyBaseUrl,url:"/sysTableinfo/findByTableNameAndVersionId?tablename=tIcBuWeldingInvestDI&versionId="+this.$refs.reftablamain.selected[0].versionId,method:"get"}),this.tableitemKey++,Object(d.a)("tIcBuWeldingInvestDI",this.$refs.reftablamain.selected[0].versionId,"moveChart")},edit:function(){var e=this.$refs.reftablamain.selected[0].versionId,t=this.$refs.reftableitem.allTableColumns;this.$refs.editDialog.show(t,e,"tIcBuWeldingInvestDI"),this.$refs.editDialog.getdialogFrom(t)},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].investId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"investId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}},watch:{"paramsTrans.confirmParms.params.versionId":function(e){Object(d.a)("tIcBuWeldingInvestDI",e,"moveChart")}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",{attrs:{id:"tableitem"}},[a("xyj-table",e._b({key:e.tableitemKey,ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.chooseVehicleType"),disabled:e.isDisabled},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.edit"),disabled:e.isDisabled},on:{click:e.edit}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("div",{style:{width:"80%",height:"350px",margin:"0 auto"},attrs:{id:"moveChart"}}),e._v(" "),a("edit-table",{ref:"editDialog",on:{update:e.update}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("/MgU")},"data-v-607d0b30",null);t.default=f.exports},yZMX:function(e,t){},yse4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var r=a("VU/8")({name:"methodsStatistical"},i,!1,function(e){a("50Q/")},"data-v-14eb34aa",null);t.default=r.exports},z86h:function(e,t){},zD33:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("gRE1"),r=a.n(i),s=a("woOf"),l=a.n(s),n=a("mvHQ"),o=a.n(n),c=a("oXfx"),d=a("TE7m"),m=a("ZqJ4"),u={name:"TIcBuPaintingLabour",components:{ChooseCarType:c.a},data:function(){var e=this;return{qmodify:m.a.QMODIFY,approvaling:m.a.APPROVALING,reject:m.a.REJECT,complete:m.a.COMPLETE,ticketcancel:m.a.TICKETCANCEL,isDisabled:!1,info:[],progress:{tableFlag:!1,UploadPercent:0},fileList:[],text:[],paramsTrans:{hostUrl:this.global.lyBudgetUrl,url:"/carVersion/getCar",method:"get",confirmParms:{basecar:"",basestage:"",baseCarVersionId:"",hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingLabour/baseCarConfirm",method:"post",params:{versionId:"",baseVersionId:""}}},tablemain:{hasOperation:!1,tableAttrs:{height:"200px",width:"800px"},tableOns:{"row-click":this.rowclick,"row-dblclick":function(t,a,i){e.$nextTick(function(){e.$refs.reftablamain.data.length>1&&(e.text=JSON.parse(o()(e.$refs.reftablamain.data))),e.$refs.reftablamain.data.length=0,e.$refs.reftablamain.data.push(t),e.$refs.reftablamain.$children[0].$el.style.display="none",e.$refs.reftablamain.$children[2].$el.style.display="none",e.$refs.reftablamain.$el.style.marginBottom="10px",delete e.$refs.reftablamain.getTableAttrs.height,e.$refs.reftablamain.$children[1].$el.style.cssText=""})},"header-click":function(t,a){e.$nextTick(function(){if(">"==t.label){var a={};e.text.forEach(function(t){e.$refs.reftablamain.data[0].versionId===t.versionId&&(a=t)}),e.$refs.reftablamain.data=e.text,e.$refs.reftablamain.$refs.table.setCurrentRow(a),e.$refs.reftablamain.getTableAttrs.height="200px",e.$refs.reftablamain.$children[0].$el.style.display="",e.$refs.reftablamain.$children[2].$el.style.display="",e.$refs.reftablamain.$el.style.marginBottom=""}})}},operationAttrs:{width:"200px"},formatters:{state:m.a.approvalStateChine},hostUrl:this.global.lyBudgetUrl,tableName:"MainDataInfo",sorter:[{direction:"ASC",property:"versionId"}],bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuStampingMaterial/getCarVersionInfo",method:"post",notCondition:!0},InitQuery:{0:{field0:"state",gx0:"EQUAL",value0:0,andor0:"AND"}}},tableitem:{hasDelete:!0,hasNew:!0,hasView:!1,hasEdit:!0,disabledNew:!1,isExpand:!1,tableAttrs:{width:"800px"},tableOns:{select:function(e,t){}},operationAttrs:{width:"130px"},hostUrl:this.global.lyBudgetUrl,tableName:"TIcBuPaintingLabour",sorter:[{direction:"ASC",property:"id"}],customQuery:{100:{field100:"versionId",gx100:"EQUAL",value100:null,andor100:"AND"}},bQuery:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingLabour/query",method:"post",notCondition:!1},bNewUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingLabour/save",method:"post",clear:!0,close:!0},bEditUrl:{hostUrl:this.global.lyBudgetUrl,url:"tIcBuPaintingLabour/save",method:"post",clear:!0,close:!0},bDeleteUrl:{hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingLabour/delete",method:"delete"},onManualEdit:this.reftableitemManualEdit,onManualNew:this.reftableitemManualNew}}},methods:{reftableitemManualEdit:function(e,t){e&&(e.id=t.id,e.versionId=t.versionId)},reftableitemManualNew:function(e){e.versionId=this.$refs.reftablamain.selected[0].versionId},rowclick:function(e,t,a){var i=this;this.paramsTrans.confirmParms.basecar=e.basecar,this.paramsTrans.confirmParms.basestage=e.basestage,this.paramsTrans.confirmParms.params.versionId=e.versionId,this.paramsTrans.confirmParms.baseCarVersionId=e.baseCarVersionId,this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:e.versionId}),this.$nextTick(function(){i.$refs.reftableitem.getList(),m.a.checkDisabled(e.state,function(e){i.isDisabled=e,i.tableitem.disabledNew=e})}),this.getinfo(e.versionId)},findafter:function(e,t){var a=this,i=this;function r(e){i.tableitem.customQuery[100]=l()({},i.tableitem.customQuery[100],{value100:e}),i.$nextTick(function(){i.$refs.reftableitem.getList()})}e.length<=0?r(-2):(this.paramsTrans.confirmParms.basecar=e[0].basecar,this.paramsTrans.confirmParms.basestage=e[0].basestage,this.paramsTrans.confirmParms.params.versionId=e[0].versionId,this.paramsTrans.confirmParms.baseCarVersionId=e[0].baseCarVersionId,this.$refs.reftablamain.$refs.table.setCurrentRow(e[0]),r(e[0].versionId),m.a.checkDisabled(e[0].state,function(e){a.isDisabled=e,a.tableitem.disabledNew=e}),this.getinfo(e[0].versionId))},chooseType:function(){this.$refs.carshow.open(!0)},carSeledtOk:function(e){var t=this;this.tableitem.customQuery[100]=l()({},this.tableitem.customQuery[100],{value100:this.paramsTrans.confirmParms.params.versionId}),this.$nextTick(function(){t.$refs.reftableitem.getList()})},downLoadBaseData:function(){var e=this;this.$refs.reftableitem.$refs.table.data.length<=0?this.$message.warning("没有明细数据无需导出"):Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingLabour/downLoadBaseData?mid="+this.$refs.reftableitem.$refs.table.data[0].labourId,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},importExcel:function(e){var t=this,a=this,i=new FormData;i.append("file",e.file),i.append("versionId",this.paramsTrans.confirmParms.params.versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,url:"/tIcBuPaintingLabour/importExcel",method:"post",data:i,onUploadProgress:function(e){e.lengthComputable&&(a.progress.tableFlag=!0,a.progress.UploadPercent=e.loaded/e.total*100,100==a.progress.UploadPercent&&setTimeout(function(){a.progress.tableFlag=!1},1e3))}}).then(function(e){t.$nextTick(function(){t.$message({message:"导入成功",type:"success"}),t.$refs.reftableitem.getList()})}).catch(function(e){t.$message.error(e.message)})},downloadBlank:function(){var e=this,t=new FormData;t.append("versionId",this.$refs.reftablamain.selected[0].versionId),Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"post",url:"/tIcBuPaintingLabour/downloadBlank",data:t,responseType:"blob"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=decodeURIComponent(e.filename),a.style.display="none",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,decodeURIComponent(e.filename))}).catch(function(t){e.$message.error(t.message)})},getinfo:function(e){var t=this;Object(d.a)({hostUrl:this.global.lyBudgetUrl,method:"get",url:"/carVersion/getLabourInfo?versionId="+e+"&type=4"}).then(function(e){t.info=[{name:"新车直劳单价"},{name:"新车DSTR"},{name:"基点车DST"},{name:"基点车实工数"},{name:"新车实工数"}],t.info=t.info.map(function(t,a){return t.key=r()(e)[a],t})}).catch(function(e){})},submission:function(){var e=this;m.a.clickApproval.call(this,function(t){if(e.$refs.reftableitem.data.length<=0)e.$message.warning("空数据无法提交");else{var a=e.tableitem.tableName,i=e.$refs.reftablamain.selected[0];t.business_no=e.$refs.reftableitem.data[0].materialId;var r={carversionId:i.versionId,versio:i.version,cartyp:i.cartype,stage:i.stage,platform:i.platform,actoryName:i.factoryName,sopdate:i.sopdate,ncontractdate:i.contractdate,basecar:i.basecar,basestage:i.basestage,tablename:a,bQuery:e.tableitem.bQuery,hostUrl:e.tableitem.hostUrl,fieldname:"materialId"};e.$refs.action.open(t,r,function(){e.$refs.reftablamain.getList({0:{field0:"state",gx0:"IN",value0:"-1,6,2",andor0:"AND"}})})}})},findcardate:function(e){var t={0:{field0:"state",gx0:"IN",value0:e,andor0:"AND"}};this.$refs.reftablamain.getList(t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("xyj-table",e._b({ref:"reftablamain",attrs:{id:"1"},on:{update:e.findafter}},"xyj-table",e.tablemain,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.qmodify")},on:{click:function(t){e.findcardate(e.qmodify)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.approvalIng")},on:{click:function(t){e.findcardate(e.approvaling)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.reject")},on:{click:function(t){e.findcardate(e.reject)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.complete")},on:{click:function(t){e.findcardate(e.complete)}}}),e._v(" "),a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"text",label:e.$t("action.ticketcancel")},on:{click:function(t){e.findcardate(e.ticketcancel)}}})],1)],2)],1),e._v(" "),a("div",[a("xyj-table",e._b({ref:"reftableitem",attrs:{id:"2"}},"xyj-table",e.tableitem,!1),[a("template",{slot:"xyjcontainer"},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",disabled:e.isDisabled,label:e.$t("action.chooseVehicleType")},on:{click:e.chooseType}}),e._v(" "),a("Xyj-button",{staticStyle:{position:"relative","margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.export")},on:{click:e.downLoadBaseData}}),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.downloadTemplate")},on:{click:e.downloadBlank}}),e._v(" "),a("el-upload",{staticStyle:{position:"relative",display:"inline-block"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/",multiple:"",limit:3,"http-request":e.importExcel,"file-list":e.fileList,accept:".xlsx, .xls","show-file-list":!1,disabled:e.isDisabled}},[a("Xyj-button",{staticStyle:{padding:"7px"},attrs:{type:"primary",label:e.$t("action.Import"),disabled:e.isDisabled}}),e._v(" "),1==e.progress.tableFlag?a("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":32,color:"#e8f3f5",type:"line",percentage:e.progress.UploadPercent}}):e._e()],1),e._v(" "),a("Xyj-button",{staticStyle:{"margin-left":"0px",padding:"7px"},attrs:{type:"primary",label:e.$t("action.submit"),disabled:e.isDisabled},on:{click:e.submission}})],1),e._v(" "),a("template",{slot:"getInvestInfo"},[a("el-row",e._l(e.info,function(t,i){return a("el-col",{key:i,attrs:{xl:4,lg:5,md:6,sm:9,xs:12}},[e._v(e._s(t.name)+"："+e._s(t.key))])}))],1)],2)],1),e._v(" "),a("choose-car-type",{ref:"carshow",attrs:{paramsTrans:e.paramsTrans,onOk:e.carSeledtOk}}),e._v(" "),a("approval-dialog",{ref:"action"})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("HuBv")},"data-v-17ad8bc9",null);t.default=f.exports},zeAH:function(e,t){}});
//# sourceMappingURL=0.a45dd88b4694cbc6756a.js.map